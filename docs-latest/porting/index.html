<HTML>
<HEAD>
<TITLE>eCos Porting Guide</TITLE>
</HEAD>

<body bgcolor="#FFFFFF" text="#000000" link="#CC0000" alink="#FF0000" vlink="#880000">

<H2>eCos Porting Guide</H2>
<HR noshade SIZE=3>

<h3>Introduction</h3>

<p>eCos has been designed to be fairly easy to port to new targets. A
target is a specific platform (board) using a given architecture (CPU
type). The porting is facilitated by the hierarchical layering of the
eCos sources - all architecture and platform specific code is
implemented in a HAL (hardware abstraction layer).

<p>By porting the eCos HAL to a new target the core functionality of
eCos (infra, kernel, uitron, etc) will be able to run on the
target. It may be necessary to add further platform specific code such
as serial drivers, display drivers, DSP drivers, etc. to add to get a
fully capable system.

<p>This document is intended as a help to the porting process. Due to
the nature of a porting job, it is impossible to give a complete
description of what has to be done for each and every potential
target. This should not be considered a clear-cut recipe - you will
probably need to make some implementation decisions, tweak a few
things, and just plain have to rely on common sense.

<p>However, what is covered here should be a large part of the
process. If you get stuck, you are advised to read the <a
href="http://sourceware.cygnus.com/ml/ecos-discuss/">ecos-discuss
archive</a> where you may find discussions which apply to the problem
at hand. You are also invited to ask questions on the <a
href="http://sourceware.cygnus.com/ecos/intouch.html">ecos-discuss
mailing list</a> to help you resolve problems - but as is always the
case with community lists, do not consider it an oracle for any and
all questions. Use common sense - if you ask too many questions which
could have been answered by reading the <a
href="http://sourceware.cygnus.com/ecos/docs-latest/">documentation</a>,
<a href="http://sourceware.cygnus.com/ecos/faq.html">FAQ</a> or <a
href="http://sourceware.cygnus.com/cgi-bin/cvsweb.cgi/ecos/packages/?cvsroot=ecos">source
code</a>, you are likely to be ignored.


<p>This document will be continually improved by Red Hat engineers as
time allows. Feedback and help with improving the document is sought,
so if you have any comments at all, please do not hesitate to post
them on <a
href="mailto:ecos-discuss@sourceware.cygnus.com?subject=[porting]
<subject>">ecos-discuss</a> (please prefix the subject with
[porting]).

<p>At the moment this document is mostly an outline. Many details to
fill in before it becomes truly usable. Many places you'll find a list
of keywords / concepts that should be described (please post on
ecos-discuss if there are areas you think are not covered).</p>

<p>All pages or sections where the caption ends in <tt>[TBD]</tt>
contain little more than key words and/or random thoughts - there has
been no work done as such on the content. The word FIXME may appear in
the text to highlight places where information is missing.</p>


<p><HR SIZE=3>
<h3>Writing a HAL</h3>

<p>In order to write an eCos HAL it's a good idea to have at least a
passing understanding of how the HAL interacts with the rest of the
system.

<h4>HAL Details</h4>

<p><a href="hal-directory.html">Directory Layout</a>

<p><a href="coding-conventions.html">Coding Conventions</a>

<p><a href="hal-exceptions.html">Exceptions</a>

<p><a href="hal-interrupts.html">Interrupts</a>

<p><a href="hal-diag.html">Diagnostics IO</a>

<p><a href="hal-calling-if.html">eCos/ROM Monitor Calling Interface</a>

<p><a href="hal-stubs.html">eCos GDB stubs</a>

<p><a href="hal-environment.html">eCos Run-time Environment</a>

<p><HR SIZE=3>
<h4>Platform HAL Porting</h4>

<p>This is the type of port that takes the least effort. It basically
consists of describing the platform (board) for the HAL: memory
layout, early platform initialization, interrupt controllers, and
simple serial device driver.

<p>Doing a platform port requires a preexisting architecture and
possibly a variant HAL port.

<p><a href="hal-plf-process.html">Porting process</a>
<p><a href="hal-memory.html">Platform Memory Layout</a>
<p><a href="hal-plf-cdl.html">CDL requirements</a>

<p><HR SIZE=3>
<h4>Variant HAL Porting</h4>

<p>A variant port can be a fairly limited job, but can also
require quite a lot of work. A variant HAL describes how a specific
CPU variant differs from the generic CPU architecture. The variant HAL
can re-define cache, MMU, interrupt, and other features which override
the default implementation provided by the architecture HAL.

<p>Doing a variant port requires a preexisting architecture HAL port.

<p><a href="hal-var-process.html">Porting process</a>
<p><a href="hal-var-cdl.html">CDL requirements</a>


<p><HR SIZE=3>
<h4>Architecture HAL Porting</h4>
<p><a href="hal-arch-process.html">Porting process</a>
<p><a href="hal-cache.html">HAL Cache Controls</a>
<p><a href="hal-linking.html">Linker Script Macros</a>
<p><a href="hal-arch-cdl.html">CDL requirements</a>

<p><HR SIZE=3>
<h4>RedBoot Porting</h4>
<p><a href="redboot-process.html">RedBoot Porting Process</a>
<p><a href="redboot-cdl.html">RedBoot CDL</a>
<p><a href="redboot-timer.html">RedBoot Timer</a>
<p><a href="redboot-cmds.html">RedBoot Commands</a>
<p><a href="redboot-flash.html">RedBoot Flash Support</a>
<p><a href="redboot-ether.html">RedBoot Ethernet Support</a>
</ul>

<p><HR SIZE=3>
<h3>Writing a Driver</h3>

<em>TBD: link to existing driver porting help (or move it here)</em>


<p><HR SIZE=3>
<h3>Documentation TODO list</h3>

<p>See the list of <a href="porting-todo.html">items</a> that haven't
found their way into sections yet.</p>

<hr noshade size=3>
</body>
</html>
