<HTML
><HEAD
><TITLE
>SPARClite hardware setup</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.33"><LINK
REL="HOME"
TITLE="Getting Started with eCos"
HREF="ecos-tutorial.html"><LINK
REL="UP"
TITLE="Hardware
setup"
HREF="hardware-setup.html"><LINK
REL="PREVIOUS"
TITLE="PowerPC MBX860 hardware setup"
HREF="powerpc-mbx860-hardware-setup.html"><LINK
REL="NEXT"
TITLE="ARM PID
hardware setup"
HREF="arm-pid-hardware-setup.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Getting Started with <SPAN
CLASS="PRODUCTNAME"
><SPAN
CLASS="TRADEMARK"
>eCos</SPAN
><SUP
><FONT
SIZE="-4"
>TM</FONT
></SUP
></SPAN
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="powerpc-mbx860-hardware-setup.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 10. Hardware
setup</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="arm-pid-hardware-setup.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="SPARCLITE-HARDWARE-SETUP"
>SPARClite hardware setup</A
></H1
><P
>The <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> Developer&#8217;s Kit
package comes with a ROM which provides <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> support for
the Fujitsu SPARClite Evaluation Board by way of <SPAN
CLASS="PRODUCTNAME"
>CygMon</SPAN
>. </P
><P
>An image of this ROM is also provided at <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/loaders/sparclite-sleb/cygmon.bin</TT
>.
The ROM is installed in socket IC9 on the evaluation board. Attention
should be paid to the correct orientation of the ROM during installation.</P
><P
>The <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> stub allows communication
with <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> using a TCP channel via the
ethernet port at connector J5.</P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1884"
>Ethernet
setup</A
></H2
><P
>The ethernet setup is described in the board&#8217;s manual,
but here is a recapitulation.</P
><P
>Set the board&#8217;s ethernet address using SW1 on the
motherboard:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>	    SW1-4 SW1-3 SW1-2 SW1-1    Ethernet Address
	    ----- ----- ----- -----    ----------------
	    OFF   OFF   OFF   OFF     No ethernet, use serial debug channel.
	    OFF   OFF   OFF    ON     00:00:0E:31:00:01
	    OFF   OFF    ON   OFF     00:00:0E:31:00:02
	    OFF   OFF    ON    ON     00:00:0E:31:00:03
	    OFF    ON   OFF   OFF     00:00:0E:31:00:04
	    OFF    ON   OFF    ON     00:00:0E:31:00:05
	    OFF    ON    ON   OFF     00:00:0E:31:00:06
	    OFF    ON    ON    ON     00:00:0E:31:00:07
	    ON    OFF   OFF   OFF     00:00:0E:31:00:08
	    ON    OFF   OFF    ON     00:00:0E:31:00:09
	    ON    OFF    ON   OFF     00:00:0E:31:00:0A
	    ON    OFF    ON    ON     00:00:0E:31:00:0B
	    ON     ON   OFF   OFF     00:00:0E:31:00:0C
	    ON     ON   OFF    ON     00:00:0E:31:00:0D
	    ON     ON    ON   OFF     00:00:0E:31:00:0E
	    ON     ON    ON    ON     00:00:0E:31:00:0F&#13;</PRE
></TD
></TR
></TABLE
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN1891"
>BOOTP/DHCP
service on Linux</A
></H3
><P
>Configure the BOOTP or DHCP server on the network to recognize
the evaluation board&#8217;s ethernet address so it can assign
the board an IP address. Below is a sample DHCP server configuration
from a Linux system (<TT
CLASS="FILENAME"
>/etc/dhcpd.conf</TT
>).
It shows a setup for three evaluation boards.</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>#

# DHCP server configuration.
#
allow bootp;

subnet 192.168.1.0 netmask 255.255.255.0 {
  host mb831evb {
    hardware ethernet 00:00:0e:31:00:01;
    fixed-address mb831evb;
  }
  host mb832evb {
    hardware ethernet 00:00:0e:31:00:02;
    fixed-address mb832evb;
  }
  host mb833evb {
    hardware ethernet 00:00:0e:31:00:03;
    fixed-address mb833evb;
  }
} </PRE
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN1901"
>BOOTP/DHCP
boot process</A
></H3
><P
>Even when configured to use a TCP channel, <SPAN
CLASS="PRODUCTNAME"
>CygMon</SPAN
> will
still print a boot message to the serial channel. If the BOOTP process
was successful and an IP address was found, a message &#8220;BOOTP
found xxx.xxx.xxx.xxx&#8221; will be printed where xxx.xxx.xxx.xxx
is the IP address assigned by the BOOTP or DHCP server. If the BOOTP
process fails, a message indicating failure will be printed and
the serial port will be used as the debug channel.</P
><P
>Once the board finds an IP address it will respond to ICMP
echo request packets (ping). This gives a simple means to test the
health of the board.</P
><P
>As described in xref, it should now be possible to connect
to the SPARCLite board from within GDB by using the command:</P
><P
CLASS="LITERALLAYOUT"
>(gdb)&nbsp;target&nbsp;remote&nbsp;xxx.xxx.xxx.xxx:1000</P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1910"
>Serial setup</A
></H2
><P
>The <SPAN
CLASS="PRODUCTNAME"
>CygMon</SPAN
> stubs also allow communication
with <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> by way of the serial port at connector
CON1. The communication parameters are fixed at 19200 baud, 8 data
bits, no parity bit and 1 stop bit (8-N-1). No flow control is employed.
Connection to the host computer should be made using a null modem
cable. A gender changer may also be required.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="powerpc-mbx860-hardware-setup.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ecos-tutorial.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="arm-pid-hardware-setup.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>PowerPC MBX860 hardware setup</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="hardware-setup.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>ARM PID
hardware setup</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>