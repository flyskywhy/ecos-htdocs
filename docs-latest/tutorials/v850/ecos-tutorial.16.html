<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD><!--version 1.3.4/Fri Apr 28 10:35:49 BST 2000-->
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="../cygnus.css">
<TITLE> Appendix 1: Real-time characterization</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Appendix 1: Real-time characterization</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.2.html">To Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.15.html">To&nbsp;previous&nbsp;page</A></P></TD><TD ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.17.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE><P ALIGN="LEFT">&nbsp;</P><BR><BR><HR ALIGN="center"></DIV>
<H2 CLASS="ChapterTitle">
<A NAME="pgfId=1100125">
 </A>
Appendix 1: Real-time characterization<DIV>
<IMG SRC="../botclear.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=1092403">
 </A>
For a discussion of real-time performance measurement for eCos, see the <EM CLASS="Emphasis">
eCos</EM>
 <EM CLASS="Emphasis">
Users' Guide.</EM>
</P>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=1092405">
 </A>
<A NAME="marker=1092404">
 </A>
Sample numbers:</H3>
<P CLASS="Body">
<A NAME="pgfId=1098129">
 </A>
</P>
<P CLASS="Body">
<A NAME="pgfId=1098162">
 </A>
</P>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1103142"> </A>
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=1106531">
 </A>
Board: NEC V850 Evaluation Board</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=1106532">
 </A>
CPU: NEC CEB-V850SA1</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106533"> </A>
Startup, main stack  : stack used   552 size  2936</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106534"> </A>
Startup              : Interrupt stack used   120 size  4096</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106535"> </A>
Startup              : Idlethread stack used   206 size  2048</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106536"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106537"> </A>
eCos Kernel Timings</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106538"> </A>
Notes: all times are in microseconds (.000001) unless otherwise stated</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106539"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106540"> </A>
Reading the hardware clock takes 27 'ticks' overhead</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106541"> </A>
... this value will be factored out of all other measurements</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106542"> </A>
Clock interrupt took  280.04 microseconds (1190 raw clock ticks)</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106543"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106544"> </A>
Testing parameters:</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106545"> </A>
   Clock samples:            32</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106546"> </A>
   Threads:                   7</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106547"> </A>
   Thread switches:         128</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106548"> </A>
   Mutexes:                  32</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106549"> </A>
   Mailboxes:                32</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106550"> </A>
   Semaphores:               32</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106551"> </A>
   Scheduler operations:    128</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106552"> </A>
   Counters:                 32</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106553"> </A>
   Alarms:                   32</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106554"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106555"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106556"> </A>
                                 Confidence</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106557"> </A>
     Ave     Min     Max     Var  Ave  Min  Function</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106558"> </A>
  ======  ======  ======  ====== ========== ========</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106559"> </A>
  288.71  280.24  297.18    4.84   42%  28% Create thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106560"> </A>
   70.76   70.59   70.82    0.10   71%  28% Yield thread [all suspended]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106561"> </A>
   59.06   59.06   59.06    0.00  100% 100% Suspend [suspended] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106562"> </A>
   60.00   60.00   60.00    0.00  100% 100% Resume thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106563"> </A>
   77.38   77.18   77.41    0.06   85%  14% Set priority</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106564"> </A>
    3.13    3.06    3.29    0.10   71%  71% Get priority</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106565"> </A>
  187.46  187.29  187.53    0.10   71%  28% Kill [suspended] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106566"> </A>
   70.76   70.59   70.82    0.10   71%  28% Yield [no other] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106567"> </A>
  104.40  103.29  104.71    0.32   85%  14% Resume [suspended low prio] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106568"> </A>
   59.06   59.06   59.06    0.00  100% 100% Resume [runnable low prio] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106569"> </A>
   97.11   91.06   98.12    1.73   85%  14% Suspend [runnable] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106570"> </A>
   70.76   70.59   70.82    0.10   71%  28% Yield [only low prio] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106571"> </A>
   59.06   59.06   59.06    0.00  100% 100% Suspend [runnable<IMG SRC="../pix/arrow.gif">not runnable]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106572"> </A>
  187.46  187.29  187.53    0.10   71%  28% Kill [runnable] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106573"> </A>
   95.63   95.29   97.18    0.44   85%  85% Destroy [dead] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106574"> </A>
  241.28  236.94  242.12    1.24   85%  14% Destroy [runnable] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106575"> </A>
  378.55  370.35  427.06   13.86   85%  85% Resume [high priority] thread</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106576"> </A>
  198.77  183.76  452.94   18.77   96%  96% Thread switch</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106577"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106578"> </A>
    2.59    2.59    2.59    0.00  100% 100% Scheduler lock</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106579"> </A>
   41.29   41.18   41.41    0.12  100%  50% Scheduler unlock [0 threads]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106580"> </A>
   40.82   40.71   40.94    0.12  100%  50% Scheduler unlock [1 suspended]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106581"> </A>
   41.29   41.18   41.41    0.12  100%  50% Scheduler unlock [many suspended]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106582"> </A>
   41.29   41.18   41.41    0.12  100%  50% Scheduler unlock [many low prio]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106583"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106584"> </A>
   17.94   17.88   18.12    0.09   75%  75% Init mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106585"> </A>
   68.71   68.71   68.71    0.00  100% 100% Lock [unlocked] mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106586"> </A>
   72.10   72.00   73.41    0.15   96%  71% Unlock [locked] mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106587"> </A>
   57.88   57.88   57.88    0.00  100% 100% Trylock [unlocked] mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106588"> </A>
   52.24   52.24   52.24    0.00  100% 100% Trylock [locked] mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106589"> </A>
   12.41   12.24   12.47    0.09   75%  25% Destroy mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106590"> </A>
  427.06  427.06  427.06    0.00  100% 100% Unlock/Lock mutex</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106591"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106592"> </A>
   34.94   34.82   35.06    0.12  100%  50% Create mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106593"> </A>
    0.76    0.71    0.94    0.09   75%  75% Peek [empty] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106594"> </A>
   75.29   75.29   75.29    0.00  100% 100% Put [first] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106595"> </A>
    1.24    1.18    1.41    0.09   75%  75% Peek [1 msg] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106596"> </A>
   75.76   75.76   75.76    0.00  100% 100% Put [second] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106597"> </A>
    0.76    0.71    0.94    0.09   75%  75% Peek [2 msgs] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106598"> </A>
   80.12   80.00   80.24    0.12  100%  50% Get [first] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106599"> </A>
   79.65   79.53   79.76    0.12  100%  50% Get [second] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106600"> </A>
   70.12   70.12   70.12    0.00  100% 100% Tryput [first] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106601"> </A>
   65.76   65.65   65.88    0.12  100%  50% Peek item [non-empty] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106602"> </A>
   78.00   77.88   78.12    0.12  100%  50% Tryget [non-empty] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106603"> </A>
   63.12   63.06   63.29    0.09   75%  75% Peek item [empty] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106604"> </A>
   67.82   67.76   68.00    0.09   75%  75% Tryget [empty] mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106605"> </A>
    1.94    1.88    2.12    0.09   75%  75% Waiting to get mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106606"> </A>
    1.47    1.41    1.65    0.09   75%  75% Waiting to put mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106607"> </A>
   75.59   75.53   75.76    0.09   75%  75% Delete mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106608"> </A>
  252.76  252.71  252.94    0.09   75%  75% Put/Get mbox</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106609"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106610"> </A>
   20.24   20.24   20.24    0.00  100% 100% Init semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106611"> </A>
   54.35   54.35   54.35    0.00  100% 100% Post [0] semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106612"> </A>
   66.59   66.59   66.59    0.00  100% 100% Wait [1] semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106613"> </A>
   52.24   52.24   52.24    0.00  100% 100% Trywait [0] semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106614"> </A>
   53.41   53.41   53.41    0.00  100% 100% Trywait [1] semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106615"> </A>
   10.65   10.59   10.82    0.09   75%  75% Peek semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106616"> </A>
   12.65   12.47   12.71    0.09   75%  25% Destroy semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106617"> </A>
  276.94  276.94  276.94    0.00  100% 100% Post/Wait semaphore</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106618"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106619"> </A>
   14.94   14.82   15.06    0.12  100%  50% Create counter</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106620"> </A>
    2.18    2.12    2.35    0.09   75%  75% Get counter value</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106621"> </A>
    3.06    3.06    3.06    0.00  100% 100% Set counter value</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106622"> </A>
   78.12   78.12   78.12    0.00  100% 100% Tick counter</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106623"> </A>
   13.82   13.65   13.88    0.09   75%  25% Delete counter</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106624"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106625"> </A>
   26.94   26.82   27.06    0.12  100%  50% Create alarm</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106626"> </A>
  104.18  104.00  104.24    0.09   75%  25% Initialize alarm</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106627"> </A>
    7.65    7.53    7.76    0.12  100%  50% Disable alarm</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106628"> </A>
  104.94  104.94  104.94    0.00  100% 100% Enable alarm</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106629"> </A>
   19.47   19.29   19.53    0.09   75%  25% Delete alarm</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106630"> </A>
   88.53   88.47   88.71    0.09   75%  75% Tick counter [1 alarm]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106631"> </A>
  418.61  411.29  645.41   14.17   96%  96% Tick counter [many alarms]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106632"> </A>
  139.59  139.53  139.76    0.09   75%  75% Tick &amp; fire counter [1 alarm]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106633"> </A>
 2150.21 2096.71 2367.53   83.59   78%  78% Tick &amp; fire counters [&gt;1 together]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106634"> </A>
  478.15  462.35  733.41   29.61   93%  93% Tick &amp; fire counters [&gt;1 separately]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106635"> </A>
  219.89  218.59  369.88    2.34   99%  99% Alarm latency [0 threads]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106636"> </A>
  292.11  218.59  371.53   37.85   50%  25% Alarm latency [2 threads]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106637"> </A>
  292.96  218.59  370.59   38.12   49%  25% Alarm latency [many threads]</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106638"> </A>
  540.90  495.76 1677.41   17.76   98%   0% Alarm <IMG SRC="../pix/arrow.gif"> thread resume latency</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106639"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106640"> </A>
   79.01   78.59  104.71    0.00            Clock/interrupt latency</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106641"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106642"> </A>
  123.41   85.88 1982.82    0.00            Clock DSR latency</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106643"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106644"> </A>
  522     516     536  (main stack:  1124)  Thread stack used (1912 total)</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106645"> </A>
All done, main stack : stack used  1124 size  2936</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106646"> </A>
All done             :  Interrupt stack used   288 size  4096</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106647"> </A>
All done             : Idlethread stack used   488 size  2048</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106648"> </A>
</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106649"> </A>
Timing complete - 32540 ms total</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1106650"> </A>
</PRE>
</DIV>
<HR ALIGN="center"><TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Appendix 1: Real-time characterization</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.2.html">To Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.15.html">To&nbsp;previous&nbsp;page</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.17.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE></BODY>
</HTML>
