<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD><!--version 1.3.net/Thu Jul 12 15:27:15  2001-->
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="../cygnus.css">
<TITLE> Appendix 1: Real-time characterization</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Appendix 1: Real-time characterization</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.html">Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.15.html">To&nbsp;previous&nbsp;page</A></P></TD><TD ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.17.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE><P ALIGN="LEFT">&nbsp;</P><BR><BR><HR ALIGN="center"></DIV>
<H2 CLASS="ChapterTitle">
<A NAME="pgfId=1100125">
 </A>
Appendix 1: Real-time characterization<DIV>
<IMG SRC="../botclear.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=1092403">
 </A>
For a discussion of real-time performance measurement for eCos, see the <EM CLASS="Emphasis">
eCos</EM>
 <EM CLASS="Emphasis">
Users' Guide.</EM>
</P>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=1092405">
 </A>
<A NAME="marker=1092404">
 </A>
Sample numbers:</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1135397"> </A>
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=1135398">
 </A>
Board: Toshiba JMR3904 Evaluation Board</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=1135399">
 </A>
CPU  : TMPR3904F 50MHz</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1135400"> </A>

eCOS Kernel Timings
Note: all times are in microseconds (.000001) unless otherwise stated

Reading the hardware clock takes 0 'ticks' overhead
... this value will be factored out of all other measurements
Clock interrupt took   29.68 microseconds (45 raw clock ticks)

Testing parameters:
   Clock samples:          32
   Threads:                24
   Thread switches:       128
   Mutexes:                32
   Mailboxes:              32
   Semaphores:             32
   Scheduler operations:  128
   Counters:               32
   Alarms:                 32


                                 Confidence
     Ave     Min     Max     Var  Ave  Min  Function
  ======  ======  ======  ====== ========== ========
   13.62   11.72   27.99    1.51   79%  54% Create thread
    2.77    2.60    3.91    0.26   79%  79% Yield thread [all suspended]
    3.31    2.60    6.51    0.27   83%  12% Suspend [suspended] thread
    2.58    1.95    7.81    0.47   58%  37% Resume thread
    4.94    4.56   11.07    0.60   95%  79% Set priority
    0.71    0.65    1.95    0.10   95%  95% Get priority
   14.97   14.32   25.39    0.87   95%  95% Kill [suspended] thread
    2.25    1.95    9.11    0.57   95%  95% Yield [no other] thread
    7.27    6.51   12.37    0.42   79%  16% Resume [suspended low prio] thread
    2.28    1.95    7.16    0.51   95%  79% Resume [runnable low prio] thread
    4.31    3.26   12.37    0.75   87%  79% Suspend [runnable] thread
    2.17    1.95    7.16    0.42   95%  95% Yield [only low prio] thread
    2.39    1.95    6.51    0.51   95%  58% Suspend [runnable<IMG SRC="../pix/arrow.gif">not runnable]
   13.43   12.37   22.79    0.80   91%  91% Kill [runnable] thread
   22.30   20.83   37.76    1.76   91%  91% Resume [high priority] thread
    4.62    4.56   11.07    0.13   98%  98% Thread switch

    1.51    1.30    2.60    0.29   68%  68% Scheduler lock
    2.36    1.95    3.26    0.31   61%  37% Scheduler unlock [0 threads]
    2.39    1.95    5.21    0.32   62%  36% Scheduler unlock [1 suspended]
    2.38    1.95    4.56    0.32   61%  37% Scheduler unlock [many suspended]
    2.38    1.95    5.21    0.32   61%  37% Scheduler unlock [many low prio]

    0.90    0.65    3.26    0.35   71%  71% Init mutex
    2.48    1.95    8.46    0.50   50%  46% Lock [unlocked] mutex
    2.83    2.60    9.11    0.42   93%  93% Unlock [locked] mutex
    2.30    1.95    6.51    0.45   96%  65% Trylock [unlocked] mutex
    1.99    1.30    5.86    0.24   84%  12% Trylock [locked] mutex
    0.04    0.00    1.30    0.08   96%  96% Destroy mutex
   42.40   42.32   44.92    0.16   96%  96% Unlock/Lock mutex

    1.44    1.30    5.86    0.28   96%  96% Create mbox
    0.51    0.00    1.30    0.25   71%  25% Peek [empty] mbox
    2.93    2.60    9.11    0.51   96%  78% Put [first] mbox
    0.51    0.00    1.30    0.25   71%  25% Peek [1 msg] mbox
    4.19    3.91    5.21    0.34   59%  59% Put [second] mbox
    0.45    0.00    0.65    0.28   68%  31% Peek [2 msgs] mbox
    3.28    2.60   10.42    0.45   65%  31% Get [first] mbox
    3.34    2.60    9.77    0.40   78%  18% Get [second] mbox
    2.69    1.95    9.11    0.40   78%  18% Tryput [first] mbox
    2.75    1.95    7.81    0.32   93%   3% Peek item [non-empty] mbox
    3.15    2.60    9.11    0.48   53%  43% Tryget [non-empty] mbox
    2.22    1.95    6.51    0.41   96%  78% Peek item [empty] mbox
    2.40    1.95    5.86    0.42   50%  46% Tryget [empty] mbox
    0.47    0.00    0.65    0.26   71%  28% Waiting to get mbox
    0.59    0.00    1.30    0.15   84%  12% Waiting to put mbox
    4.01    3.26   10.42    0.40   81%  15% Delete mbox
   26.18   26.04   30.60    0.28   96%  96% Put/Get mbox

    0.92    0.65    3.91    0.38   71%  71% Init semaphore
    2.24    1.95    6.51    0.43   96%  75% Post [0] semaphore
    2.32    1.95    7.16    0.48   96%  65% Wait [1] semaphore
    2.03    1.30    5.86    0.24   90%   6% Trywait [0] semaphore
    1.91    1.30    4.56    0.23   78%  18% Trywait [1] semaphore
    0.77    0.00    1.95    0.30   65%   9% Peek semaphore
    0.61    0.00    1.95    0.15   84%  12% Destroy semaphore
   22.62   22.14   30.60    0.61   96%  62% Post/Wait semaphore

    0.92    0.65    3.91    0.38   71%  71% Create counter
    0.69    0.65    1.95    0.08   96%  96% Get counter value
    0.41    0.00    1.30    0.33   56%  40% Set counter value
    3.21    2.60    5.86    0.27   71%  21% Tick counter
    0.65    0.00    3.26    0.16   84%  12% Delete counter

    1.57    1.30    4.56    0.38   71%  71% Create alarm
    4.52    3.91   13.02    0.57   50%  46% Initialize alarm
    0.61    0.00    1.95    0.15   84%  12% Disable alarm
    4.43    3.91    9.11    0.43   56%  40% Enable alarm
    0.87    0.65    2.60    0.32   71%  71% Delete alarm
    2.93    2.60    6.51    0.43   96%  65% Tick counter [1 alarm]
   14.83   14.32   22.79    0.60   96%  59% Tick counter [many alarms]
    4.88    4.56   11.07    0.51   96%  78% Tick &amp; fire counter [1 alarm]
   83.25   82.03  102.86    1.23   96%  93% Tick &amp; fire counters [&gt;1 together]
   17.58   16.93   27.34    0.61   50%  46% Tick &amp; fire counters [&gt;1 separately]
   26.18   24.74   40.36    0.30   97%   0% Alarm latency [0 threads]
   33.88   29.30   56.64    1.70   85%   6% Alarm latency [2 threads]
   36.37   29.30   61.20    3.25   53%  24% Alarm latency [many threads]

    7.85    6.51   14.97    0.00            Clock/interrupt latency

Timing complete - 23540 ms total

PASS:&lt;Basic timing OK&gt;
EXIT:&lt;done&gt;
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=1135401">
 </A>
Board: Toshiba REF 4955</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=1135402">
 </A>
CPU  : Toshiba TX4955 66MHz</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1135403"> </A>
Startup, main stack             : stack used   960 size  2936
Startup              :  Interrupt stack used   168 size  4096
Startup              : Idlethread stack used   372 size  2048

eCos Kernel Timings
Notes: all times are in microseconds (.000001) unless otherwise stated

Reading the hardware clock takes 3 'ticks' overhead
... this value will be factored out of all other measurements
Clock interrupt took    4.00 microseconds (264 raw clock ticks)

Testing parameters:
   Clock samples:            32
   Threads:                  64
   Thread switches:         128
   Mutexes:                  32
   Mailboxes:                32
   Semaphores:               32
   Scheduler operations:    128
   Counters:                 32
   Alarms:                   32


                                 Confidence
     Ave     Min     Max     Var  Ave  Min  Function
  ======  ======  ======  ====== ========== ========
   11.21    9.58   14.11    0.95   48%  34% Create thread
    0.66    0.65    1.29    0.02   98%  98% Yield thread [all suspended]
    0.63    0.53    3.06    0.17   82%  82% Suspend [suspended] thread
    0.54    0.53    1.06    0.02   98%  98% Resume thread
    0.78    0.74    1.39    0.05   93%  93% Set priority
    0.05    0.05    0.36    0.01   98%  98% Get priority
    2.06    1.89    6.65    0.25   95%  79% Kill [suspended] thread
    0.65    0.65    0.68    0.00   98%  98% Yield [no other] thread
    1.15    1.02    3.03    0.20   81%  81% Resume [suspended low prio] thread
    0.54    0.52    1.18    0.03   96%  96% Resume [runnable low prio] thread
    0.94    0.88    1.27    0.01   95%   1% Suspend [runnable] thread
    0.65    0.65    0.68    0.00   98%  98% Yield [only low prio] thread
    0.54    0.53    0.86    0.01   98%  96% Suspend [runnable<IMG SRC="../pix/arrow.gif">not runnable]
    1.97    1.89    2.98    0.12   84%  84% Kill [runnable] thread
    1.03    0.92    4.94    0.17   89%  89% Destroy [dead] thread
    2.55    2.33    4.38    0.24   89%  70% Destroy [runnable] thread
    5.62    4.11   13.23    0.99   65%  40% Resume [high priority] thread
    1.84    1.83    2.79    0.02   98%  98% Thread switch

    0.12    0.02    0.65    0.15   74%  74% Scheduler lock
    0.35    0.35    0.35    0.00  100% 100% Scheduler unlock [0 threads]
    0.35    0.35    0.35    0.00  100% 100% Scheduler unlock [1 suspended]
    0.43    0.35    1.17    0.13   78%  78% Scheduler unlock [many suspended]
    0.45    0.35    1.17    0.15   75%  75% Scheduler unlock [many low prio]

    0.46    0.15    3.38    0.30   62%  50% Init mutex
    0.73    0.64    3.27    0.16   96%  96% Lock [unlocked] mutex
    0.77    0.65    4.50    0.23   96%  96% Unlock [locked] mutex
    0.58    0.55    1.42    0.05   96%  96% Trylock [unlocked] mutex
    0.51    0.50    0.83    0.02   96%  96% Trylock [locked] mutex
    0.12    0.11    0.41    0.02   96%  96% Destroy mutex
    4.72    4.70    5.58    0.05   96%  96% Unlock/Lock mutex

    1.01    0.67    3.48    0.40   71%  71% Create mbox
    0.02    0.00    0.53    0.03   96%  96% Peek [empty] mbox
    0.89    0.68    4.20    0.29   96%  71% Put [first] mbox
    0.02    0.00    0.33    0.02   96%  96% Peek [1 msg] mbox
    0.69    0.68    0.76    0.01   50%  46% Put [second] mbox
    0.02    0.00    0.30    0.02   96%  96% Peek [2 msgs] mbox
    0.81    0.71    3.83    0.19   96%  96% Get [first] mbox
    0.72    0.71    1.02    0.02   96%  96% Get [second] mbox
    0.81    0.65    2.74    0.22   96%  71% Tryput [first] mbox
    0.67    0.62    2.27    0.10   96%  96% Peek item [non-empty] mbox
    0.77    0.71    2.41    0.10   96%  96% Tryget [non-empty] mbox
    0.59    0.58    0.88    0.02   96%  96% Peek item [empty] mbox
    0.62    0.62    0.67    0.00   96%  96% Tryget [empty] mbox
    0.03    0.02    0.32    0.02   96%  96% Waiting to get mbox
    0.02    0.02    0.06    0.01   50%  46% Waiting to put mbox
    0.75    0.65    3.59    0.18   96%  96% Delete mbox
    2.80    2.77    3.59    0.05   96%  96% Put/Get mbox

    0.37    0.18    0.88    0.28   71%  71% Init semaphore
    0.48    0.47    0.80    0.02   96%  96% Post [0] semaphore
    0.60    0.59    0.67    0.01   50%  46% Wait [1] semaphore
    0.53    0.50    1.41    0.06   96%  96% Trywait [0] semaphore
    0.51    0.50    0.71    0.01   96%  50% Trywait [1] semaphore
    0.09    0.09    0.15    0.00   96%  96% Peek semaphore
    0.12    0.11    0.41    0.02   96%  96% Destroy semaphore
    3.05    3.05    3.05    0.00  100% 100% Post/Wait semaphore

    0.57    0.17    2.76    0.24   59%  25% Create counter
    0.06    0.05    0.58    0.03   96%  96% Get counter value
    0.06    0.03    0.64    0.04   96%  96% Set counter value
    0.73    0.71    1.02    0.02   96%  96% Tick counter
    0.12    0.11    0.15    0.01   50%  46% Delete counter

    0.89    0.64    3.15    0.34   84%  71% Create alarm
    1.00    0.95    2.41    0.09   96%  96% Initialize alarm
    0.09    0.06    0.68    0.04   96%  96% Disable alarm
    1.05    1.00    2.48    0.09   96%  96% Enable alarm
    0.18    0.17    0.50    0.02   96%  96% Delete alarm
    0.90    0.89    1.11    0.01   96%  96% Tick counter [1 alarm]
    5.60    5.59    5.88    0.02   96%  96% Tick counter [many alarms]
    1.53    1.52    2.11    0.04   96%  96% Tick &amp; fire counter [1 alarm]
   25.48   25.47   25.76    0.02   96%  96% Tick &amp; fire counters [&gt;1 together]
    6.22    6.21    6.44    0.01   96%  96% Tick &amp; fire counters [&gt;1 separately]
    2.59    2.56    6.17    0.07   98%  98% Alarm latency [0 threads]
    4.06    3.95    6.24    0.08   78%  57% Alarm latency [2 threads]
    5.03    2.56    9.03    0.89   59%  10% Alarm latency [many threads]
    5.68    5.59   15.45    0.15   99%  99% Alarm <IMG SRC="../pix/arrow.gif"> thread resume latency

    2.52    1.41    8.12    0.00            Clock/interrupt latency

    2.05    1.17    6.00    0.00            Clock DSR latency

   34       0    1072  (main stack:  1320)  Thread stack used (1912 total)
All done, main stack            : stack used  1320 size  2936
All done             :  Interrupt stack used   136 size  4096
All done             : Idlethread stack used   996 size  2048

Timing complete - 30360 ms total

PASS:&lt;Basic timing OK&gt;
EXIT:&lt;done&gt;</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=1135412">
 </A>
Board: NEC VR4373</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=1135413">
 </A>
CPU  : NEC VR4300 133MHz</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1133041"> </A>

Startup, main stack             : stack used  1304 size  3576
Startup              :  Interrupt stack used   980 size  4096
Startup              : Idlethread stack used   494 size  2552

eCos Kernel Timings
Notes: all times are in microseconds (.000001) unless otherwise stated

Reading the hardware clock takes 3 'ticks' overhead
... this value will be factored out of all other measurements
Clock interrupt took    6.49 microseconds (431 raw clock ticks)

Testing parameters:
   Clock samples:          32
   Threads:                16
   Thread switches:       128
   Mutexes:                32
   Mailboxes:              32
   Semaphores:             32
   Scheduler operations:  128
   Counters:               32
   Alarms:                 32


                                 Confidence
     Ave     Min     Max     Var  Ave  Min  Function
  ======  ======  ======  ====== ========== ========
   17.21   16.18   22.14    0.88   75%  68% Create thread
    0.84    0.78    1.29    0.10   81%  81% Yield thread [all suspended]
    0.90    0.62    3.20    0.35   87%  87% Suspend [suspended] thread
    0.74    0.65    1.16    0.12   81%  68% Resume thread
    1.11    0.90    1.70    0.25   75%  68% Set priority
    0.11    0.05    0.35    0.09   75%  75% Get priority
    2.93    2.24    8.27    0.78   93%  75% Kill [suspended] thread
    0.88    0.78    1.92    0.16   93%  81% Yield [no other] thread
    1.82    1.20    4.71    0.62   87%  62% Resume [suspended low prio] thread
    0.70    0.63    0.86    0.09   68%  68% Resume [runnable low prio] thread
    1.21    1.07    1.61    0.13   81%  68% Suspend [runnable] thread
    0.86    0.78    1.58    0.13   81%  81% Yield [only low prio] thread
    0.69    0.62    0.84    0.09   68%  68% Suspend [runnable<IMG SRC="../pix/arrow.gif">not runnable]
    2.64    2.24    4.35    0.43   81%  62% Kill [runnable] thread
    1.50    1.07    5.82    0.56   93%  87% Destroy [dead] thread
    3.66    2.75    7.74    0.82   50%  56% Destroy [runnable] thread
   13.65    8.33   27.88    3.70   50%  43% Resume [high priority] thread
    2.04    1.89    3.32    0.15   46%  49% Thread switch

    0.19    0.05    0.83    0.13   48%  44% Scheduler lock
    0.50    0.41    1.59    0.13   89%  73% Scheduler unlock [0 threads]
    0.52    0.41    1.29    0.14   89%  64% Scheduler unlock [1 suspended]
    0.56    0.41    1.49    0.15   42%  47% Scheduler unlock [many suspended]
    0.56    0.41    1.41    0.15   43%  47% Scheduler unlock [many low prio]

    0.57    0.20    2.33    0.27   65%  50% Init mutex
    0.89    0.75    3.35    0.20   96%  75% Lock [unlocked] mutex
    0.90    0.74    4.38    0.25   96%  93% Unlock [locked] mutex
    0.77    0.65    2.63    0.17   96%  75% Trylock [unlocked] mutex
    0.66    0.59    1.16    0.10   75%  75% Trylock [locked] mutex
    0.07    0.00    0.45    0.09   75%  75% Destroy mutex
    7.95    7.71    9.49    0.19   50%  46% Unlock/Lock mutex

    1.04    0.81    3.44    0.27   93%  68% Create mbox
    0.10    0.02    0.57    0.11   71%  68% Peek [empty] mbox
    1.15    0.83    4.71    0.31   53%  71% Put [first] mbox
    0.10    0.02    0.57    0.12   68%  68% Peek [1 msg] mbox
    1.01    0.83    3.83    0.22   93%  75% Put [second] mbox
    0.09    0.02    0.57    0.10   71%  71% Peek [2 msgs] mbox
    1.03    0.81    5.02    0.27   96%  87% Get [first] mbox
    0.93    0.81    1.61    0.14   84%  62% Get [second] mbox
    1.07    0.77    4.18    0.23   68%  50% Tryput [first] mbox
    0.89    0.72    3.49    0.21   93%  71% Peek item [non-empty] mbox
    1.04    0.83    4.09    0.26   90%  81% Tryget [non-empty] mbox
    0.79    0.68    1.97    0.15   87%  68% Peek item [empty] mbox
    0.84    0.72    2.36    0.17   93%  68% Tryget [empty] mbox
    0.13    0.02    0.59    0.13   87%  62% Waiting to get mbox
    0.13    0.02    0.90    0.13   90%  62% Waiting to put mbox
    0.93    0.77    3.23    0.21   90%  71% Delete mbox
    4.74    4.51    8.80    0.32   93%  78% Put/Get mbox

    0.50    0.21    1.95    0.29   90%  50% Init semaphore
    0.86    0.57    2.87    0.29   93%  56% Post [0] semaphore
    1.01    0.74    3.62    0.28   93%  56% Wait [1] semaphore
    0.87    0.60    3.17    0.28   90%  59% Trywait [0] semaphore
    0.74    0.62    1.70    0.14   93%  56% Trywait [1] semaphore
    0.36    0.11    1.11    0.26   65%  56% Peek semaphore
    0.25    0.12    1.19    0.14   93%  56% Destroy semaphore
    7.85    7.52    8.93    0.21   62%  43% Post/Wait semaphore

    0.90    0.44    3.08    0.29   65%  28% Create counter
    0.07    0.05    0.89    0.05   96%  96% Get counter value
    0.06    0.05    0.33    0.02   96%  96% Set counter value
    0.88    0.86    1.62    0.05   96%  96% Tick counter
    0.13    0.12    0.41    0.02   96%  96% Delete counter

    1.37    0.81    2.95    0.27   62%  25% Create alarm
    1.35    1.17    6.03    0.31   96%  93% Initialize alarm
    0.11    0.08    0.65    0.05   90%  90% Disable alarm
    1.23    1.14    3.05    0.15   93%  87% Enable alarm
    0.21    0.18    0.47    0.04   90%  90% Delete alarm
    1.03    0.99    2.11    0.07   96%  96% Tick counter [1 alarm]
    4.96    4.96    4.96    0.00  100% 100% Tick counter [many alarms]
    1.70    1.67    2.51    0.05   96%  96% Tick &amp; fire counter [1 alarm]
   26.39   26.38   26.71    0.02   96%  96% Tick &amp; fire counters [&gt;1 together]
    5.65    5.64    5.91    0.02   96%  96% Tick &amp; fire counters [&gt;1 separately]
    2.55    2.38    9.86    0.19   96%  54% Alarm latency [0 threads]
    5.37    3.80    9.73    0.95   50%  34% Alarm latency [2 threads]
    8.79    5.83   16.12    1.29   57%  14% Alarm latency [many threads]

    5.85    2.26   16.24    0.00            Clock/interrupt latency

 1540    1536    1544  (main stack:  1664)  Thread stack used (2552 total)
All done, main stack            : stack used  1664 size  3576
All done             :  Interrupt stack used   312 size  4096
All done             : Idlethread stack used  1440 size  2552

Timing complete - 23810 ms total

PASS:&lt;Basic timing OK&gt;
EXIT:&lt;done&gt;
</PRE>
</DIV>
<HR ALIGN="center"><TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Appendix 1: Real-time characterization</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.html">Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.15.html">To&nbsp;previous&nbsp;page</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.17.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE></BODY>
</HTML>
