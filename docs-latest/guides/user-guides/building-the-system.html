<HTML
><HEAD
><TITLE
>Building the system</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.33"><LINK
REL="HOME"
TITLE="eCos Users
Guide"
HREF="user-guides.html"><LINK
REL="UP"
TITLE="Manual configuration"
HREF="manual-configuration.html"><LINK
REL="PREVIOUS"
TITLE="Creating the Build
Tree"
HREF="creating-the-build-tree.html"><LINK
REL="NEXT"
TITLE="Packages"
HREF="packages.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
><SPAN
CLASS="TRADEMARK"
>eCos</SPAN
><SUP
><FONT
SIZE="-4"
>TM</FONT
></SUP
> User&#8217;s
Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="creating-the-build-tree.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 7. Manual configuration</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="packages.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="BUILDING-THE-SYSTEM"
>Building the system</A
></H1
><P
>Once a build tree has been generated with pkgconf.tcl, building <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> is straightforward:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>make</B
></TT
> </PRE
></TD
></TR
></TABLE
><P
>The build tree contains the subdirectories, makefiles, and
everything else that is needed to generate the default configuration
for the selected architecture and platform. The only requirement
is that the tools needed for that architecture, for example <B
CLASS="COMMAND"
>powerpc-eabi-g++</B
>,
are available using the standard search path. If this is not the
case then the <B
CLASS="COMMAND"
>make</B
> will fail with an error message.
If you have a multiprocessor system then it may be more efficient
to use:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><B
CLASS="COMMAND"
>make -j <TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
></B
></P
><P
>where <TT
CLASS="REPLACEABLE"
><I
>n</I
></TT
> is equal to the number
of processors on your system.</P
><P
>Once the <B
CLASS="COMMAND"
>make</B
> process has completed, the
install tree will contain the header files and the target library
that are needed for application development. </P
><P
>It is also possible to build the system&#8217;s test cases
for the current configuration:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>make tests</B
></TT
> </PRE
></TD
></TR
></TABLE
><P
>The resulting test executables will end up in a <TT
CLASS="FILENAME"
>tests</TT
> subdirectory
of the install tree. </P
><P
>If disk space is scarce then it is possible to make the copy
of the install tree for application development purposes, and then
use: </P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>make clean</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>The build tree will now use up a minimum of disk space &#8212; the
bulk of what is left consists of configuration header files that
you may have edited and hence should not be deleted automatically.
However, it is possible to rebuild the system at any time without
reinvoking <B
CLASS="COMMAND"
>pkgconf.tcl</B
>, just by running <B
CLASS="COMMAND"
>make</B
> again. </P
><P
>Under exceptional circumstances it may be necessary to run <B
CLASS="COMMAND"
>make
clean</B
> for other reasons, such as when a new release of
the toolchain is installed. The toolchain includes a number of header
files which are closely tied to the compiler, for example <TT
CLASS="FILENAME"
>limits.h</TT
>,
and these header files are not and should not be duplicated by <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>.
The makefiles perform header file dependency analysis, so that when
a header file is changed all affected sources will be rebuilt during
the next <B
CLASS="COMMAND"
>make</B
>. This is very useful when the configuration
header files are changed, but it also means that a build tree containing
information about the locations of header files must be rebuilt.
If a new version of the toolchain is installed and the old version
is removed then this location information is no longer accurate,
and <B
CLASS="COMMAND"
>make</B
> will complain that certain dependencies cannot
be satisfied. Under such circumstances it is necessary to do a <B
CLASS="COMMAND"
>make
clean</B
> first. </P
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="creating-the-build-tree.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user-guides.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="packages.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Creating the Build
Tree</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="manual-configuration.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Packages</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>