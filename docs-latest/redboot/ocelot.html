<!-- Copyright (C) 2001 Red Hat, Inc.                                -->
<!-- This material may be distributed only subject to the terms      -->
<!-- and conditions set forth in the Open Publication License, v1.0  -->
<!-- or later (the latest version is presently available at          -->
<!-- http://www.opencontent.org/openpub/).                           -->
<!-- Distribution of substantively modified versions of this         -->
<!-- document is prohibited without the explicit permission of the   -->
<!-- copyright holder.                                               -->
<!-- Distribution of the work or derivative of the work in any       -->
<!-- standard (paper) book form is prohibited unless prior           -->
<!-- permission is obtained from the copyright holder.               -->
<HTML
><HEAD
><TITLE
>PMC-Sierra MIPS RM7000 Ocelot</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="RedBoot&#8482; User's Guide"
HREF="redboot.html"><LINK
REL="UP"
TITLE="Installation and Testing"
HREF="installation-and-testing.html"><LINK
REL="PREVIOUS"
TITLE="MIPS Atlas Board with CoreLV 4Kc and CoreLV 5Kc "
HREF="atlas.html"><LINK
REL="NEXT"
TITLE="Motorola PowerPC MBX"
HREF="mbx.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>RedBoot&#8482; User's Guide: Document Version 1.5g, June 2001</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="atlas.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Installation and Testing</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="mbx.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="OCELOT"
>PMC-Sierra MIPS RM7000 Ocelot</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1343"
>Overview</A
></H2
><P
>RedBoot
uses the front facing serial port. The default serial port settings are 38400,8,N,1.
RedBoot also supports ethernet. Management of onboard flash is also supported.
Two basic RedBoot configurations are supported:<P
></P
><UL
><LI
><P
>RedBoot running from the board's flash boot sector.</P
></LI
><LI
><P
>RedBoot running from RAM with RedBoot in the flash boot sector.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1357"
>Initial Installation Method</A
></H2
><P
>Device programmer is used to program socketed flash parts.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1360"
>Flash Management</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN1362"
>Updating the primary RedBoot image</A
></H3
><P
>To update the primary RedBoot images, follow the procedures detailed
in <A
HREF="updating-redboot.html#UPDATE-PRIMARY-IMAGE"
>the section called <I
>Update the primary RedBoot flash image</I
> in Chapter 4</A
>, loading the primary image into
RAM at 0x80100000. The actual numbers used with
the flags in the sample commands are then:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-f 0xbfc00000      
-b 0x80100000      
-l 0x20000</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN1367"
>Updating the secondary RedBoot image</A
></H3
><P
>To update the secondary RedBoot images, follow the procedures detailed
in <A
HREF="updating-redboot.html#DIFFERENT-VERSION-FROM-RAM"
>the section called <I
>Load and start a different version of RedBoot, running from RAM</I
> in Chapter 4</A
>, but the actual numbers used
with the flags in the sample commands should be:
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-f 0xbfc20000
-b 0x80020000
-r 0x80020000
-l 0x20000</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1372"
>Special RedBoot Commands</A
></H2
><P
>None.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1375"
>Memory Maps</A
></H2
><P
>RedBoot sets up the following memory map on the Ocelot board. </P
><P
>Note that these addresses are accessed through kseg0/1 and thus translate
to the actual address range 0x80000000-0xbfffffff, depending on the need for
caching/non-caching access to the bus.<DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>NOTE: </B
>The virtual memory maps in this section use a C and B column to indicate
whether or not the region is cached (C) or buffered (B).</P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>Physical Address Range Description  
----------------------- -----------  
0x00000000 - 0x0fffffff SDRAM  
0x10000000 - 0x10ffffff PCI I/O space  
0x12000000 - 0x13ffffff PCI Memory space  
0x14000000 - 0x1400ffff Galileo system controller  
0x1c000000 - 0x1c0000ff PLD (board logic)  
0x1fc00000 - 0x1fc7ffff flash</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1383"
>Resource Usage</A
></H2
><P
>The flash based RedBoot image occupies flash addresses 0x1fc00000 -
0x1fc1ffff. RedBoot also reserves RAM (0x00000000 - 0x0001ffff) for RedBoot
runtime uses. </P
><P
>RAM based RedBoot configurations are designed to run from RAM at physical
addresses 0x00020000 - 0x0003ffff. RAM physical addresses from 0x00040000
to the end of RAM are available for general use, such as a temporary scratchpad
for downloaded images, before they are written to flash.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1387"
>Rebuilding RedBoot</A
></H2
><P
>The instructions in <A
HREF="rebuilding-redboot.html"
>Chapter 3</A
> should be followed.
The values for TARGET, ARCH_DIR and PLATFORM_DIR on this platform are
&#8220;ocelot&#8221;, &#8220;mips&#8221; and &#8220;rm7000/ocelot&#8221; respectively.
Note that the configuration export files supplied in the <TT
CLASS="COMPUTEROUTPUT"
>hal/mips/rm7000/ocelot/<TT
CLASS="REPLACEABLE"
><I
>VERSION</I
></TT
>/misc</TT
>
directory in the RedBoot source tree should be used.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="atlas.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="mbx.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>MIPS Atlas Board with CoreLV 4Kc and CoreLV 5Kc</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation-and-testing.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Motorola PowerPC MBX</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>