<!-- Copyright (C) 2001 Red Hat, Inc.                                -->
<!-- This material may be distributed only subject to the terms      -->
<!-- and conditions set forth in the Open Publication License, v1.0  -->
<!-- or later (the latest version is presently available at          -->
<!-- http://www.opencontent.org/openpub/).                           -->
<!-- Distribution of substantively modified versions of this         -->
<!-- document is prohibited without the explicit permission of the   -->
<!-- copyright holder.                                               -->
<!-- Distribution of the work or derivative of the work in any       -->
<!-- standard (paper) book form is prohibited unless prior           -->
<!-- permission is obtained from the copyright holder.               -->
<HTML
><HEAD
><TITLE
>Common Commands</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="RedBoot&#8482; User's Guide"
HREF="redboot.html"><LINK
REL="UP"
TITLE="RedBoot Commands and Examples"
HREF="redboot-commands-and-examples.html"><LINK
REL="PREVIOUS"
TITLE="RedBoot Editing Commands"
HREF="redboot-editing-commands.html"><LINK
REL="NEXT"
TITLE="Flash Image System (FIS)"
HREF="flash-image-system.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>RedBoot&#8482; User's Guide: Document Version 1.5g, June 2001</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="redboot-editing-commands.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 2. RedBoot Commands and Examples</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="flash-image-system.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="COMMON-COMMANDS"
>Common Commands</A
></H1
><P
>The general format of commands is:    <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>command &lt;options, parameters&#62;</PRE
></TD
></TR
></TABLE
>Elements are separated by the space character. Other control
characters, such as <SPAN
CLASS="GUIBUTTON"
>Tab</SPAN
> or editing keys (<SPAN
CLASS="GUIBUTTON"
>Insert</SPAN
>) are not currently supported. </P
><P
>Numbers, such as a memory location, may be specified in either decimal
or hexadecimal (requires a 0x prefix). </P
><P
>Commands may be abbreviated to any unique string. For example, <TT
CLASS="COMPUTEROUTPUT"
>lo</TT
> is equivalent to <TT
CLASS="COMPUTEROUTPUT"
>loa</TT
>
and <TT
CLASS="COMPUTEROUTPUT"
>load</TT
>. </P
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN355"
>Connectivity</A
></H2
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>ping - Check network connectivity ping</DT
><DD
><P
><TT
CLASS="FUNCTION"
>ping [-v] [-n &lt;count&#62;] [-l &lt;length&#62;] [-t &lt;timeouts&#62;]
[-r &lt;rate&#62;][-i &lt;IP_addr&#62;] -h &lt;IP_addr&#62;</TT
></P
><P
>The ping command checks the connectivity of the local network by sending
special (ICMP) packets to a specific host. These packets should be automatically
returned by that host. The command will indicate how many of these round-trips
were successfully completed. </P
></DD
></DL
></DIV
></P
><H2
CLASS="BRIDGEHEAD"
>Arguments</H2
><DIV
CLASS="INFORMALTABLE"
><P
></P
><TABLE
BORDER="0"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-v </TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Be verbose, displaying information
about each packet sent.</TD
></TR
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-n &lt;count&#62;</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Controls the number of packets
to be sent. Default is 10 if -n is not specified.</TD
></TR
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-t &lt;timeout&#62;</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>How long to wait for the round-trip
to complete, specified in milliseconds. Default is 1000ms (1 second).</TD
></TR
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-r &lt;rate&#62;</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>How fast to deliver packets, i.e.
time between successive sends. Default is 1000ms (1 second). Specifying "-r
0" will send packets as quickly as possible.</TD
></TR
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-l &lt;length&#62;</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Each packet contains some amount
of payload data. This option specifies the length of that data. The default
is 64 and the value is restricted to the range 64 .. 1400.</TD
></TR
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-i &lt;local IP&#62;</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>This allows the ping command to
override its local network address. While this is not recommended procedure,
it can help diagnose some situations, for example where BOOTP is not working
properly.</TD
></TR
><TR
><TD
WIDTH="192"
ALIGN="LEFT"
VALIGN="TOP"
>-h &lt;host IP&#62;</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>The address of the other device
to contact.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN397"
>General</A
></H2
><P
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>baudrate [-b value]</DT
><DD
><P
>This command sets the baud rate for the system serial console.
If the platform supports non-volatile configuration data, then the new value
will be saved and used when the system is reset.</P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>cache [ON | OFF]</DT
><DD
><P
>This command is used to manipulate the caches on the processor.</P
><P
>With no options, this command specifies the state of the system caches.</P
><P
>When an option is given, the caches are turned off or on appropriately.
 </P
></DD
></DL
></DIV
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>version</DT
><DD
><P
>Display RedBoot version information. </P
><P
>This command simply displays version information about RedBoot. <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>RedBoot&#62; version 
RedBoot(tm) debug environment - built 09:12:03, Feb 12 2001  
Platform: XYZ (PowerPC 860)  
Copyright (C) 2000, 2001, Red Hat, Inc. 
RAM: 0x00000000-0x00400000  
RedBoot&#62;</PRE
></TD
></TR
></TABLE
></P
></DD
></DL
></DIV
></P
><P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>reset</DT
><DD
><P
>Reset the system. </P
><P
>This command resets the platform. This should be equivalent to a power-on
reset.  </P
></DD
></DL
></DIV
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>dump -b &lt;location&#62; [-l &lt;length&#62;]</DT
><DD
><P
>Display (hex dump) a range of memory. </P
><P
>This command displays the contents of memory in hexadecimal format.
It is most useful for examining a segment of RAM or flash. Note that it could
be detrimental if used on memory mapped hardware registers. </P
><P
>The memory is displayed at most sixteen bytes per line, first as the
raw hex value, followed by an ASCII interpretation of the data. <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>RedBoot&#62; du -b 0x100 -l 0x80  
0x00000100: 3C60 0004 6063 2000 7C68 03A6 4E80 0020 |&lt;`..`c .|h..N.. |  
0x00000110: 0000 0000 0000 0000 0000 0000 0000 0000 |................|  
0x00000120: 0000 0000 0000 0000 0000 0000 0000 0000 |................|  
0x00000130: 0000 0000 0000 0000 0000 0000 0000 0000 |................|  
0x00000140: 0000 0000 0000 0000 0000 0000 0000 0000 |................|  
0x00000150: 0000 0000 0000 0000 0000 0000 0000 0000 |................|  
0x00000160: 0000 0000 0000 0000 0000 0000 0000 0000 |................|  
0x00000170: 0000 0000 0000 0000 0000 0000 0000 0000 |................| 
RedBoot&#62; d -b 0xfe00b000 -l 0x80  
0xFE00B000: 2025 700A 0000 0000 4174 7465 6D70 7420 | %p.....Attempt |  
0xFE00B010: 746F 206C 6F61 6420 532D 7265 636F 7264 |to load S-record|  
0xFE00B020: 2064 6174 6120 746F 2061 6464 7265 7373 | data to address|  
0xFE00B030: 3A20 2570 205B 6E6F 7420 696E 2052 414D |: %p [not in RAM|  
0xFE00B040: 5D0A 0000 2A2A 2A20 5761 726E 696E 6721 |]...*** Warning!|  
0xFE00B050: 2043 6865 636B 7375 6D20 6661 696C 7572 | Checksum failur|  
0xFE00B060: 6520 2D20 4164 6472 3A20 256C 782C 2025 |e - Addr: %lx, %|  
0xFE00B070: 3032 6C58 203C 3E20 2530 326C 580A 0000 |02lX &lt;&#62; %02lX...|  
0xFE00B080: 456E 7472 7920 706F 696E 743A 2025 702C |Entry point: %p,|   </PRE
></TD
></TR
></TABLE
></P
></DD
></DL
></DIV
>
<P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>cksum -b &lt;location&#62; -l &lt;length&#62;</DT
><DD
><P
>Computes the POSIX checksum on a range of memory (either RAM or FLASH).
The value printed can be compared with the output from the Linux program 'chksum'.</P
></DD
></DL
></DIV
>
<P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>alias name [value]</DT
><DD
><P
>The <TT
CLASS="FUNCTION"
>alias</TT
> command is used to maintain simple command
line aliases.  These aliases are shorthand for longer expressions.
When the pattern %{name} appears in a command line, including a script,
the corresponding value will be substituted.</P
><P
>Aliases are kept in RedBoot's non-volatile configuration area, i.e. Flash
memory.</P
><P
>This is an example of setting an alias.  Notice the use of a quoted string
when the value contains spaces.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>RedBoot&#62; alias SBUF "-b 0x100000"
Update RedBoot non-volatile configuration - are you sure (y/n)? y
... Unlock from 0x50f80000-0x50fc0000: .
... Erase from 0x50f80000-0x50fc0000: .
... Program from 0x0000b9e8-0x0000c9e8 at 0x50f80000: .
... Lock from 0x50f80000-0x50fc0000: .</PRE
></TD
></TR
></TABLE
></P
><P
>This example shows querying of an alias, as well as how it might be used.
<TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="90%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>RedBoot&#62; alias SBUF
'SBUF' = '-b 0x100000'
RedBoot&#62; d %{SBUF} 
0x00100000: FE03 00EA 0000 0000  0000 0000 0000 0000   |................|
0x00100010: 0000 0000 0000 0000  0000 0000 0000 0000   |................|</PRE
></TD
></TR
></TABLE
></P
></DD
></DL
></DIV
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN456"
>Download Process</A
></H2
><P
></P
><P
></P
><DIV
CLASS="VARIABLELIST"
><DL
><DT
>load</DT
><DD
><P
>The <TT
CLASS="COMPUTEROUTPUT"
>load</TT
> command is used to download
data into the target system. Data can be loaded via a network connection,
using either the TFTP protocol, or the console serial connection using the
X/Y modem protocol. Files to be downloaded may either be executable images
in SREC format or raw data. The format of the command is:  </P
><P
><P
><B
CLASS="COMMAND"
>load</B
>  {<TT
CLASS="REPLACEABLE"
><I
>file</I
></TT
>} [-v] [-d] [-b <TT
CLASS="REPLACEABLE"
><I
>location</I
></TT
>] [-r] [-m  {xmodem | ymodem | tftp}] [-h <TT
CLASS="REPLACEABLE"
><I
>host_IP_address</I
></TT
>]</P
></P
></DD
></DL
></DIV
><H2
CLASS="BRIDGEHEAD"
>Arguments</H2
><DIV
CLASS="INFORMALTABLE"
><P
></P
><TABLE
BORDER="0"
CLASS="CALSTABLE"
><TBODY
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>file</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>The name of the file on the TFTP
server. Details of how this is specified are host-specific.</TD
></TR
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>-v</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Display a small spinner (indicator)
while the download is in  progress. This is just for feedback, especially
during long loads.</TD
></TR
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>-d</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Decompress gzipped image during
download.</TD
></TR
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>-b</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Specify the location in memory
to which the file should be loaded. Executable images normally load at the
location to which the file was linked. This option allows the file to be loaded
to a specific memory location, possibly overriding any assumed location.</TD
></TR
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>-r</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Download raw data. Normally, the
load command is used to load executable images into memory. This option allows
for raw data to be loaded. If this option is given, -b will also be required.</TD
></TR
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>-m</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
><P
>The -m option is used to
select the download method. The choices are:<P
></P
><TABLE
BORDER="0"
><TBODY
><TR
><TD
><I
CLASS="EMPHASIS"
>xmodem</I
>, <I
CLASS="EMPHASIS"
>ymodem</I
> - serial
download using standard protocols over the console serial port. When using
this method, the <TT
CLASS="REPLACEABLE"
><I
>file</I
></TT
> parameter is not required.</TD
></TR
><TR
><TD
><I
CLASS="EMPHASIS"
>tftp</I
> - network based download using the TFTP
protocol.</TD
></TR
></TBODY
></TABLE
><P
></P
></P
></TD
></TR
><TR
><TD
WIDTH="72"
ALIGN="LEFT"
VALIGN="TOP"
>-h</TD
><TD
WIDTH="100%"
ALIGN="LEFT"
VALIGN="TOP"
>Used explicitly to name a host
computer to contact for the download data. This works in TFTP mode only.</TD
></TR
></TBODY
></TABLE
><P
></P
></DIV
><P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>RedBoot&#62; lo redboot.ROM -b 0x8c400000        
Address offset = 0x0c400000      
Entry point: 0x80000000, address range: 0x80000000-0x8000fe80     </PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="redboot-editing-commands.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="flash-image-system.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>RedBoot Editing Commands</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot-commands-and-examples.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Flash Image System (FIS)</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>