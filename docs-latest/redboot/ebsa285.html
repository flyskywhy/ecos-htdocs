<!-- Copyright (C) 2001 Red Hat, Inc.                                -->
<!-- This material may be distributed only subject to the terms      -->
<!-- and conditions set forth in the Open Publication License, v1.0  -->
<!-- or later (the latest version is presently available at          -->
<!-- http://www.opencontent.org/openpub/)                            -->
<!-- Distribution of substantively modified versions of this         -->
<!-- document is prohibited without the explicit permission of the   -->
<!-- copyright holder.                                               -->
<!-- Distribution of the work or derivative of the work in any       -->
<!-- standard (paper) book form is prohibited unless prior           -->
<!-- permission obtained from the copyright holder                   -->
<HTML
><HEAD
><TITLE
>Intel StrongArm EBSA 285</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="RedBoot&#8482; User's Guide"
HREF="redboot.html"><LINK
REL="UP"
TITLE="Installation and Testing"
HREF="installation-and-testing.html"><LINK
REL="PREVIOUS"
TITLE="Intel SA1100 (Brutus) "
HREF="brutus.html"><LINK
REL="NEXT"
TITLE="Intel SA1100 Multimedia Board "
HREF="sa1100mm.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>RedBoot&#8482; User's Guide: Document Version 1.5b, May 2001</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="brutus.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Installation and Testing</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="sa1100mm.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="EBSA285"
>Intel StrongArm EBSA 285</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1058"
>Overview</A
></H2
><P
>RedBoot
uses the single EBSA-285 serial port. The default serial port settings are
38400,8,N,1. If the EBSA-285 is used as a host on a PCI backplane, ethernet
is supported using an Intel PRO/100+ ethernet adapter.</P
><P
>Management of onboard flash is also supported. Two basic RedBoot configurations
are supported: <P
></P
><UL
><LI
><P
>RedBoot running from the board's flash boot sector.</P
></LI
><LI
><P
>RedBoot running from RAM with RedBoot in the flash boot sector.</P
></LI
></UL
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1073"
>Initial Installation Method</A
></H2
><P
>A linux application is used to program the flash over the PCI bus. Sources
and build instructions for this utility are located in the RedBoot sources
in: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>.../packages/hal/arm/ebsa285/current/support/linux/safl_util</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1077"
>Flash management</A
></H2
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN1079"
>Updating the primary RedBoot image</A
></H3
><P
>To update the primary RedBoot images, follow the procedures detailed
in <A
HREF="updating-redboot.html#UPDATE-PRIMARY-IMAGE"
>the section called <I
>Update the primary RedBoot flash image</I
> in Chapter 4</A
>, but the actual numbers used with
the flags in the sample commands should be:        <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-f 0x41000000
-b 0x100000
-l 0x20000</PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="SECT3"
><H3
CLASS="SECT3"
><A
NAME="AEN1084"
>Updating the secondary RedBoot image</A
></H3
><P
>To update the secondary RedBoot images, follow the procedures detailed
in <A
HREF="updating-redboot.html#DIFFERENT-VERSION-FROM-RAM"
>the section called <I
>Load and start a different version of RedBoot, running from RAM</I
> in Chapter 4</A
>, but the actual numbers used
with the flags in the sample commands should be:        <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>-f 0x41040000
-b 0x20000
-r 0x20000
-l 0x20000</PRE
></TD
></TR
></TABLE
></P
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1089"
>Communication Channels</A
></H2
><P
>Serial, Intel PRO 10/100+ 82559 PCI ethernet card.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1092"
>Special RedBoot Commands</A
></H2
><P
>None.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1095"
>Memory Maps</A
></H2
><P
>Physical and virtual mapping are mapped one to one on the EBSA-285 using
a first level page table located at address 0x4000. No second level tables
are used. <DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>NOTE: </B
>The virtual memory maps in this section use a C and B column to indicate
whether or not the region is cached (C) or buffered (B).</P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>Address Range            C B  Description 
-----------------------  - -  ---------------------------------- 
0x00000000 - 0x007fffff  Y Y  SDRAM 
0x40000000 - 0x400fffff  N N  21285 Registers 
0x41000000 - 0x413fffff  Y N  flash 
0x42000000 - 0x420fffff  N N  21285 CSR Space 
0x50000000 - 0x50ffffff  Y Y  Cache Clean 
0x78000000 - 0x78ffffff  N N  Outbound Write Flush 
0x79000000 - 0x7c0fffff  N N  PCI IACK/Config/IO 
0x80000000 - 0xffffffff  N Y  PCI Memory </PRE
></TD
></TR
></TABLE
></P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1102"
>Resource Usage</A
></H2
><P
>The flash based RedBoot image occupies flash addresses 0x41000000 -
0x4101ffff. It also reserves the first 128K bytes of RAM for runtime uses.
The RAM based RedBoot image occupies RAM addresses 0x20000 - 0x3ffff. RAM
addresses from 0x40000 to the end of RAM are available for general use such
as a temporary scratchpad for downloaded images before they are written to
flash.</P
><P
>Timer3 is used as a polled timer to provide timeout support for networking
and XModem file transfers.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1106"
>Building eCos Test Cases to run with old RedBoots</A
></H2
><P
>If using older versions of RedBoot, the default configuration for
EBSA-285 will send diagnostic output to the serial line only, not over an ethernet
connection. To allow eCos programs to use RedBoot to channel diagnostic output to
GDB whether connected by net or serial, enable the configuration option  <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>CYGSEM_HAL_VIRTUAL_VECTOR_DIAG  
"Do diagnostic IO via virtual vector table"</PRE
></TD
></TR
></TABLE
> located here
in the common HAL configuration tree: <TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="PROGRAMLISTING"
>"eCos HAL"
     "ROM monitor support"
          "Enable use of virtual vector calling interface"
              "Do diagnostic IO via virtual vector table"</PRE
></TD
></TR
></TABLE
>Other
than that, no special configuration is required to use RedBoot. </P
><P
>If you have been using built-in stubs to acquire support for thread-aware
debugging, you can still do that, but you must only use the serial device
for GDB connection and you must not enable the option mentioned above. However,
it is no longer necessary to do that to get thread-awareness; RedBoot is thread
aware.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1112"
>Rebuilding RedBoot</A
></H2
><P
>The instructions in <A
HREF="rebuilding-redboot.html"
>Chapter 3</A
> should be followed.
The values for TARGET, ARCH_DIR and PLATFORM_DIR on this platform are
&#8220;ebsa285&#8221;, &#8220;arm&#8221; and &#8220;ebsa285&#8221; respectively.
Note that the configuration export files supplied in the <TT
CLASS="COMPUTEROUTPUT"
>hal/arm/ebsa285/<TT
CLASS="REPLACEABLE"
><I
>VERSION</I
></TT
>/misc</TT
>
directory in the RedBoot source tree should be used.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="brutus.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="sa1100mm.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Intel SA1100 (Brutus)</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation-and-testing.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Intel SA1100 Multimedia Board</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>