<!-- Copyright (C) 2001 Red Hat, Inc.                                -->
<!-- This material may be distributed only subject to the terms      -->
<!-- and conditions set forth in the Open Publication License, v1.0  -->
<!-- or later (the latest version is presently available at          -->
<!-- http://www.opencontent.org/openpub/).                           -->
<!-- Distribution of substantively modified versions of this         -->
<!-- document is prohibited without the explicit permission of the   -->
<!-- copyright holder.                                               -->
<!-- Distribution of the work or derivative of the work in any       -->
<!-- standard (paper) book form is prohibited unless prior           -->
<!-- permission is obtained from the copyright holder.               -->
<HTML
><HEAD
><TITLE
>x86 Based PC</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.54"><LINK
REL="HOME"
TITLE="RedBoot&#8482; User's Guide"
HREF="redboot.html"><LINK
REL="UP"
TITLE="Installation and Testing"
HREF="installation-and-testing.html"><LINK
REL="PREVIOUS"
TITLE="Bright Star Engineering commEngine and nanoEngine"
HREF="nano.html"></HEAD
><BODY
CLASS="SECT1"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>RedBoot&#8482; User's Guide: Document Version 1.5g, June 2001</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="nano.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 5. Installation and Testing</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
>&nbsp;</TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="X86PC"
>x86 Based PC</A
></H1
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1909"
>Overview</A
></H2
><P
>RedBoot supports
two serial ports and an Intel i82559 based ethernet card (for example an Intel
EtherExpress Pro 10/100) for communication and downloads. The default serial
port settings are 38400,8,N,1. RedBoot runs from a boot floppy disk installed
in the A: drive of the PC.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1918"
>Initial Installation</A
></H2
><P
>RedBoot takes the form of a self-booting image that must be written
onto a formatted floppy disk. The process will erase any file system or data
that already exists on that disk, so proceed with caution.</P
><P
>For Red Hat Linux users, this can be done by:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>  $ <TT
CLASS="USERINPUT"
><B
>dd conv=sync if=install/bin/redboot.bin of=/dev/fd0H1440</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>For NT Cygwin users, this can be done by first ensuring that the raw
floppy device is mounted as <TT
CLASS="FILENAME"
>/dev/fd0</TT
>. To check if this
is the case, type the command <TT
CLASS="USERINPUT"
><B
>mount</B
></TT
> at the Cygwin bash
prompt. If the floppy drive is already mounted, it will be listed as something
similar to the following line:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>  \\.\a: /dev/fd0 user binmode</PRE
></TD
></TR
></TABLE
><P
>If this line is not listed, then mount the floppy drive using the command:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>  $ <TT
CLASS="USERINPUT"
><B
>mount -f -b //./a: /dev/fd0</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>To actually install the boot image on the floppy, use the command:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>  $ <TT
CLASS="USERINPUT"
><B
>dd conv=sync if=install/bin/redboot.bin of=/dev/fd0</B
></TT
></PRE
></TD
></TR
></TABLE
><P
>Insert this floppy in the A: drive of the PC to be used as a target
and ensure that the BIOS is configured to boot from A: by default. On reset,
the PC will boot from the floppy and be ready to be debugged via either serial
line, or via the ethernet interface if it is installed.</P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>NOTE: </B
>Unreliable floppy media may cause the write to silently fail. This
can be determined if the RedBoot image does not correctly
boot. In such cases, the floppy should be (unconditionally) reformatted
using the <B
CLASS="COMMAND"
>fdformat</B
> command on Linux, or
<B
CLASS="COMMAND"
>format a: /u</B
> on DOS/Windows.</P
></BLOCKQUOTE
></DIV
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1940"
>Flash management</A
></H2
><P
>PC RedBoot does not support any FLASH commands.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1943"
>Special RedBoot Commands</A
></H2
><P
>None.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1946"
>Memory Maps</A
></H2
><P
>All selectors are initialized to map the entire 32-bit address space
in the familiar protected mode flat model. Page translation is not used.
RAM up to 640K is mapped to 0x0 to 0xa0000. RAM above 640K is mapped
from address 0x100000 upwards. Space is reserved between 0xa0000 and
0x100000 for option ROMs and the BIOS.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1949"
>Resource Usage</A
></H2
><P
>RedBoot is loaded into RAM at address 0x2000 and reserves all RAM below
0xa0000 for its own use. RAM applications should load from address 0x100000
upwards.</P
></DIV
><DIV
CLASS="SECT2"
><H2
CLASS="SECT2"
><A
NAME="AEN1952"
>Rebuilding RedBoot</A
></H2
><P
>The instructions in <A
HREF="rebuilding-redboot.html"
>Chapter 3</A
> should be followed.
The values for TARGET, ARCH_DIR and PLATFORM_DIR on this platform are
&#8220;pc&#8221;, &#8220;i386&#8221; and &#8220;pc&#8221; respectively.
Note that the configuration export files supplied in the <TT
CLASS="COMPUTEROUTPUT"
>hal/i386/pc/<TT
CLASS="REPLACEABLE"
><I
>VERSION</I
></TT
>/misc</TT
>
directory in the RedBoot source tree should be used. In particular, the
<TT
CLASS="FILENAME"
>redboot_FLOPPY.ecm</TT
> file is used for building a version
of RedBoot suitable for booting off a floppy disk.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="nano.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="redboot.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>&nbsp;</TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Bright Star Engineering commEngine and nanoEngine</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="installation-and-testing.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>&nbsp;</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>