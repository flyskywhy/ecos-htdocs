<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD><!--version 1.2/Mon Mar  5 17:23:14  2001--><!--version 1.2/Mon Mar  5 17:22:12  2001-->
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="cygnus.css">
<TITLE> Installation and Testing</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Installation and Testing</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="redboot.html">Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="redboot.6.html">To&nbsp;previous&nbsp;page</A></P></TD><TD ALIGN="center"><P CLASS="Gotos"><A HREF="redboot.8.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE><P ALIGN="LEFT">&nbsp;</P><BR><BR><HR ALIGN="center"></DIV>
<H2 CLASS="ChapterTitle">
<A NAME="pgfId=2653048">
 </A>
<A NAME="14546">
 </A>
<A NAME="marker=2671900">
 </A>
Installation and Testing<DIV>
<IMG SRC="botclear.gif">
</DIV>
</H2>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688089">
 </A>
Cyclone IQ80310</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688090">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688091">
 </A>
RedBoot supports both serial ports and the built-in ethernet port for communication and downloads. The default serial port settings are 115200,8,N,1. RedBoot also supports FLASH management for the onboard 8MB FLASH. Several basic RedBoot configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2688092">
 </A>
RedBoot running from the board's FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688093">
 </A>
RedBoot running from FLASH address 0x40000, with ARM bootloader in FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688094">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688095">
 </A>
RedBoot running from RAM with ARM bootloader in FLASH boot sector.</LI>
</UL>
<P CLASS="Body">
<A NAME="pgfId=2688096">
 </A>
A special RedBoot command: <TT CLASS="Code">
diag</TT>
 is used to access a set of hardware diagnostics provided by the board manufacturer.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688097">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2688098">
 </A>
The board manufacturer provides a DOS application which is capable of programming the FLASH over the PCI bus, and this is required for initial installations of RedBoot. Please see the board manual for information on using this utility. In general, the process involves programming one of the two FLASH based RedBoot configurations to FLASH. The RedBoot which runs from the FLASH boot sector should be programmed to FLASH address 0x00000000. RedBoot that has been configured to be started by the ARM bootloader should be programmed to FLASH address 0x00004000.</P>
<P CLASS="Body">
<A NAME="pgfId=2688099">
 </A>
Four sets of prebuilt files are provided in a tarball and zip format. Each set corresponds to one of the four supported configurations and includes an ELF file (.elf), a binary image (.bin), and an S-record file (.srec).</P>
<P CLASS="Body">
<A NAME="pgfId=2688100">
 </A>
<SPAN CLASS="Bold">
For RedBoot running from the FLASH boot sector:</SPAN>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688101"> </A>
bins/cyclone-rom.bin   
bins/cyclone-rom.elf   
bins/cyclone-rom.srec</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688102">
 </A>
<SPAN CLASS="Bold">
For RedBoot running from FLASH address 0x40000:</SPAN>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688103"> </A>
bins/cyclone-roma.bin   
bins/cyclone-roma.elf   
bins/cyclone-roma.srec</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688104">
 </A>
<SPAN CLASS="Bold">
For RedBoot running from RAM with RedBoot in the FLASH boot sector:</SPAN>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688105"> </A>
bins/cyclone-ram.bin   
bins/cyclone-ram.elf   
bins/cyclone-ram.srec</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688106">
 </A>
<SPAN CLASS="Bold">
For RedBoot running from RAM with ARM bootloader in the FLASH boot sector:</SPAN>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688107"> </A>
bins/cyclone-rama.bin   
bins/cyclone-rama.elf  
bins/cyclone-rama.srec</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688108">
 </A>
Initial installations deal with the FLASH-based RedBoots. Installation and use of RAM based RedBoots is documented [elsewhere].</P>
<P CLASS="Body">
<A NAME="pgfId=2688109">
 </A>
To install RedBoot to run from the FLASH boot sector, use the manufacturer's flash utility to install the bins/cyclone-rom.bin image at address zero.</P>
<P CLASS="Body">
<A NAME="pgfId=2688110">
 </A>
To install RedBoot to run from address 0x40000 with the ARM bootloader in the FLASH boot sector, use the manufacturer's flash utility to install the bins/cyclone-roma.bin image at address 0x40000.</P>
<P CLASS="Body">
<A NAME="pgfId=2688111">
 </A>
After booting the initial installation of RedBoot, this warning may be printed:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688112"> </A>
FLASH configuration checksum error or invalid key</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688113">
 </A>
This is normal, and indicates that the FLASH must be configured for use by RedBoot. Even if the above message is not printed, it may be a good idea to reinitialize the FLASH anyway. Do this with the <TT CLASS="Code">
fis</TT>
 command:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688114"> </A>
RedBoot&gt; fis init
  About to initialize [format] FLASH image system - are you sure (y/n)? y
  *** Initialize FLASH Image System
  Warning: device contents not erased, some blocks may not be usable
  ... Unlock from 0x007e0000-0x00800000: .
  ... Erase from 0x007e0000-0x00800000: .
  ... Program from 0xa1fd0000-0xa1fd0400 at 0x007e0000: .
  ... Lock from 0x007e0000-0x00800000: .
Followed by the <TT CLASS="Code">fconfig</TT>
 command:
  RedBoot&gt; fconfig
  Run script at boot: false
  Use BOOTP for network configuration: false
  Local IP address: 0.0.0.0 192.168.1.153
  Default server IP address: 0.0.0.0 192.168.1.10
  GDB connection port: 0 1000
  Network debug at boot time: false
  Update RedBoot non-volatile configuration - are you sure (y/n)? y
  ... Unlock from 0x007c0000-0x007e0000: .
  ... Erase from 0x007c0000-0x007e0000: .
  ... Program from 0xa0013018-0xa0013418 at 0x007c0000: .
  ... Lock from 0x007c0000-0x007e0000: .
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688115">
 </A>
Using RedBoot with ARM Bootloader</H3>
<P CLASS="Body">
<A NAME="pgfId=2688116">
 </A>
RedBoot can coexist with ARM tools in FLASH on the IQ80310 board. In this configuration, the ARM bootloader will occupy the FLASH boot sector while RedBoot is located at FLASH address 0x40000. The sixteen position rotary switch is used to tell the ARM bootloader to jump to the RedBoot image located at address 0x40000. RedBoot is selected by switch position 0 or 1. Other switch positions are used by the ARM firmware and RedBoot will not be started.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688117">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688118">
 </A>
A special RedBoot command, <TT CLASS="Code">
diag</TT>
, is used to access a set of hardware diagnostics provided by the board manufacturer. To access the diagnostic menu, enter <TT CLASS="Code">
diag</TT>
 at the RedBoot prompt:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688119"> </A>
RedBoot&gt; diag
Entering Hardware Diagnostics - Disabling Data Cache!</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688120">
 </A>
IQ80310 Hardware Tests</H3>
<P CLASS="Body">
<A NAME="pgfId=2688121">
 </A>
1 - Memory Tests</P>
<P CLASS="Body">
<A NAME="pgfId=2688122">
 </A>
2 - Repeating Memory Tests</P>
<P CLASS="Body">
<A NAME="pgfId=2688123">
 </A>
3 - 16C552 DUART Serial Port Tests</P>
<P CLASS="Body">
<A NAME="pgfId=2688124">
 </A>
4 - Rotary Switch S1 Test for positions 0-3</P>
<P CLASS="Body">
<A NAME="pgfId=2688125">
 </A>
5 - seven Segment LED Tests</P>
<P CLASS="Body">
<A NAME="pgfId=2688126">
 </A>
6 - Backplane Detection Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688127">
 </A>
7 - Battery Status Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688128">
 </A>
8 - External Timer Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688129">
 </A>
9 - i82559 Ethernet Configuration</P>
<P CLASS="Body">
<A NAME="pgfId=2688130">
 </A>
10 - i82559 Ethernet Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688131">
 </A>
11 - Secondary PCI Bus Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688132">
 </A>
12 - Primary PCI Bus Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688133">
 </A>
13 - i960Rx/303 PCI Interrupt Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688134">
 </A>
14 - Internal Timer Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688135">
 </A>
15 - GPIO Test</P>
<P CLASS="Body">
<A NAME="pgfId=2688136">
 </A>
0 - quit</P>
<P CLASS="Body">
<A NAME="pgfId=2688137">
 </A>
Enter the menu item number (0 to quit): </P>
<P CLASS="Body">
<A NAME="pgfId=2688138">
 </A>
Tests for various hardware subsystems are provided, and some tests require special hardware in order to execute normally. The Ethernet Configuration item may be used to set the board ethernet address.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688139">
 </A>
Rebuilding RedBoot</H3>
<P CLASS="Body">
<A NAME="pgfId=2688140">
 </A>
The build process is nearly identical for the four supported configurations. Assuming that the provided RedBoot source tree is located in the current directory and that we want to build a RedBoot that runs from the FLASH boot sector, the build process is:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688141"> </A>
% export TOPDIR=`pwd`
% export ECOS_REPOSITORY=${TOPDIR}/src/ecos-monitors/redboot-??????-intel/packages
% mkdir ${TOPDIR}/build
% cd ${TOPDIR}/build
% ecosconfig new iq80310 redboot
% ecosconfig import ${ECOS_REPOSITORY}/hal/arm/iq80310/current/misc/redboot_ROM.cfg
% ecosconfig tree
% make
</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688142">
 </A>
If a different configuration is desired, simply use the above build process but substitute an alternate configuration file for the ecosconfig import command.</P>
<P CLASS="Body">
<A NAME="pgfId=2688143">
 </A>
For a RedBoot that runs from FLASH address 0x40000 with the ARM booloader in the FLASH boot sector, use:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688144"> </A>
% ecosconfig import ${ECOS_REPOSITORY}/hal/arm/iq80310/current/misc/redboot_ROMA.cfg</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688145">
 </A>
For a RedBoot which runs from RAM with RedBoot located in the FLASH boot sector, use:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688146"> </A>
% ecosconfig import ${ECOS_REPOSITORY}/hal/arm/iq80310/current/misc/redboot_RAM.cfg</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688147">
 </A>
For a RedBoot which runs from RAM with ARM bootloader located in the FLASH boot sector, use:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688148"> </A>
% ecosconfig import ${ECOS_REPOSITORY}/hal/arm/iq80310/current/misc/redboot_RAMA.cfg</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688149">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688150">
 </A>
The first level page table is located at 0xa0004000. Two second level tables are also used. One second level table is located at 0xa0008000 and maps the first 1MB of FLASH. The other second level table is at 0xa0008400, and maps the first 1MB of SDRAM.</P>
<H3 CLASS="Label">
<A NAME="pgfId=2688151">
 </A>
NOTE</H3>
<P CLASS="Note">
<A NAME="pgfId=2688152">
 </A>
The virtual memory maps in this section use a C and B column to indicate whether or not the region is cached (C) or buffered (B).</P>
<P CLASS="Note">
<A NAME="pgfId=2688153">
 </A>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688154"> </A>
Physical Address Range     Description
-----------------------    ----------------------------------
0x00000000 - 0x00000fff    FLASH Memory
0x00001000 - 0x00001fff    80312 Internal Registers
0x00002000 - 0x007fffff    FLASH Memory
0x00800000 - 0x7fffffff    PCI ATU Outbound Direct Window
0x80000000 - 0x83ffffff    Primary PCI 32-bit Memory
0x84000000 - 0x87ffffff    Primary PCI 64-bit Memory
0x88000000 - 0x8bffffff    Secondary PCI 32-bit Memory
0x8c000000 - 0x8fffffff    Secondary PCI 64-bit Memory
0x90000000 - 0x9000ffff    Primary PCI IO Space
0x90010000 - 0x9001ffff    Secondary PCI IO Space
0x90020000 - 0x9fffffff    Unused
0xa0000000 - 0xbfffffff    SDRAM
0xc0000000 - 0xefffffff    Unused
0xf0000000 - 0xffffffff    80200 Internal Registers

Virtual Address Range    C B  Description
-----------------------  - -  ----------------------------------
0x00000000 - 0x00000fff  Y Y  SDRAM
0x00001000 - 0x00001fff  N N  80312 Internal Registers
0x00002000 - 0x007fffff  Y N  FLASH Memory
0x00800000 - 0x7fffffff  N N  PCI ATU Outbound Direct Window
0x80000000 - 0x83ffffff  N N  Primary PCI 32-bit Memory
0x84000000 - 0x87ffffff  N N  Primary PCI 64-bit Memory
0x88000000 - 0x8bffffff  N N  Secondary PCI 32-bit Memory
0x8c000000 - 0x8fffffff  N N  Secondary PCI 64-bit Memory
0x90000000 - 0x9000ffff  N N  Primary PCI IO Space
0x90010000 - 0x9001ffff  N N  Secondary PCI IO Space
0xa0000000 - 0xa0000fff  Y N  FLASH
0xa0001000 - 0xbfffffff  Y Y  SDRAM
0xc0000000 - 0xcfffffff  Y Y  Cache Flush Region
0xf0000000 - 0xffffffff  N N  80200 Internal Registers
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688155">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2688156">
 </A>
The standalone FLASH based RedBoot image (no ARM bootloader) occupies FLASH addresses 0x00000000 - 0x0003ffff. The FLASH based RedBoot configured to be booted by the ARM bootloader occupies FLASH addresses 0x00040000 - 0x0007ffff.</P>
<P CLASS="Body">
<A NAME="pgfId=2688157">
 </A>
Both of these also reserve RAM (0xa0000000 - 0xa001ffff) for RedBoot runtime uses. Both RAM based RedBoot configurations are designed to run from RAM at addresses 0xa0020000 - 0xa003ffff. RAM addresses from 0xa0040000 to the end of RAM are available for general use, such as a temporary scratchpad for downloaded images before they are written to FLASH.</P>
<P CLASS="Body">
<A NAME="pgfId=2688158">
 </A>
The external timer is used as a polled timer to provide timeout support for networking and XModem file transfers.</P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688159">
 </A>
Intel StrongArm EBSA 285</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688160">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688161">
 </A>
RedBoot uses the single EBSA-285 serial port. The default serial port settings are 38400,8,N,1. If the EBSA-285 is used as a host on a PCI backplane, ethernet is supported using an Intel PRO/100+ ethernet adapter.</P>
<P CLASS="Body">
<A NAME="pgfId=2688162">
 </A>
Management of onboard FLASH is also supported. Two basic RedBoot configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2688163">
 </A>
RedBoot running from the board's FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688164">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688165">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2688166">
 </A>
A linux application is used to program the FLASH over the PCI bus. Sources and build instructions for this utility are located in the RedBoot sources in:</P>
<P CLASS="Body">
<A NAME="pgfId=2688167">
 </A>
.../packages/hal/arm/ebsa285/current/support/linux/safl_util</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688168">
 </A>
Communication Channels</H3>
<P CLASS="Body">
<A NAME="pgfId=2688169">
 </A>
Serial, Intel PRO 10/100+ 82559 PCI ethernet card.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688170">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688171">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688172">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688173">
 </A>
Physical and virtual mapping are mapped one to one on the EBSA-285 using a first level page table located at address 0x4000. No second level tables are used.</P>
<H3 CLASS="Label">
<A NAME="pgfId=2688174">
 </A>
NOTE</H3>
<P CLASS="Note">
<A NAME="pgfId=2688175">
 </A>
The virtual memory maps in this section use a C and B column to indicate whether or not the region is cached (C) or buffered (B).</P>
<P CLASS="Note">
<A NAME="pgfId=2688176">
 </A>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688177"> </A>
Address Range            C B  Description
-----------------------  - -  ----------------------------------
0x00000000 - 0x007fffff  Y Y  SDRAM
0x40000000 - 0x400fffff  N N  21285 Registers
0x41000000 - 0x413fffff  Y N  FLASH
0x42000000 - 0x420fffff  N N  21285 CSR Space
0x50000000 - 0x50ffffff  Y Y  Cache Clean
0x78000000 - 0x78ffffff  N N  Outbound Write Flush
0x79000000 - 0x7c0fffff  N N  PCI IACK/Config/IO
0x80000000 - 0xffffffff  N Y  PCI Memory
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688178">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2688179">
 </A>
The FLASH based RedBoot image occupies FLASH addresses 0x41000000 - 0x4101ffff. It also reserves the first 128K bytes of RAM for runtime uses. The RAM based RedBoot image occupies RAM addresses 0x20000 - 0x3ffff. RAM addresses from 0x40000 to the end end of RAM are available for general use such as a temporary scratchpad for downloaded images before they are written to FLASH.</P>
<P CLASS="Body">
<A NAME="pgfId=2688180">
 </A>
Timer3 is used as a polled timer to provide timeout support for networking and XModem file transfers.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688182">
 </A>
<A NAME="10377">
 </A>
Intel StrongARM EBSA-285<BR>
Building Test Cases to run with RedBoot</H3>
<P CLASS="Body">
<A NAME="pgfId=2688183">
 </A>
The default configuration for EBSA-285 at present always sends diagnostic output to the serial line; to use RedBoot to channel diagnostic output to GDB whether connected by net or serial, enable the configuration option</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688184"> </A>
 CYGSEM_HAL_VIRTUAL_VECTOR_DIAG 
&quot;Do diagnostic IO via virtual vector table&quot; </PRE>
<P CLASS="Body">
<A NAME="pgfId=2688185">
 </A>
located here in the common HAL configuration tree: </P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688186"> </A>
&quot;eCos HAL&quot;
    &quot;ROM monitor support&quot; 
        &quot;Enable use of virtual vector calling interface&quot; 
            &quot;Do diagnostic IO via virtual vector table&quot; </PRE>
<P CLASS="Body">
<A NAME="pgfId=2688187">
 </A>
Other than that, no special configuration is required to use RedBoot. </P>
<P CLASS="Body">
<A NAME="pgfId=2688188">
 </A>
If you have been using built-in stubs to acquire support for thread-aware debugging, you can still do that, but you must only use the serial device for GDB connection and you must not enable the option mentioned above. However, it is no longer necessary to do that to get thread-awareness; RedBoot is thread aware. </P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2689558">
 </A>
ARM7 PID</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689559">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2689560">
 </A>
RedBoot uses either of the serial ports. The default serial port settings are 38400,8,N,1.</P>
<P CLASS="Body">
<A NAME="pgfId=2689561">
 </A>
Management of onboard FLASH is also supported. Two basic RedBoot configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2689562">
 </A>
RedBoot running from the board's FLASH boot sector. </LI>
<P><P><LI>
<A NAME="pgfId=2689563">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689564">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2689565">
 </A>
Device programmer is used to program socketed FLASH parts with ROM version of RedBoot.</P>
<P CLASS="Body">
<A NAME="pgfId=2689566">
 </A>
Alternatively, to install RedBoot on a target that already has eCos GDB stubs, download the RAM version of RedBoot and run it. Initialize the flash image directory:</P>
<P CLASS="Body">
<A NAME="pgfId=2689567">
 </A>
<TT CLASS="Code">
RedBoot&gt; fi init</TT>
</P>
<P CLASS="Body">
<A NAME="pgfId=2689568">
 </A>
Then download the ROM version of RedBoot and program it into flash:</P>
<P CLASS="Body">
<A NAME="pgfId=2689569">
 </A>
<TT CLASS="Code">
RedBoot&gt; load -b 0x00040000 -m ymodem <BR>
RedBoot&gt; fi cr RedBoot -f 0x04000000 -b 0x00040000 -l 0x20000</TT>
</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689570">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Normal">
<A NAME="pgfId=2689571">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689572">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2689573">
 </A>
RedBoot sets up the following memory map on the PID board.</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2689574"> </A>
Physical Address Range Description 
----------------------- ----------- 
0x00000000 - 0x0007ffff DRAM 
0x04000000 - 0x04080000 FLASH 
0x08000000 - 0x09ffffff ASB Expansion 
0x0a000000 - 0x0bffffff APB Reference Peripheral 
0x0c000000 - 0x0fffffff NISA Serial, Parallel and PC Card ports</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689575">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2689576">
 </A>
The FLASH based RedBoot image occupies FLASH addresses 0x04000000 - 0x0401ffff. RedBoot also reserves RAM (0x00000000 - 0x00007fff) for RedBoot runtime uses.</P>
<P CLASS="Body">
<A NAME="pgfId=2689577">
 </A>
RAM based RedBoot configurations are designed to run from RAM at physical addresses 0x00008000 - 0x0003ffff. RAM physical addresses from 0x00040000 to the end of RAM are available for general use, such as a temporary scratchpad for downloaded images, before they are written to FLASH. </P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688189">
 </A>
Intel SA1100 (Brutus)</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688190">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688191">
 </A>
RedBoot supports both board serial ports on the Brutus board. The default serial port settings are 38400,8,N,1. FLASH management is not currently supported.</P>
<P CLASS="Body">
<A NAME="pgfId=2688192">
 </A>
Two basic RedBoot configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2688193">
 </A>
RedBoot running from the board's FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688194">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688195">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2688196">
 </A>
Device programmer is used to program socketed FLASH parts.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688197">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688198">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688199">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688200">
 </A>
The first level page table is located at physical address 0xc0004000. No second level tables are used.</P>
<H3 CLASS="Label">
<A NAME="pgfId=2688201">
 </A>
NOTE</H3>
<P CLASS="Note">
<A NAME="pgfId=2688202">
 </A>
The virtual memory maps in this section use a C and B column to indicate whether or not the region is cached (C) or buffered (B).</P>
<P CLASS="Body">
<A NAME="pgfId=2688203">
 </A>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688204"> </A>
Physical Address Range     Description
-----------------------    ----------------------------------
0x00000000 - 0x000fffff    Boot ROM
0x08000000 - 0x083fffff    Application FLASH
0x10000000 - 0x100fffff    SRAM
0x18000000 - 0x180fffff    Chip Select 3
0x20000000 - 0x3fffffff    PCMCIA 
0x80000000 - 0xbfffffff    SA-1100 Internal Registers
0xc0000000 - 0xc7ffffff    DRAM Bank 0
0xc8000000 - 0xcfffffff    DRAM Bank 1
0xd0000000 - 0xd7ffffff    DRAM Bank 2
0xd8000000 - 0xdfffffff    DRAM Bank 3
0xe0000000 - 0xe7ffffff    Cache Clean

Virtual Address Range    C B  Description
-----------------------  - -  ----------------------------------
0x00000000 - 0x003fffff  Y Y  DRAM Bank 0
0x00400000 - 0x007fffff  Y Y  DRAM Bank 1
0x00800000 - 0x00bfffff  Y Y  DRAM Bank 2
0x00c00000 - 0x00ffffff  Y Y  DRAM Bank 3
0x08000000 - 0x083fffff  Y Y  Application FLASH
0x10000000 - 0x100fffff  Y N  SRAM
0x20000000 - 0x3fffffff  N N  PCMCIA
0x40000000 - 0x400fffff  Y Y  Boot ROM
0x80000000 - 0xbfffffff  N N  SA-1100 Internal Registers
0xe0000000 - 0xe7ffffff  Y Y  Cache Clean
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688205">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2688206">
 </A>
The FLASH based RedBoot image occupies FLASH addresses 0x40000000 - 0x4000ffff.</P>
<P CLASS="Body">
<A NAME="pgfId=2688207">
 </A>
The RAM based RedBoot image occupies RAM addresses 0x10000 - 0x2ffff. RAM addresses from 0x30000 to the end end of RAM are available for general use such as a temporary scratchpad for downloaded images before they are written to FLASH.</P>
<P CLASS="Body">
<A NAME="pgfId=2688208">
 </A>
The SA11x0 OS timer is used as a polled timer to provide timeout support for XModem file transfers.</P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688209">
 </A>
Intel SA1100 Multimedia Board</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688210">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688211">
 </A>
RedBoot supports both board serial ports. The default serial port settings are 38400,8,N,1. FLASH management is also supported. Two basic RedBoot configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2688212">
 </A>
RedBoot running from the board's FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688213">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688214">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2688215">
 </A>
A device programmer is used to program socketed FLASH parts.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688216">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688217">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688218">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688219">
 </A>
The first level page table is located at physical address 0xc0004000. No second level tables are used.</P>
<H3 CLASS="Label">
<A NAME="pgfId=2688220">
 </A>
NOTE</H3>
<P CLASS="Note">
<A NAME="pgfId=2688221">
 </A>
The virtual memory maps in this section use a C and B column to indicate whether or not the region is cached (C) or buffered (B).</P>
<P CLASS="Body">
<A NAME="pgfId=2688222">
 </A>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688223"> </A>
Physical Address Range     Description
-----------------------    ----------------------------------
0x00000000 - 0x000fffff    Boot FLASH
0x08000000 - 0x083fffff    Application FLASH
0x10000000 - 0x107fffff    SA-1101 Board Registers
0x18000000 - 0x180fffff    Ct8020 DSP
0x18400000 - 0x184fffff    XBusReg
0x18800000 - 0x188fffff    SysRegA
0x18c00000 - 0x18cfffff    SysRegB
0x19000000 - 0x193fffff    Spare CPLD A
0x19400000 - 0x197fffff    Spare CPLD B
0x20000000 - 0x3fffffff    PCMCIA
0x80000000 - 0xbfffffff    SA1100 Internal Registers
0xc0000000 - 0xc07fffff    DRAM Bank 0
0xe0000000 - 0xe7ffffff    Cache Clean

Virtual Address Range    C B  Description
-----------------------  - -  ----------------------------------
0x00000000 - 0x007fffff  Y Y  DRAM Bank 0
0x08000000 - 0x083fffff  Y Y  Application FLASH
0x10000000 - 0x100fffff  N N  SA-1101 Registers
0x18000000 - 0x180fffff  N N  Ct8020 DSP
0x18400000 - 0x184fffff  N N  XBusReg
0x18800000 - 0x188fffff  N N  SysRegA
0x18c00000 - 0x18cfffff  N N  SysRegB
0x19000000 - 0x193fffff  N N  Spare CPLD A
0x19400000 - 0x197fffff  N N  Spare CPLD B
0x20000000 - 0x3fffffff  N N  PCMCIA
0x50000000 - 0x500fffff  Y Y  Boot FLASH
0x80000000 - 0xbfffffff  N N  SA1100 Internal Registers
0xc0000000 - 0xc07fffff  N Y  DRAM Bank 0
0xe0000000 - 0xe7ffffff  Y Y  Cache Clean
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688224">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2688225">
 </A>
The FLASH based RedBoot image occupies virtual addresses 0x50000000 - 0x5000ffff. The RAM based RedBoot image occupies virtual addresses 0x10000 - 0x2ffff. RAM addresses from 0x30000 to the end end of RAM are available for general use such as a temporary scratchpad for downloaded images before they are written to FLASH.</P>
<P CLASS="Body">
<A NAME="pgfId=2688226">
 </A>
The SA11x0 OS timer is used as a polled timer to provide timeout support for XModem file transfers.</P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688227">
 </A>
Intel SA1110 (Assabet)</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688228">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688229">
 </A>
RedBoot supports the board serial port and the compact flash ethernet port. The default serial port settings are 38400,8,N,1. RedBoot also supports FLASH management on the Assabet. Two basic RedBoot configurationsare supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2688230">
 </A>
RedBoot running from the board's FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2688231">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688232">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2688233">
 </A>
A Windows or Linux utility is used to program FLASH over parallel port driven JTAG interface. See board documentation for details on in situ FLASH programming.</P>
<P CLASS="Body">
<A NAME="pgfId=2688234">
 </A>
The FLASH parts are also socketed and may be programmed in a suitable device programmer.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688235">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688236">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688237">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688238">
 </A>
The first level page table is located at physical address 0xc0004000. No second level tables are used.</P>
<H3 CLASS="Label">
<A NAME="pgfId=2688239">
 </A>
NOTE</H3>
<P CLASS="Note">
<A NAME="pgfId=2688240">
 </A>
The virtual memory maps in this section use a C and B column to indicate whether or not the region is cached (C) or buffered (B).</P>
<P CLASS="Body">
<A NAME="pgfId=2688241">
 </A>
</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688242"> </A>
Physical Address Range     Description
-----------------------    ----------------------------------
0x00000000 - 0x07ffffff    FLASH
0x08000000 - 0x0fffffff    SA-1111 Board FLASH
0x10000000 - 0x17ffffff    Board Registers
0x18000000 - 0x1fffffff    Ethernet
0x20000000 - 0x2fffffff    SA-1111 Board PCMCIA
0x30000000 - 0x3fffffff    Compact Flash
0x40000000 - 0x47ffffff    SA-1111 Board
0x48000000 - 0x4bffffff    GFX
0x80000000 - 0xbfffffff    SA-1110 Internal Registers
0xc0000000 - 0xc7ffffff    DRAM Bank 0
0xc8000000 - 0xcfffffff    DRAM Bank 1
0xd0000000 - 0xd7ffffff    DRAM Bank 2
0xd8000000 - 0xdfffffff    DRAM Bank 3
0xe0000000 - 0xe7ffffff    Cache Clean

Virtual Address Range    C B  Description
-----------------------  - -  ----------------------------------
0x00000000 - 0x01ffffff  Y Y  DRAM Bank 0
0x08000000 - 0x0fffffff  Y Y  SA-1111 Board FLASH
0x10000000 - 0x17ffffff  N N  Board Registers
0x18000000 - 0x1fffffff  N N  Ethernet
0x20000000 - 0x2fffffff  N N  SA-1111 Board PCMCIA
0x30000000 - 0x3fffffff  N N  Compact Flash
0x40000000 - 0x47ffffff  N N  SA-1111 Board
0x48000000 - 0x4bffffff  N N  GFX
0x50000000 - 0x57ffffff  Y Y  FLASH
0x80000000 - 0xbfffffff  N N  SA-1110 Internal Registers
0xc0000000 - 0xc1ffffff  N Y  DRAM Bank 0
0xe0000000 - 0xe7ffffff  Y Y  Cache Clean
The FLASH based RedBoot image occupies virtual addresses 0x50000000 - 0x5001ffff.</PRE>
<P CLASS="Body">
<A NAME="pgfId=2688243">
 </A>
The RAM based RedBoot image occupies RAM addresses 0x20000 - 0x5ffff. RAM addresses from 0x60000 to the end end of RAM are available for general use such as a temporary scratchpad for downloaded images before they are written to FLASH.</P>
<P CLASS="Body">
<A NAME="pgfId=2688244">
 </A>
The SA11x0 OS timer is used as a polled timer to provide timeout support for network and XModem file transfers.</P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2687576">
 </A>
MIPS Atlas Board with CoreLV 4Kc and CoreLV 5Kc</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2687577">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2687578">
 </A>
RedBoot supports the debug serial port and the built in ethernet port for communication and downloads. The default serial port settings are 115200,8,N,1. RedBoot runs from and supports FLASH management for the system flash region. These configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2687579">
 </A>
RedBoot running from the system FLASH boot sector.</LI>
<P><P><LI>
<A NAME="pgfId=2687580">
 </A>
RedBoot running from RAM with RedBoot in the system FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2687581">
 </A>
 Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2687582">
 </A>
RedBoot is installed using the code download facility built into the Atlas board. See the Atlas User manual for details. Here are quick start instructions for downloading the prebuilt RedBoot image</P>
<OL>
<P><P><LI>
<A NAME="pgfId=2687583">
 </A>
Locate the prebuilt files in the bin directory: deleteall.dl and redboot.dl.</LI>
<P><P><LI>
<A NAME="pgfId=2687584">
 </A>
Make sure switch S1-1 is OFF and switch S5-1 is ON. Reset the board and verify that the LED display reads <TT CLASS="Code">
Flash DL</TT>
.</LI>
<P><P><LI>
<A NAME="pgfId=2687585">
 </A>
Make sure your parallel port is connected to the 1284 port Of the Atlas board.</LI>
<P><P><LI>
<A NAME="pgfId=2687586">
 </A>
Send the deleteall.dl file to the parallel port to erase previous images:<BR>
<TT CLASS="Code">
% cat deleteall.dl &gt;/dev/lp0</TT>
<BR>
<BR>
When this is complete, the LED display should read &quot;Deleted.&quot;</LI>
<P><P><LI>
<A NAME="pgfId=2687587">
 </A>
Send the RedBoot image to the board:<BR>
<TT CLASS="Code">
% cat redboot.dl &gt;/dev/lp0<BR>
</TT>
<BR>
When this is complete, the LED display should show the last address programmed. This will be something like: <TT CLASS="Code">
1fc17000</TT>
.</LI>
<P><P><LI>
<A NAME="pgfId=2687588">
 </A>
Change switch S5-1 to OFF and reset the board. The LED display should read &quot;RedBoot&quot;.</LI>
</OL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2687589">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2687590">
 </A>
RedBoot sets up the following memory map on the Atlas board.</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2687591"> </A>
Physical Address Range Description 
----------------------- ------------- 
0x00000000 - 0x07ffffff SDRAM 
0x08000000 - 0x17ffffff PCI Memory Space 
0x18000000 - 0x1bdfffff PCI I/O Space 
0x1be00000 - 0x1bffffff System Controller 
0x1c000000 - 0x1dffffff System FLASH 
0x1e000000 - 0x1e3fffff Monitor FLASH 
0x1f000000 - 0x1fbfffff FPGA
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2687592">
 </A>
 Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2687593">
 </A>
The FLASH based RedBoot image occupies FLASH addresses 0x1fc00000 - 0x1fc1ffff. RedBoot also reserves RAM (0x00000000 - 0x0001ffff) for RedBoot runtime uses. RAM based RedBoot configurations are designed to run from RAM at physical addresses 0x00020000 - 0x0003ffff. RAM physical addresses from 0x00040000 to the end of RAM are available for general use, such as a temporary scratchpad for downloaded images, before they are written to FLASH.</P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688272">
 </A>
QED MIPS RM700 Ocelot</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688273">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688274">
 </A>
RedBoot uses the front facing serial port. The default serial port settings are 38400,8,N,1. RedBoot also supports ethernet.</P>
<P CLASS="Body">
<A NAME="pgfId=2688275">
 </A>
Management of onboard FLASH is also supported. Two basic RedBoot configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2688276">
 </A>
RedBoot running from the board s FLASH boot sector. </LI>
<P><P><LI>
<A NAME="pgfId=2688277">
 </A>
RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688278">
 </A>
Initial Installation Method</H3>
<P CLASS="Body">
<A NAME="pgfId=2688279">
 </A>
Device programmer is used to program socketed FLASH parts.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688280">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688281">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688282">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688283">
 </A>
RedBoot sets up the following memory map on the Ocelot board.</P>
<P CLASS="Body">
<A NAME="pgfId=2688284">
 </A>
Note that these addresses are accessed through kseg0/1 and thus translate to the actual address range 0x80000000-0xbfffffff, depending on the need for caching/non-caching access to the bus.</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688285"> </A>
Physical Address Range Description </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688286"> </A>
----------------------- ----------- </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688287"> </A>
0x00000000 - 0x0fffffff SDRAM </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688288"> </A>
0x10000000 - 0x10ffffff PCI I/O space </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688289"> </A>
0x12000000 - 0x13ffffff PCI Memory space </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688290"> </A>
0x14000000 - 0x1400ffff Galileo system controller </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688291"> </A>
0x1c000000 - 0x1c0000ff PLD (board logic) </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688292"> </A>
0x1fc00000 - 0x1fc7ffff FLASH</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688293">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2688294">
 </A>
The FLASH based RedBoot image occupies FLASH addresses 0x1fc00000 - 0x1fc1ffff. RedBoot also reserves RAM (0x00000000 - 0x0001ffff) for RedBoot runtime uses.</P>
<P CLASS="Body">
<A NAME="pgfId=2688295">
 </A>
RAM based RedBoot configurations are designed to run from RAM at physical addresses 0x00020000 - 0x0003ffff. RAM physical addresses from 0x00040000 to the end of RAM are available for general use, such as a temporary scratchpad for downloaded images, before they are written to FLASH. </P>
</DIV>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=2688720">
 </A>
Motorola PowerPC MBX</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688721">
 </A>
Overview</H3>
<P CLASS="Body">
<A NAME="pgfId=2688722">
 </A>
RedBoot uses the SMC1/COM1 serial port. The default serial port settings are 38400,8,N,1. Ethernet is also supported using the 10-base T connector.</P>
<P CLASS="Body">
<A NAME="pgfId=2688725">
 </A>
Management of onboard FLASH is also supported. Two basic RedBoot </P>
<P CLASS="Body">
<A NAME="pgfId=2688726">
 </A>
configurations are supported:</P>
<UL>
<P><P><LI>
<A NAME="pgfId=2689135">
 </A>
RedBoot running from the board's FLASH boot sector. </LI>
<P><P><LI>
<A NAME="pgfId=2689136">
 </A>
o RedBoot running from RAM with RedBoot in the FLASH boot sector.</LI>
</UL>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689137">
 </A>
Initial Installation Methods</H3>
<P CLASS="Body">
<A NAME="pgfId=2688730">
 </A>
Device programmer is used to program the XU1 socketed FLASH part (AM29F040B) with the ROM version of RedBoot.</P>
<P CLASS="Body">
<A NAME="pgfId=2688733">
 </A>
Use the on-board EPPC-Bug monitor to update RedBoot. This assumes that you have EPPC-Bug in the on-board flash. This can be determined by setting up the board according to the below instructions and powering up the board. The EPPC-Bug prompt should appear on the SMC1 connector at 9600 baud, 8N1.</P>
<OL>
<P><P><LI>
<A NAME="pgfId=2688738">
 </A>
Set jumper 3 to 2-3 [allow XU1 flash to be programmed] </LI>
<P><P><LI>
<A NAME="pgfId=2688739">
 </A>
Set jumper 4 to 2-3 [boot EPPC-Bug]<BR>
<BR>
If it is available, program the flash by following these steps:<BR>
<BR>
a). Prepare EPPC-Bug for download:<BR>
<BR>
<TT CLASS="Code">
EPPC-Bug&gt;lo 0<BR>
</TT>
<BR>
At this point the monitor is ready for input. It will not return the prompt until the file has been downloaded. <BR>
<BR>
b)Use the terminal emulator's ASCII download feature (or a simple clipboard copy/paste operation) to download the redboot.ppcbug file. <BR>
<BR>
Note that on Linux, Minicom's ASCII download feature seems to be broken. A workaround is to load the file into emacs (or another editor) and copy the full contents to the clipboard. Then press the mouse paste-button (usually the middle one) over the Minicom window. </LI>
<P><P><LI>
<A NAME="pgfId=2688753">
 </A>
Program the flash with the downloaded data: <BR>
<BR>
<TT CLASS="Code">
EPPC-Bug&gt;pflash 40000 60000 fc000000 </TT>
</LI>
<P><P><LI>
<A NAME="pgfId=2688755">
 </A>
Switch off the power, and change jumper 4 to 1-2. Turn on the power again. The board should now boot using the newly programmed RedBoot.</LI>
</OL>
<P CLASS="Body">
<A NAME="pgfId=2688759">
 </A>
To install RedBoot on a target that already has eCos GDB stubs, download the RAM version of RedBoot and run it. Initialize the flash image directory:</P>
<P CLASS="Body">
<A NAME="pgfId=2688762">
 </A>
<TT CLASS="Code">
RedBoot&gt; fi init</TT>
</P>
<P CLASS="Body">
<A NAME="pgfId=2688763">
 </A>
Then download the ROM version of RedBoot and program it into flash:</P>
<P CLASS="Body">
<A NAME="pgfId=2689237">
 </A>
<TT CLASS="Code">
RedBoot&gt; load -b 0x00040000 -m ymodem<BR>
RedBoot&gt; fi cr RedBoot -f 0x04000000 -b 0x00040000 -l 0x20000</TT>
</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2689259">
 </A>
Special RedBoot Commands</H3>
<P CLASS="Body">
<A NAME="pgfId=2688768">
 </A>
None.</P>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688769">
 </A>
Memory Maps</H3>
<P CLASS="Body">
<A NAME="pgfId=2688770">
 </A>
RedBoot sets up the following memory map on the PID board:</P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2689329"> </A>
Physical Address Range Description </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688772"> </A>
----------------------- ----------- </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688773"> </A>
0x00000000 - 0x003fffff DRAM </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688774"> </A>
0xfa100000 - 0xfa100003 LEDs </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688775"> </A>
0xfe000000 - 0xfe07ffff FLASH (AMD29F040B) </PRE>
<PRE CLASS="CodeExample"><A NAME="pgfId=2688776"> </A>
0xff000000 - 0xff0fffff MPC registers</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=2688777">
 </A>
Resource Usage</H3>
<P CLASS="Body">
<A NAME="pgfId=2688778">
 </A>
The FLASH based RedBoot image occupies FLASH addresses 0xfe000000 - 0xfe01ffff. RedBoot also reserves RAM (0x00000000 - 0x0001ffff) for RedBoot runtime uses.</P>
<P CLASS="Body">
<A NAME="pgfId=2688781">
 </A>
RAM based RedBoot configurations are designed to run from RAM at physical addresses 0x00020000 - 0x0004ffff. RAM physical addresses from 0x00050000 to the end of RAM are available for general use, such as a temporary scratchpad for downloaded images, before they are written to FLASH. </P>
<PRE CLASS="CodeExample"><A NAME="pgfId=2639988"> </A>
</PRE>
<P CLASS="Index">
<A NAME="pgfId=48411">
 </A>
</P>
<H4 CLASS="IndexTitleTOC">
<A HREF="redboot.8.html#pgfId=48413" CLASS="Hypertext">
<BR>
Index</A>
</H4>
</DIV>
<HR ALIGN="center"><TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Installation and Testing</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="redboot.html">Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="redboot.6.html">To&nbsp;previous&nbsp;page</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="redboot.8.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE></BODY>
</HTML>
