<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <meta name="GENERATOR" content="Mozilla/4.6 [en] (WinNT; U) [Netscape]">
   <title>Introduction</title>
</head>
<body bgcolor="#FFFFFF">

<h1 CLASS="IntroTitle">
<a NAME="pgfId-462671"></a>Introduction
<hr></h1>

<div CLASS="BodyAfterHead"><a NAME="pgfId-462672"></a>The GNUPro&reg; Toolkit
for eCos is a complete solution for C and C++ development for the SuperH&reg;
RISC family of chips. The tools include the compiler, assembler, linker,
and interactive debugger. In addition to this manual, please read "<b>Getting
started with eCos</b>." This document consists of the following sections:</div>

<ul>
<li CLASS="Bulleted">
<a NAME="pgfId-462184"></a>Introduction</li>

<div CLASS="Bulleted"><a NAME="pgfId-918800"></a>An introduction to the
features of the GNUPro Toolkit for eCos.</div>
</ul>

<ul>
<li CLASS="Bulleted">
<a NAME="pgfId-918801"></a>Reference</li>

<div CLASS="Bulleted"><a NAME="pgfId-918805"></a>Describes the ABI and
SuperH RISC-specific attributes of the main GNUPro tools.</div>
</ul>

<ul>
<li CLASS="Bulleted">
<a NAME="pgfId-918796"></a>Bibliography</li>
</ul>

<h2 CLASS="Heading1">
<a NAME="pgfId-461269"></a>Tool naming conventions
<hr WIDTH="100%"></h2>

<div CLASS="Body"><a NAME="pgfId-462770"></a>Cross-development tools in
the Cygnus GNUPro Toolkit normally have names that reflect the target processor
and the object file format output by the tools (for example, ELF). This
makes it possible to install more than one set of tools in the same binary
directory, including both native and cross-development tools.
<br>&nbsp;</div>

<div CLASS="Body"><a NAME="pgfId-462852"></a>The complete tool name is
a three-part hyphenated string. The first part indicates the processor
family ('<font face="Courier New,Courier"><font size=-1>sh</font></font>').
The second part indicates the file format output by the tool ('<font face="Courier New,Courier"><font size=-1>elf</font></font>').
The third part is the generic tool name ('<tt>gcc</tt>'). For example,
the GCC compiler for the SuperH RISC is '<font face="Courier New,Courier"><font size=-1>sh-elf-gcc</font></font>'.
<br>&nbsp;</div>

<div CLASS="Body"><a NAME="pgfId-462887"></a>The SuperH RISC package includes
the following supported tools:</div>

<br>&nbsp;
<center><table BORDER WIDTH="46%" >
<tr>
<td>
<div CLASS="CellHeading"><a NAME="pgfId-462855"></a><b>Tool Description</b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId-462857"></a><b>Tool Name</b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-462859"></a>GCC compiler</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-462861"></a><font face="Courier New,Courier"><font size=-1>sh-elf-gcc</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-462863"></a>C++ compiler</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-462865"></a><font face="Courier New,Courier"><font size=-1>sh-elf-g++</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-462867"></a>GAS assembler</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-462869"></a><font face="Courier New,Courier"><font size=-1>sh-elf-as</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-462871"></a>GLD linker</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-462873"></a><font face="Courier New,Courier"><font size=-1>sh-elf-ld</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-462879"></a>Binary Utilities</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-462881"></a><font face="Courier New,Courier"><font size=-1>sh-elf-ar</font></font></div>
<font face="Courier New,Courier"><font size=-1>sh-elf-nm</font></font>
<br><font face="Courier New,Courier"><font size=-1>sh-elf-objcopy</font></font>
<br><font face="Courier New,Courier"><font size=-1>sh-elf-objdump</font></font>
<br><font face="Courier New,Courier"><font size=-1>sh-elf-ranlib</font></font>
<br><font face="Courier New,Courier"><font size=-1>sh-elf-size</font></font>
<br><font face="Courier New,Courier"><font size=-1>sh-elf-strings</font></font>
<br><font face="Courier New,Courier"><font size=-1>sh-elf-strip</font></font></td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-462883"></a>GDB debugger</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-462885"></a><font face="Courier New,Courier"><font size=-1>sh-elf-gdb</font></font></div>
</td>
</tr>
</table></center>


<p CLASS="Body"><a NAME="pgfId-462906"></a>The binaries for a Windows NT
hosted toolchain are installed with an '<font face="Courier New,Courier"><font size=-1>.exe</font></font>'
suffix. However, the '<font face="Courier New,Courier"><font size=-1>.exe</font></font>'
suffix does not need to be specified when running the executable.

<p CLASS="Body"><a NAME="pgfId-462904"></a>
<h2 CLASS="Heading1">
<a NAME="pgfId-462913"></a>Toolkit features
<hr WIDTH="100%"></h2>

<div CLASS="Body"><a NAME="pgfId-462914"></a>The following describes features
of the GNUPro Toolkit for the SuperH RISC.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-462915"></a>Processor version(s)</h3>

<div CLASS="Body"><a NAME="pgfId-462916"></a>SH1, SH2, SH3, SH3e, and SH4</div>

<div CLASS="Body">&nbsp;</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-916299"></a>Hosts Supported</h3>

<div CLASS="Body"><a NAME="pgfId-916303"></a></div>

<br>&nbsp;
<center><table BORDER WIDTH="55%" >
<tr>
<td>
<div CLASS="CellHeading"><a NAME="pgfId-916316"></a><b>CPU</b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId-916318"></a><b>Operating System</b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId-916320"></a><b>Vendor</b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-916328"></a>x86</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-916330"></a>Redhat 5.x, 6.0</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-916332"></a>Redhat</div>
</td>
</tr>

<tr>
<td>x86</td>

<td>Windows NT 4.0</td>

<td>Microsoft</td>
</tr>
</table></center>

<h3 CLASS="Heading2">
<a NAME="pgfId-916304"></a>Object file format</h3>

<div CLASS="Body"><a NAME="pgfId-462954"></a>The SuperH RISC tools support
the ELF object file format. Refer to Chapter 4, <b>System V Application
Binary Interface</b> (Prentice Hall, 1990.). Use '<font face="Courier New,Courier"><font size=-1>ld</font></font>'
(refer to <i>Using LD</i> in<i> </i><b>GNUPro Utilities</b> ) or '<font face="Courier New,Courier"><font size=-1>objcopy</font></font>'
(refer to <i>The GNU Binary Utilities</i> in<i> </i><b>GNUPro Utilities</b>
) to produce S-records.</div>

<h2 CLASS="Heading1">
<a NAME="pgfId-913245"></a>GNUPro on Windows NT
<hr WIDTH="100%"></h2>

<h3 CLASS="Heading2">
<a NAME="pgfId-913269"></a>Windows environment settings
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-913288"></a>The Windows NT hosted toolchain
requires the following environmental settings to function properly. Assuming
the release is installed in: <font face="Courier New,Courier"><font size=-1>C:\cygnus\gnupro\i686-cygwin32\sh-elf\<i>&lt;release></i></font></font>
<br><i><font face="Courier New,Courier"><font size=-1></font></font></i>&nbsp;</div>

<div CLASS="CodeExample"><a NAME="pgfId-913310"></a><font face="Courier New,Courier"><font size=-1>SET
PROOT=C:\cygnus\gnupro\i686-cygwin32\sh-elf\<i>&lt;release></i></font></font></div>

<div CLASS="CodeExample"><a NAME="pgfId-913311"></a><font face="Courier New,Courier"><font size=-1>SET
PATH=%PROOT%\H-i686-cygwin32\bin;%PATH%</font></font></div>

<div CLASS="CodeExample"><a NAME="pgfId-913292"></a><font face="Courier New,Courier"><font size=-1>SET
INFOPATH=%PROOT%\info</font></font></div>

<div CLASS="CodeExample"><a NAME="pgfId-913293"></a><font face="Courier New,Courier"><font size=-1>REM
Set TMPDIR to point to a ramdisk if you have one</font></font></div>

<div CLASS="CodeExample"><a NAME="pgfId-913294"></a><font face="Courier New,Courier"><font size=-1>SET
TMPDIR=C:\TEMP</font></font>
<p><b><font size=+1>Note:</font></b><font face="Courier New,Courier"><font size=-1>
The variable '<i>&lt;release></i>' indicates the release directory name
found on the CD.</font></font>
<br>&nbsp;</div>

<div CLASS="Body"><a NAME="pgfId-913299"></a>A working environment can
be established by using the following shortcut from the Windows Start menu:
<br>&nbsp;</div>

<div CLASS="Body"><a NAME="pgfId-913300"></a><font face="Arial,Helvetica">Programs->Cygnus
eCos->eCos Development Environment</font>
<br><font face="Arial,Helvetica"></font>&nbsp;</div>

<div CLASS="Body"><a NAME="pgfId-913301"></a>This will bring up a window
running "bash", and your Windows environment will be automatically set
up.
<br>&nbsp;
<h3>
<a NAME="WinNT_heading"></a>Rebuilding from source
<hr WIDTH="100%"></h3>
If you wish to rebuild the tools from the source code, see the section
"Rebuilding the GNUPro tools from source."</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-918781"></a>Case Sensitivity
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-918782"></a>The following strings are
case sensitive under Windows NT:</div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId-918783"></a>command line options</li>

<li CLASS="Bullet">
<a NAME="pgfId-918784"></a>assembler labels</li>

<li CLASS="Bullet">
<a NAME="pgfId-918785"></a>linker script commands</li>

<li CLASS="Bullet">
<a NAME="pgfId-918786"></a>section names</li>

<li CLASS="Bullet">
<a NAME="pgfId-918787"></a>file names within makefiles</li>
</ul>

<div CLASS="Body"><a NAME="pgfId-918788"></a>The following strings are
not case sensitive under Windows NT:</div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId-918789"></a>gdb commands</li>

<li CLASS="Bullet">
<a NAME="pgfId-918790"></a>assembler instructions and register names</li>
</ul>

<div CLASS="BodyAfterHead"><a NAME="pgfId-918791"></a>Case sensitivity
for Windows NT is dependent on system configuration. By default, file names
under Windows NT are not case sensitive.
<br>&nbsp;
<h2 CLASS="Heading1">
<a NAME="BIG_UNIX"></a>GNUPro on Unix
<hr WIDTH="100%"></h2>

<div CLASS="Heading1">In the following examples two variables have been
used. The variable '<i><font face="Courier New,Courier"><font size=-1>&lt;version></font></font></i>'
should be replaced with the directory name that the installer made when
the GNUPro tools were installed (or eCos was installed). For example, something
like</div>

<div CLASS="Heading1"><font face="Courier New,Courier"><font size=-1>'ecos-99r1-990828</font></font>'
or '<font face="Courier New,Courier"><font size=-1>gnupro-99r1p1</font></font>'.
The variable '<i><font face="Courier New,Courier"><font size=-1>&lt;host></font></font></i>'
should be replaced with the "host triplet" of your build system. You can
determine the host triplet by running the script '<font face="Courier New,Courier"><font size=-1>config.guess</font></font>'
at the top of the source tree. Typical examples include '<font face="Courier New,Courier"><font size=-1>i686-cygwin32</font></font>',
'<font face="Courier New,Courier"><font size=-1>i686-pc-linux-gnu</font></font>'
or '<font face="Courier New,Courier"><font size=-1>sparc-sun-solaris2.6</font></font>'.</div>

<h3 CLASS="Heading1">
<a NAME="UNIX_1"></a>eCos Developer's Kit users
<hr WIDTH="100%"></h3>

<div CLASS="Heading1">The eCos Developer's Kit is supplied with tested
prebuilt development tools for this host and target. By default, the installation
script supplied in the tools distribution will install the tools in</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>/usr/cygnus/&lt;version>/H-&lt;host>/bin.</font></font></blockquote>
</div>

<div CLASS="Heading1">If you wish to rebuild the tools from the sources,
then please see the section "Rebuilding the GNUPro tools from source".</div>

<h3 CLASS="Heading1">
<a NAME="UNIX_2"></a>Sourceware distribution users
<hr WIDTH="100%"></h3>

<div CLASS="Heading1">The GNUPro Tools for Redhat Linux are supplied in
a ZIP format file. Detailed instructions for installation can be found
on the eCos sourceware site:</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>http://sourceware.cygnus.com/ecos/</font></font></blockquote>
</div>

<div CLASS="Heading1">By following the instructions there, you should have
the sources installed in:</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>&nbsp;/usr/cygnus/&lt;version>/src</font></font></blockquote>
</div>

<div CLASS="Heading1">and the tools built in:</div>

<blockquote>
<div CLASS="Heading1"><font face="Courier New,Courier"><font size=-1>/usr/cygnus/&lt;version>/H-&lt;host>/bi</font></font>n</div>
</blockquote>

<h3 CLASS="Heading1">
<a NAME="UNIX_3"></a>Unix environment settings
<hr WIDTH="100%"></h3>

<div CLASS="Heading1">After the tools have been built (if applicable) and
installed, we recommend you have the following settings in your appropriate
shell startup script, assuming the tools were installed in '/usr/cygnus/&lt;version>'.</div>

<div CLASS="Heading1">For Bourne shell compatible shells:</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>PROOT=/usr/cygnus/&lt;version></font></font>
<br><font face="Courier New,Courier"><font size=-1>PATH=$PROOT/H-&lt;host>/bin:$PATH</font></font>
<br><font face="Courier New,Courier"><font size=-1>INFOPATH=$PROOT/info:${INFOPATH-/usr/local/info:/usr/info}</font></font>
<br><font face="Courier New,Courier"><font size=-1>MANPATH=$PROOT/man:${MANPATH-/usr/local/man:/usr/man}</font></font>
<br><font face="Courier New,Courier"><font size=-1>export PATH INFOPATH
MANPATH</font></font></blockquote>
</div>

<div CLASS="Heading1">For C-shell compatible shells:</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>setenv PROOT
/usr/cygnus/&lt;version></font></font>
<br><font face="Courier New,Courier"><font size=-1>if ( "$?MANPATH" ==
"0" ) then</font></font>
<br><font face="Courier New,Courier"><font size=-1>setenv MANPATH "/usr/local/man:/usr/man"</font></font>
<br><font face="Courier New,Courier"><font size=-1>endif</font></font>
<br><font face="Courier New,Courier"><font size=-1>if ( "$?INFOPATH" ==
"0" ) then</font></font>
<br><font face="Courier New,Courier"><font size=-1>setenv INFOPATH "/usr/local/info:/usr/info"</font></font>
<br><font face="Courier New,Courier"><font size=-1>endif</font></font>
<br><font face="Courier New,Courier"><font size=-1>setenv MANPATH $PROOT/man:$MANPATH</font></font>
<br><font face="Courier New,Courier"><font size=-1>setenv INFOPATH $PROOT/info:$INFOPATH</font></font>
<br><font face="Courier New,Courier"><font size=-1>set path = ( $PROOT/H-&lt;host>/bin
$path )</font></font></blockquote>
</div>

<h3 CLASS="Heading1">
<a NAME="UNIX_4"></a>Rebuilding from source
<hr WIDTH="100%"></h3>

<div CLASS="Heading1">If you wish to rebuild the tools from the source
code, see the next section "Rebuilding the GNUPro tools from source."</div>

<br>&nbsp;
<br>&nbsp;
<h2 CLASS="Heading1">
<a NAME="RFS"></a>Rebuilding the GNUPro tools from source
<hr WIDTH="100%"></h2>

<div CLASS="Heading1">This section outlines the steps to rebuild the GNUPro
tools from source code.</div>

<div CLASS="Heading1">In the following examples two variables have been
used. The variable '<i><font face="Courier New,Courier"><font size=-1>&lt;version></font></font></i>'
should be replaced with the directory name that the installer made when
the GNUPro tools were installed (or eCos was installed). For example, something
like</div>

<div CLASS="Heading1"><font face="Courier New,Courier"><font size=-1>'ecos-99r1-990828'</font></font>
or '<font face="Courier New,Courier"><font size=-1>gnupro-99r1p1'</font></font>.
The variable '<i><font face="Courier New,Courier"><font size=-1>&lt;host></font></font></i>'
should be replaced with the "host triplet" of your build system. You can
determine the host triplet by running the script '<font face="Courier New,Courier"><font size=-1>config.guess</font></font>'
at the top of the source tree. Typical examples include '<font face="Courier New,Courier"><font size=-1>i686-cygwin32</font></font>',
'<font face="Courier New,Courier"><font size=-1>i686-pc-linux-gnu</font></font>'
or '<font face="Courier New,Courier"><font size=-1>sparc-sun-solaris2.6</font></font>'.
<br>&nbsp;</div>

<div CLASS="Heading1">If you wish to rebuild the tools from the sources,
then assuming the sources have been installed into '<font face="Courier New,Courier"><font size=-1>/usr/cygnus/&lt;version>/src</font></font>',
the steps to take are as follows:
<br>&nbsp;</div>

<div CLASS="Heading1">
<ol>
<li>
On Windows hosts, you must start a Cygwin bash shell. Customers with the
eCos Developer's Kit can invoke a bash shell using the following shortcut:</li>
</ol>
</div>

<blockquote>
<div CLASS="Heading1"><font face="Arial,Helvetica">Start->Programs->Cygnus
eCos->eCos Development Environment</font></div>
</blockquote>

<div CLASS="Heading1">
<ol START=2>
<li>
You must have a native GNU compiler ('<font face="Courier New,Courier"><font size=-1>gcc</font></font>')
installed on your system.</li>
</ol>
</div>

<div CLASS="Heading1">
<blockquote>On Windows hosts this will be part of your Cygwin tools installation.</blockquote>
</div>

<ol>
<div CLASS="Heading1">On Unix hosts, if you have not been provided with
a native GNU compiler, you will need to build one from the sources provided.
You can do this by following these instructions but omitting the '--target'
parameter in step 4, and altering step 5 to:</div>

<ol>
<div CLASS="Heading1"><font face="Courier New,Courier"><font size=-1>make
-w all-gcc install LANGUAGES=c > make.out 2>&amp;1</font></font></div>
</ol>
</ol>

<div CLASS="Heading1"><b><font size=+1>Warning:</font></b></div>

<div CLASS="Heading1">If you have '<font face="Courier New,Courier">.</font>'&nbsp;
in your PATH environment variable, make sure that it comes after the GNU
native compiler tools directory. The following build procedure will fail
if '<font face="Courier New,Courier">.</font>' is ahead of the GNU native
compiler tools in the path.
<br>&nbsp;
<ol START=3>
<li>
Create an object directory for your builds:</li>
</ol>
</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>mkdir /tmp/build</font></font>
<br><font face="Courier New,Courier"><font size=-1>cd /tmp/build</font></font></blockquote>
</div>

<div CLASS="Heading1">
<ol START=4>
<li>
Configure the tools, saving the output to configure.out. Users of the '<font face="Courier New,Courier"><font size=-1>csh</font></font>'
and '<font face="Courier New,Courier"><font size=-1>tcsh</font></font>'
shells should replace</li>

<br>'<font face="Courier New,Courier"><font size=-1>> filename.out 2>&amp;1</font></font>'
with '<font face="Courier New,Courier"><font size=-1>>&amp; filename.out</font></font>'
throughout:</ol>
</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>/usr/cygnus/&lt;version>/src/configure
-v \</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;--prefix=INSTALLDIR
\</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;--exec-prefix=INSTALLDIR/H-&lt;host>
\</font></font>
<br><font face="Courier New,Courier"><font size=-1>&nbsp;--target=TARGET
> configure.out 2>&amp;1</font></font></blockquote>
</div>

<div CLASS="Heading1">INSTALLDIR is the installation directory into which
the tools should be installed. If the old tools were to be replaced completely,
this could be set to '<font face="Courier New,Courier"><font size=-1>/usr/cygnus/&lt;version></font></font>',
although if this is done we strongly recommend moving the old tools to
a safe place beforehand.
<br>&nbsp;</div>

<div CLASS="Heading1">TARGET is the "target triplet" you are compiling
for. This is the same as the tool name prefix given in the earlier section
"Tool naming conventions."</div>

<div CLASS="Heading1">
<ol START=5>
<li>
Build and install the tools, saving the output to make.out:</li>
</ol>
</div>

<div CLASS="Heading1">
<blockquote><font face="Courier New,Courier"><font size=-1>make -w all
install LANGUAGES="c c++" > make.out 2>&amp;1</font></font></blockquote>
</div>
</div>

<div CLASS="CodeExample">&nbsp;</div>

</body>
</html>
