<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta http-equiv="Content-Style-Type" content="text/css">
   <meta name="GENERATOR" content="Mozilla/4.6 [en] (WinNT; U) [Netscape]">
   <title>Reference</title>
</head>
<body bgcolor="#FFFFFF">

<h1 CLASS="ChapterTitle">
<a NAME="pgfId-464545"></a>Reference
<hr></h1>

<div CLASS="BodyAfterHead"><a NAME="pgfId-464546"></a>The Reference section
describes the SuperH RISC ABI and SuperH RISC-specific attributes of the
main GNUPro tools.</div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId-461757"></a>Compiler</li>

<li CLASS="Bullet">
<a NAME="pgfId-461763"></a>SuperH RISC ABI Summary</li>

<li CLASS="Bullet">
<a NAME="pgfId-461764"></a>Assembler</li>

<li CLASS="Bullet">
<a NAME="pgfId-461765"></a>Linker</li>

<li CLASS="Bullet">
<a NAME="pgfId-461766"></a>Debugger</li>

<br>&nbsp;</ul>

<h2 CLASS="Heading1">
<a NAME="pgfId-461235"></a><a NAME="_Toc442250435"></a>Compiler
<hr WIDTH="100%"></h2>

<div CLASS="Body"><a NAME="pgfId-461236"></a>This section describes SuperH
RISC-specific features of the GNUPro Compiler.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-913244"></a>SuperH RISC-specific command-line options
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-928099"></a>For a list of available generic
compiler options, refer to "GNU CC Command Options" in <b><i>Using GNU
CC in GNUPro Compiler Tools</i></b>. In addition, the following SH-specific
command-line options are supported<tt>:</tt></div>

<div CLASS="BodyHang1"><a NAME="pgfId-928100"></a><font face="Courier New,Courier"><font size=-1>-m1</font></font>
<blockquote>Generate SH1 code. (default)</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-927355"></a><font face="Courier New,Courier"><font size=-1>-m2</font></font>
<blockquote>Generate SH2 code.</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-927357"></a><font face="Courier New,Courier"><font size=-1>-m3</font></font>
<blockquote>Generate SH3 code.</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-927359"></a><font face="Courier New,Courier"><font size=-1>-m3e</font></font>
<blockquote>Generate SH3E code.</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-927361"></a><font face="Courier New,Courier"><font size=-1>-m4</font></font>
<blockquote>Generate SH4 code, with FPSCR_PR == 1 at function entry.</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-927363"></a><font face="Courier New,Courier"><font size=-1>-m4-single</font></font>
<blockquote>Generate SH4 code, with FPSCR_PR == 0 at function entry.</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-927365"></a><font face="Courier New,Courier"><font size=-1>-m4-single-only</font></font></div>

<blockquote>Generate SH3E code, but with SH4 instruction cost heuristics,
code alignment and scheduling.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927367"></a><font face="Courier New,Courier"><font size=-1>-mno-ieee</font></font></div>

<blockquote>Uses the non-IEEE conformant floating point comparisons advocated
in the SH3E Floating Point Architecture. (default)</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-930652"></a><font face="Courier New,Courier"><font size=-1>-mieee</font></font></div>

<blockquote>Adhere to IEEE arithmetic, even if it costs performance.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-930653"></a><font face="Courier New,Courier"><font size=-1>-mb</font></font></div>

<blockquote>Target is big endian. (default)</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927374"></a><font face="Courier New,Courier"><font size=-1>-ml</font></font></div>

<blockquote>Target is little endian.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927376"></a><font face="Courier New,Courier"><font size=-1>-mbigtable</font></font></div>

<blockquote>Use long jump tables (this has been modified to use short jump
tables where the optimizer detects that a short table is sufficient)</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927378"></a><font face="Courier New,Courier"><font size=-1>-mdalign</font></font></div>

<blockquote>Align doubles on 64-bit boundaries.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927380"></a><font face="Courier New,Courier"><font size=-1>-mhitachi</font></font></div>

<blockquote>Add mac registers to call used registers.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927382"></a><font face="Courier New,Courier"><font size=-1>-misize</font></font></div>

<blockquote>Dump instruction size information.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927384"></a><font face="Courier New,Courier"><font size=-1>-mpadstruct</font></font></div>

<blockquote>Obsolete; for backward compatibility only.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927386"></a><font face="Courier New,Courier"><font size=-1>-mrelax</font></font></div>

<blockquote>Generate pseudo-ops for linker relaxation, and request it from
the linker.</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-927388"></a><font face="Courier New,Courier"><font size=-1>-mspace</font></font></div>

<blockquote>Give code size consideration priority before speed.</blockquote>

<h3 CLASS="Heading2">
<a NAME="pgfId-927193"></a><a NAME="_Toc442250437"></a>Preprocessor symbols
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-928105"></a>The compiler supports the
following preprocessor symbols:</div>

<div CLASS="BodyHang1"><a NAME="pgfId-928106"></a><font face="Courier New,Courier"><font size=-1>__sh__</font></font></div>

<blockquote>Is always defined:</blockquote>

<div CLASS="BodyHang1"><a NAME="pgfId-928108"></a><font face="Courier New,Courier"><font size=-1>__LITTLE_ENDIAN__</font></font></div>

<div CLASS="BodyHang1List"><a NAME="pgfId-928109"></a><font face="Courier New,Courier"><font size=-1>__sh1__</font></font></div>

<div CLASS="BodyHang1List"><a NAME="pgfId-928334"></a><font face="Courier New,Courier"><font size=-1>__sh2__</font></font></div>

<div CLASS="BodyHang1List"><a NAME="pgfId-928335"></a><font face="Courier New,Courier"><font size=-1>__sh3__</font></font></div>

<div CLASS="BodyHang1List"><a NAME="pgfId-928336"></a><font face="Courier New,Courier"><font size=-1>__SH3E__</font></font></div>

<div CLASS="BodyHang1List"><a NAME="pgfId-930454"></a><font face="Courier New,Courier"><font size=-1>__SH4__</font></font></div>

<blockquote>Each of these preprocessor symbols is target dependant.</blockquote>

<h3 CLASS="Heading2">
<a NAME="pgfId-930458"></a>Attributes
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-461250"></a>See "Declaring Attributes
of Functions" and "Specifying Attributes of Variables" in "Extensions to
the C Language Family" in <b>Using GNU CC in GNUPro Compiler Tools</b>
for more information.</div>

<h2 CLASS="Heading1">
<a NAME="pgfId-916527"></a>New compiler and linker features
<hr WIDTH="100%"></h2>

<div CLASS="Heading1"><a NAME="pgfId-916529"></a>The GNUPro compiler and
linker have been improved by Cygnus to provide even more benefits for customers
developing for embedded targets. These features are guaranteed order of
initialization at startup, and selective linking.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-916531"></a>Initialization prioritization
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-919421"></a>In C++, you can define static
and global objects with constructors, or initialize static and global variables
from a function. This means that the constructors or functions are run
before the rest of your program starts. However, when you have these objects
spread over multiple files, the C++ standard does not specify the order
in which they are initialized, and for all practical purposes the order
is random. For an embedded system, this can be a problem, as you may want
to ensure that a static scheduler object is initialized before static threads
can attach to it, or that devices are initialized before they are used.
GNUPro
solves this problem by allowing you to define a priority when the static
or global is declared. The following example shows the syntax:</div>

<div CLASS="CodeExample">
<blockquote><a NAME="pgfId-919422"></a><font face="Courier New,Courier"><font size=-1>static
object_t myobj __attribute__((init_priority (30000) ));</font></font></blockquote>
</div>

<div CLASS="Body"><a NAME="pgfId-919430"></a>The syntax is slightly different
if the object takes any arguments to its constructor:</div>

<div CLASS="CodeExample">
<blockquote><a NAME="pgfId-919431"></a><font face="Courier New,Courier"><font size=-1>static
object_t myobj __attribute__((init_priority (30000) )) = \</font></font>
<br><font face="Courier New,Courier"><font size=-1>object_t(arg1, arg2);</font></font></blockquote>
</div>

<div CLASS="Body"><a NAME="pgfId-916536"></a>The numeric priority can be
from 1 to 65535, with 1 being the highest priority, and 65535 being the
lowest. The default priority for objects without this attribute is 65535.
Constructors with a higher priority are guaranteed execution before constructors
with lower priority.</div>

<div CLASS="Body"><a NAME="pgfId-916537"></a>In all cases, you must provide
the argument '<font face="Courier New,Courier"><font size=-1>-finit-priority</font></font>'
to the compiler on its command-line for it to recognize this attribute
when you are compiling your C++ source files.</div>

<div CLASS="Body"><a NAME="pgfId-916538"></a>If you are using eCos, be
warned that eCos uses initialization priorities internally. Ensure you
choose an appropriate priority level so that other eCos subsystems will
have initialized before you refer to them in your own constructor.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-916540"></a>Selective linking
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-916541"></a>When writing C and C++ code,
it is sometimes natural to include more than one function in a source file.
For example in C++, it is common to have all methods for a particular class
contained in the same C++ source file. However, there is a drawback that,
conventionally, if you use just one of these functions, then all the functions
defined in that file also get included in the final executable image. For
an embedded system, this can substantially and unnecessarily increase the
size of the final image stored in ROM, or loaded into RAM when debugging.</div>

<div CLASS="Body"><a NAME="pgfId-916542"></a>The GNUPro C and C++ compilers
can now optionally remove these unnecessary functions from the final image.
They also ensure that any shared global data is removed that is only referenced
by functions that are removed. This can be done by including the options
'<font face="Courier New,Courier"><font size=-1>-ffunction-sections</font></font>'
and '<font face="Courier New,Courier"><font size=-1>-fdata-sections</font></font>'
on the command-line, when you invoke the C or C++ compiler.
<p>The '<font face="Courier New,Courier"><font size=-1>-ffunction-sections</font></font>'
option removes unnecessary functions, and the '<font face="Courier New,Courier"><font size=-1>-fdata-sections</font></font>'
option removes unnecessary data.
<br>&nbsp;</div>

<div CLASS="Body"><a NAME="pgfId-916543"></a>In addition, when classes
define virtual methods in C++, it is possible to remove any unused methods
from the final image by passing the option '<font face="Courier New,Courier"><font size=-1>-fvtable-gc</font></font>'
to the C++ compiler on its command-line.</div>

<div CLASS="Body"><a NAME="pgfId-919438"></a>In all cases, you must also
supply a command-line option when linking. If invoking the linker ('<font face="Courier New,Courier"><font size=-1>ld</font></font>'<font face="Arial"><font size=-1>)</font></font>
directly, use '<font face="Courier New,Courier"><font size=-1>--gc-sections</font></font>'
on its command-line; alternatively, if you are using the preferred method
of linking your executable, using the form:
<blockquote>'<font face="Courier New,Courier"><font size=-1>gcc -o
<i>&lt;program
name> &lt;file1>.o &lt;file2></i>.o</font></font>'</blockquote>
then also pass the option '<font face="Courier New,Courier"><font size=-1>-Wl,-
-gc-sections</font></font>' on the compiler command-line, for example:
<blockquote><a NAME="pgfId-919439"></a><font face="Courier New,Courier"><font size=-1>gcc
-o prog f1.o f2.o -Wl,--gc-sections</font></font></blockquote>
</div>

<br>&nbsp;
<h2 CLASS="Heading1">
<a NAME="pgfId-461254"></a><a NAME="_Toc442250439"></a><a NAME="_Toc395075402"></a><a NAME="_Toc415038407"></a>ABI
Summary
<hr WIDTH="100%"></h2>

<div CLASS="Heading1"><a NAME="pgfId-916461"></a>This section describes
the SuperH RISC ABI, which the SuperH RISC tools adhere to by default.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-916464"></a><a NAME="_Toc442250440"></a>Data type sizes
and alignments
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-461258"></a>The following table shows
the size and alignment for all data types:</div>

<div CLASS="Body"><a NAME="pgfId-917160"></a></div>

<br>&nbsp;
<center><table BORDER >
<tr>
<td>
<div CLASS="CellHeading"><a NAME="pgfId-918007"></a><b>Type</b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId-918009"></a><b>Size (bytes)</b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId-918011"></a><b>Alignment (bytes)</b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918013"></a><font face="Courier New,Courier"><font size=-1>char</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918015"></a>1 byte</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918017"></a>1 byte</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918019"></a><font face="Courier New,Courier"><font size=-1>short</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918021"></a>2 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918023"></a>2 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918025"></a><font face="Courier New,Courier"><font size=-1>int</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918027"></a>4 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918029"></a>4 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918037"></a><font face="Courier New,Courier"><font size=-1>long</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918039"></a>4 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918041"></a>4 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918043"></a><font face="Courier New,Courier"><font size=-1>long
long</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918045"></a>8 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918047"></a>8 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918049"></a><font face="Courier New,Courier"><font size=-1>float</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918051"></a>4 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918053"></a>4 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918055"></a><font face="Courier New,Courier"><font size=-1>double</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918057"></a>8 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918059"></a>8 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-928364"></a><font face="Courier New,Courier"><font size=-1>long
double</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-928366"></a>8 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-928368"></a>8 bytes</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-918061"></a>pointer</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918063"></a>4 bytes</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-918065"></a>4 bytes</div>
</td>
</tr>
</table></center>

<h3 CLASS="Heading2">
<a NAME="pgfId-928371"></a>Alignment rules
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-928372"></a>The stack is aligned to a
four-byte boundary. One byte is used for characters (including structure/unions
made entirely of chars), two bytes for short (including structure/unions
made entirely of short / char) and four-byte alignment for everything else.</div>

<div CLASS="Body"><a NAME="pgfId-928373"></a>These values are modified
appropriately when the packed/aligned attributes are used.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-928375"></a>Calling conventions
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-928376"></a>8-bit and 16-bit integer values
are promoted to the 32-bit integer type with the same (un)signedness.</div>

<div CLASS="Body"><a NAME="pgfId-928377"></a>More details are outlined
in Argument Passing and Function Return Values.</div>

<div CLASS="Body"><a NAME="pgfId-930544"></a></div>

<br>&nbsp;
<center><table BORDER >
<tr>
<td COLSPAN="2">
<div CLASS="CellHeading"><a NAME="pgfId-930552"></a><b>Register usage:</b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930556"></a>Function returns</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930558"></a><font face="Courier New,Courier"><font size=-1>r0-r1</font></font></div>
</td>
</tr>

<tr>
<td>Scratch</td>

<td><font face="Courier New,Courier"><font size=-1>r2-r3</font></font></td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930560"></a>Function arguments</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930562"></a><font face="Courier New,Courier"><font size=-1>r4-r7</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930564"></a>Preserved across calls</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930566"></a><font face="Courier New,Courier"><font size=-1>r8-r13</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930568"></a>Frame pointer, preserved
across calls</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930570"></a><font face="Courier New,Courier"><font size=-1>r14</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930572"></a>Stack pointer, preserved
across calls</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930574"></a><font face="Courier New,Courier"><font size=-1>r15</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930576"></a>Not preserved across calls</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930578"></a><font face="Courier New,Courier"><font size=-1>fpul</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930580"></a>Floating-point function
returns</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930582"></a><font face="Courier New,Courier"><font size=-1>fr0-fr3</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930584"></a>Floating-point function
arguments</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930586"></a><font face="Courier New,Courier"><font size=-1>fr4-fr11</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-930588"></a>Preserved across calls</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-930590"></a><font face="Courier New,Courier"><font size=-1>fr12-fr15</font></font></div>
</td>
</tr>
</table></center>

<h3 CLASS="Heading2">
<a NAME="pgfId-917175"></a><a NAME="_Toc442250441"></a>Register Allocation
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-917176"></a>This is the order in which
the compiler allocates registers</div>

<div CLASS="Body"><a NAME="pgfId-917740"></a></div>

<table BORDER >
<tr>
<td COLSPAN="2">
<div CLASS="CellHeading"><a NAME="pgfId-917729"></a><b>Parameter registers:</b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-917733"></a>general-purpose</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-917735"></a><font face="Courier New,Courier"><font size=-1>r1,r2,r3,r7,r6,r5,r4,r0,r8,r9,r10,r11,r12,r13,r14</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-917737"></a>floating point</div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-928568"></a><font face="Courier New,Courier"><font size=-1>fr1,fr2,fr3,fr4,fr5,fr6,fr7,fr0,fr8,fr9,fr10,fr11,fr12,fr13,fr14,fr15</font></font></div>
</td>
</tr>
</table>


<p CLASS="Body"><a NAME="pgfId-918140"></a>
<br>&nbsp;
<h3 CLASS="Heading2">
<a NAME="pgfId-461384"></a><a NAME="_Toc395075405"></a><a NAME="_Toc415038408"></a><a NAME="_Toc442250442"></a>The
Stack Frame
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-461385"></a>This section describes SuperH
RISC stack frame:</div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId-461386"></a>The stack grows downwards from high addresses
to low addresses.</li>

<li CLASS="Bullet">
<a NAME="pgfId-461387"></a>A leaf function need not allocate a stack frame
if it does not need one.</li>

<li CLASS="Bullet">
<a NAME="pgfId-461388"></a>A frame pointer need not be allocated.</li>

<li CLASS="Bullet">
<a NAME="pgfId-461389"></a>The stack pointer shall always be aligned to
4-byte boundaries.</li>
</ul>

<div CLASS="Body"><a NAME="pgfId-461390"></a>Stack frames for functions
that take a fixed number of arguments look like this:</div>

<ol>
<div CLASS="Figure"><a NAME="pgfId-919127"></a></div>
</ol>

<h6 CLASS="Label">
<img SRC="SH_ch01-2.gif" height=315 width=347><a NAME="pgfId-919128"></a></h6>

<div CLASS="Note"><a NAME="pgfId-461394"></a><font face="Courier New,Courier"><font size=-1>*
</font></font>If
no '<font face="Courier New,Courier"><font size=-1>alloca</font></font>'
region, the frame pointer (FP) points to the same location as SP.</div>

<div CLASS="Body"><a NAME="pgfId-928670"></a>Functions that take a variable
number of arguments use a local variable to store potential unnamed arguments
passed in registers.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-928878"></a>Argument passing
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-928879"></a>The floating-point argument
passing registers are only used for floating point values. The integer
argument passing register is used for other values. If an argument fits
entirely in the remaining argument passing registers for its type, it is
passed in registers; else it is passed entirely on the stack.</div>

<div CLASS="Body"><a NAME="pgfId-928880"></a>When an argument is passed
entirely on the stack, this does not affect the registers available for
subsequent arguments - in this regard the sh4 and sh4-single targets differ
from all other SH targets so far.</div>

<div CLASS="Body"><a NAME="pgfId-928882"></a>Double precision and complex
double precision values are aligned to an even register when passed in
registers. If that requires skipping an argument passing register, that
register is not used for a subsequent argument. For little-endian targets,
the floating-point argument passing registers are used in the order '<font face="Courier New,Courier"><font size=-1>fr5</font></font>',
'<font face="Courier New,Courier"><font size=-1>fr4</font></font>', '<font face="Courier New,Courier"><font size=-1>fr7</font></font>',
'<font face="Courier New,Courier"><font size=-1>fr6</font></font>', '<font face="Courier New,Courier"><font size=-1>fr9</font></font>',
'<font face="Courier New,Courier"><font size=-1>fr8</font></font>', '<font face="Courier New,Courier"><font size=-1>fr11</font></font>',
'<font face="Courier New,Courier"><font size=-1>fr10</font></font>'; this
is necessary to get correct behaviour for varargs functions.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-928884"></a>Function Return Values
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-928941"></a>Floating-point values are
returned in registers '<font face="Courier New,Courier"><font size=-1>fr0</font></font>'
through '<font face="Courier New,Courier"><font size=-1>fr3</font></font>':
scalar single precision in '<font face="Courier New,Courier"><font size=-1>fr0</font></font>',
scalar double precision and complex single precision in '<font face="Courier New,Courier"><font size=-1>fr0</font></font>'
and '<font face="Courier New,Courier"><font size=-1>fr1</font></font>',
and complex double precision in '<font face="Courier New,Courier"><font size=-1>fr0</font></font>',
'<font face="Courier New,Courier"><font size=-1>fr1</font></font>', '<font face="Courier New,Courier"><font size=-1>fr2</font></font>'
and '<font face="Courier New,Courier"><font size=-1>fr3</font></font>'.
Integer values and small structures that fit in size and alignment in an
integer value are returned in register '<font face="Courier New,Courier"><font size=-1>r0</font></font>'
if they fit in 32 bits, else in '<font face="Courier New,Courier"><font size=-1>r0</font></font>'
and '<font face="Courier New,Courier"><font size=-1>r1</font></font>'.</div>

<h2 CLASS="Heading1">
<a NAME="pgfId-918674"></a><a NAME="_Toc415038410"></a><a NAME="_Toc442250446"></a>Assembler
<hr WIDTH="100%"></h2>

<div CLASS="Body"><a NAME="pgfId-918676"></a><a NAME="_Toc415038411"></a>This
section describes SuperH RISC-specific features of the GNUPro Assembler.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-461421"></a>SuperH RISC-specific command-line options
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-920093"></a>For a list of available generic
assembler options, refer to "Command-Line Options" in <i>Using AS</i> in
<b>GNUPro
Utilities</b>.</div>

<div CLASS="BodyHang1"><a NAME="pgfId-928988"></a><font face="Courier New,Courier"><font size=-1>-little</font></font>
<blockquote>The target is little-endian.</blockquote>
</div>

<div CLASS="BodyHang1"><a NAME="pgfId-928990"></a><font face="Courier New,Courier"><font size=-1>-relax</font></font></div>

<blockquote>Use linker relaxation.</blockquote>

<h3 CLASS="Heading2">
<a NAME="pgfId-461426"></a><a NAME="wednesday"></a><a NAME="_Toc415038412"></a><a NAME="_Toc442250448"></a>Syntax
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-930608"></a>For information about SuperH
RISC assembler, see <b>Hitachi Single-Chip RISC Microcomputers SH7700 Series
Programming Manual </b>(Hitachi Micro Systems, Inc., August 1995).</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-930616"></a><a NAME="_Ref395073228"></a><a NAME="_Ref395073286"></a><a NAME="_Ref395073825"></a><a NAME="_Toc413668801"></a><a NAME="_Toc442250449"></a><a NAME="_Toc415038413"></a><a NAME="_Toc442250450"></a>Register
names
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-920436"></a></div>

<table BORDER COLS=2 WIDTH="99%" >
<tr>
<td>
<div CLASS="CellHeading"><a NAME="pgfId-920397"></a><b>Register</b></div>
</td>

<td>
<div CLASS="CellHeading"><a NAME="pgfId-920399"></a><b>Description</b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-920401"></a><font face="Courier New,Courier"><font size=-1>r0</font></font>
through <font face="Courier New,Courier"><font size=-1>r15</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-920403"></a>General purpose</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-920405"></a><font face="Courier New,Courier"><font size=-1>fr0</font></font>
through <font face="Courier New,Courier"><font size=-1>fr15</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-920407"></a>Floating-point</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-920409"></a><font face="Courier New,Courier"><font size=-1>dr0</font></font>,
<font face="Courier New,Courier"><font size=-1>dr2</font></font>,
<font face="Courier New,Courier"><font size=-1>dr4</font></font>,
<font face="Courier New,Courier"><font size=-1>dr6</font></font>,
<font face="Courier New,Courier"><font size=-1>dr8</font></font>,
<font face="Courier New,Courier"><font size=-1>dr10</font></font>,
<font face="Courier New,Courier"><font size=-1>dr12</font></font>,
<font face="Courier New,Courier"><font size=-1>dr14</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-920411"></a>Floating-point registers
addressed as doubles</div>
</td>
</tr>

<tr>
<td>
<div CLASS="CellBody"><a NAME="pgfId-920413"></a><font face="Courier New,Courier"><font size=-1>fpul</font></font></div>
</td>

<td>
<div CLASS="CellBody"><a NAME="pgfId-920415"></a>For communication between
general purpose and floating-point registers</div>
</td>
</tr>
</table>

<h3 CLASS="Heading2">
<a NAME="pgfId-929198"></a>Floating point
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-929199"></a>Hardware floating-point is
supported for the SH3E and SH4 only.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-929200"></a>Pseudo opcodes
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-929201"></a>Opcodes are represented in
the same character set that the compiler compiling gas uses. For the toolchains
we deliver, this is ASCII.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-929202"></a>Synthetic instructions
<hr WIDTH="100%"></h3>

<div CLASS="BodyHang1"><a NAME="pgfId-929203"></a><font face="Courier New,Courier"><font size=-1>.align</font></font></div>

<blockquote>Insert as many nops (and a leading single byte if necessary)
to archive the specified alignment.</blockquote>

<h2 CLASS="Heading1">
<a NAME="pgfId-922803"></a><a NAME="_Toc442250453"></a>Linker
<hr WIDTH="100%"></h2>

<div CLASS="Body"><a NAME="pgfId-922804"></a>eCos generates linker scripts
appropriate for the exact eCos configuration you have chosen. Instructions
on how to use this linker script are provided in the manual <b>Getting
Started with eCos</b>.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-922806"></a>SuperH RISC-specific command-line options
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-461499"></a>For a list of available generic
linker options, refer to "Linker scripts" in <i>Using LD</i> in <b>GNUPro
Utilities</b>. There are no SuperH RISC-specific command-line linker options.</div>

<h2 CLASS="Heading1">
<a NAME="pgfId-930095"></a><a NAME="_Ref372526299"></a><a NAME="_Ref372526330"></a><a NAME="_Toc442250456"></a>Debugger
<hr WIDTH="100%"></h2>

<div CLASS="Body"><a NAME="pgfId-930128"></a>This section describes SH-specific
features of the GNUPro Debugger.</div>

<div CLASS="Body"><a NAME="pgfId-930133"></a>To connect to the target board
in GDB, using the command:</div>

<div CLASS="CodeExample">
<blockquote><a NAME="pgfId-930134"></a><font face="Courier New,Courier"><font size=-1>target
remote <i>&lt;devicename</i></font></font><i>></i></blockquote>
</div>

<div CLASS="Body"><a NAME="pgfId-930628"></a>where '<i><font face="Courier New,Courier"><font size=-1>&lt;devicename></font></font></i>'
will be a serial device such as '<font face="Courier New,Courier"><font size=-1>/dev/ttyS0</font></font>'
(Unix) or '<font face="Courier New,Courier"><font size=-1>com2</font></font>'
(Windows NT). Then load the code onto the target board by typing '<font face="Courier New,Courier"><font size=-1>load</font></font>'.
After being downloaded, the program can be executed.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-922901"></a>SuperH RISC-specific command-line options
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-461516"></a>For the available generic
debugger options, refer to <i>Debugging with GDB</i> in <b>GNUPro Debugging
Tools</b>. There are no SuperH RISC-specific debugger command-line options.</div>

<h3 CLASS="Heading2">
<a NAME="pgfId-922983"></a>Debugging programs with multiple threads
<hr WIDTH="100%"></h3>

<div CLASS="Body"><a NAME="pgfId-922984"></a>Programs with multiple threads
can be debugged using either the graphic user interface to GDB, GDBTk or
the GDB command line interface. The following describes how to debug multiple
threads using the GDB command line.</div>

<div CLASS="Body"><a NAME="pgfId-922985"></a>In some operating systems,
such as eCos, a single program may have more than one thread of execution.
The precise semantics of threads differ from one operating system to another,
but in general the threads of a single program are akin to multiple processes,
except that they share one address space (that is, they can all examine
and modify the same variables). On the other hand, each thread has its
own registers and execution stack, and perhaps private memory.</div>

<div CLASS="Body"><a NAME="pgfId-922986"></a>GDB provides the following
functions for debugging multi-thread programs</div>

<ul>
<li CLASS="Bullet">
<a NAME="pgfId-922987"></a>'<font face="Courier New,Courier"><font size=-1>thread
threadno</font></font>', a command to switch among threads</li>

<li CLASS="Bullet">
<a NAME="pgfId-923090"></a>'<font face="Courier New,Courier"><font size=-1>info
threads</font></font>', a command to inquire about existing threads</li>

<li CLASS="Bullet">
<a NAME="pgfId-923091"></a>'<font face="Courier New,Courier"><font size=-1>thread
apply [threadno][all] args</font></font>', a command to apply a command
to a list of threads</li>

<li CLASS="Bullet">
<a NAME="pgfId-922990"></a>thread-specific breakpoints</li>
</ul>

<div CLASS="Body"><a NAME="pgfId-922991"></a>The GDB thread-debugging facility
allows you to observe all threads while your program runs, but whenever
GDB takes control, one thread in particular is always the focus of debugging.
This thread is called the current thread. Debugging commands show program
information from the perspective of the current thread.</div>

<div CLASS="Body"><a NAME="pgfId-922992"></a>For debugging purposes, GDB
associates its own thread number, always a single integer, with each thread
in your program.</div>

<div CLASS="BodyHang1"><a NAME="pgfId-922993"></a><tt>info threads</tt></div>

<blockquote>Display a summary of all threads currently in your program.
GDB displays for each thread (in the following order):</blockquote>

<ol>
<ol>
<li CLASS="NumberedSideHead">
<a NAME="pgfId-922995"></a>The thread number assigned by GDB</li>

<li CLASS="NumberedSideHead">
<a NAME="pgfId-922996"></a>The target system's thread I.D.</li>

<li CLASS="NumberedSideHead">
<a NAME="pgfId-922997"></a>The current stack frame summary for that thread</li>
</ol>
</ol>

<div CLASS="BodyListFollow">
<blockquote><a NAME="pgfId-923150"></a>An asterisk '<b><font face="Courier New,Courier"><font size=-1>*</font></font></b>'
to the left of the GDB thread number indicates the current thread. Use
the following example for clarity.</blockquote>
</div>

<br>&nbsp;
<center><table>
<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923172"></a><font face="Courier New,Courier"><font size=-1><b>(gdb)</b>
info threads</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923174"></a><b><font face="Courier New,Courier"><font size=-1>*
2 thread 2 breakme ()</font></font></b></div>
</td>
</tr>

<tr>
<td>
<blockquote>
<div CLASS="CodeScreen2"><a NAME="pgfId-923176"></a><b><font face="Courier New,Courier"><font size=-1>at
/eCos/packages/kernel/v1_1/tests/thread_gdb.c:91</font></font></b></div>
</blockquote>
</td>
</tr>

<tr>
<td>
<blockquote>
<div CLASS="CodeScreen2"><a NAME="pgfId-923178"></a><b><font face="Courier New,Courier"><font size=-1>Name:
controller, State: running, Priority: 0, More: &lt;none></font></font></b></div>
</blockquote>
</td>
</tr>

<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923180"></a><b><font face="Courier New,Courier"><font size=-1>1
thread 1 Cyg_HardwareThread::thread_entry (thread=0x1111aaa2)</font></font></b></div>
</td>
</tr>

<tr>
<td>
<blockquote>
<div CLASS="CodeScreen2"><a NAME="pgfId-923182"></a><b><font face="Courier New,Courier"><font size=-1>at
/eCos/packages/kernel/v1_1/src/common/thread.cxx:68</font></font></b></div>
</blockquote>
</td>
</tr>

<tr>
<td>
<blockquote>
<div CLASS="CodeScreen2"><a NAME="pgfId-923184"></a><b><font face="Courier New,Courier"><font size=-1>Name:
Idle Thread, State: running, Priority: 31, More: &lt;none></font></font></b></div>
</blockquote>
</td>
</tr>
</table></center>


<p CLASS="BodyHang1"><a NAME="pgfId-923166"></a><font face="Courier New,Courier"><font size=-1>thread
<i>&lt;threadno></i></font></font>
<blockquote>Make thread number '<i><font face="Courier New,Courier"><font size=-1>&lt;threadno></font></font></i>'
the current thread. The command argument, '<i><font face="Courier New,Courier"><font size=-1>&lt;threadno></font></font></i>',
is the internal GDB thread number, as shown in the first field of the '<font face="Courier New,Courier"><font size=-1>info
threads</font></font>' display. GDB responds by displaying the system identifier
of the thread you selected, and its current stack frame summary, as in
the following output.</blockquote>

<center><table>
<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923220"></a><font face="Courier New,Courier"><font size=-1><b>(gdb)</b>
thread 2&nbsp;</font></font></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923222"></a><b><font face="Courier New,Courier"><font size=-1>[Switching
to thread 2]</font></font></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923224"></a><b><font face="Courier New,Courier"><font size=-1>#0
change_state (id=0, newstate=0 '\000')</font></font></b></div>
</td>
</tr>

<tr>
<td>
<blockquote>
<div CLASS="CodeScreen2"><a NAME="pgfId-923226"></a><b><font face="Courier New,Courier"><font size=-1>at
/eCos/kernel/current/tests/bin_sem2.cxx:93</font></font></b></div>
</blockquote>
</td>
</tr>

<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923228"></a><b><font face="Courier New,Courier"><font size=-1>93
if (PHILO_LOOPS == state_changes++)&nbsp;</font></font></b></div>
</td>
</tr>

<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923230"></a><b><font face="Courier New,Courier"><font size=-1>Current
language: auto; currently c++</font></font></b></div>
</td>
</tr>

<tr>
<td>
<h6 CLASS="CodeScreen2">
<a NAME="pgfId-923232"></a>&nbsp;</h6>
</td>
</tr>
</table></center>


<p CLASS="BodyHang1"><a NAME="pgfId-923243"></a><font face="Courier New,Courier"><font size=-1>thread
apply [<i>&lt;threadno></i>][<i>&lt;all></i>]
<i>&lt;args></i></font></font>
<blockquote>The thread apply command allows you to apply a command to one
or more threads. Specify the numbers of the threads that you want affected
with the command argument '<i><font face="Courier New,Courier"><font size=-1>&lt;threadno></font></font></i>',
where '<font face="Courier New,Courier"><font size=-1>&lt;threadno></font></font>'
is the internal GDB thread number, as shown in the first field of the '<font face="Courier New,Courier"><font size=-1>info
threads</font></font>' display. To apply a command to all threads, use
<br>'<font face="Courier New,Courier"><font size=-1>thread apply all args</font></font>'.</blockquote>

<div CLASS="Body"><a NAME="pgfId-923016"></a>Whenever GDB stops your program,
due to a breakpoint or a signal, it automatically selects the thread where
that breakpoint or signal happened.</div>

<div CLASS="Body"><a NAME="pgfId-923017"></a>When your program has multiple
threads, you can choose whether to set breakpoints on all threads, or on
a particular thread.</div>

<blockquote>
<div CLASS="CodeExample"><a NAME="pgfId-923018"></a><font face="Courier New,Courier"><font size=-1>break
<i>&lt;linespec></i>thread
<i>&lt;threadno></i></font></font></div>
</blockquote>

<div CLASS="Body"><a NAME="pgfId-923248"></a>If '<i><font face="Courier New,Courier"><font size=-1>&lt;linespec></font></font></i>'
specifies source lines, then there are several ways of writing them. Use
the qualifier '<font face="Courier New,Courier"><font size=-1>thread <i>&lt;threadno></i></font></font>'
with a breakpoint command to specify that you only want GDB to stop the
program when a particular thread reaches this breakpoint.</div>

<div CLASS="Body">'<i><font face="Courier New,Courier"><font size=-1>&lt;threadno></font></font></i>'
is one of the numeric thread identifiers assigned by GDB, shown in the
first column of the '<font face="Courier New,Courier"><font size=-1>info
threads</font></font>' display.</div>

<div CLASS="Body"><a NAME="pgfId-923020"></a>If you do not specify '<font face="Courier New,Courier"><font size=-1>thread
<i>&lt;threadno></i></font></font>'
when you set a breakpoint, the breakpoint applies to all threads of your
program.</div>

<div CLASS="Body"><a NAME="pgfId-923021"></a>You can use the thread qualifier
on conditional breakpoints as well; in this case, place '<font face="Courier New,Courier"><font size=-1>thread
<i>&lt;threadno></i></font></font>'
before the breakpoint condition, as the following example shows.</div>

<br>&nbsp;
<center><table>
<tr>
<td>
<div CLASS="CodeScreen2"><a NAME="pgfId-923262"></a><font face="Courier New,Courier"><font size=-1><b>(gdb)</b>
break frik.c:13 thread 28 if bartab > lim&nbsp;</font></font></div>
</td>
</tr>
</table></center>


<p CLASS="Body"><a NAME="pgfId-923023"></a>Whenever your program stops
under GDB for any reason, all threads of execution stop; not just the current
thread. This allows you to examine the overall state of the program, including
switching between threads, without worrying that things may change.

<p CLASS="Body"><a NAME="pgfId-923024"></a>Conversely, whenever you restart
the program, all threads start executing. This is true even when single
stepping with commands like '<font face="Courier New,Courier"><font size=-1>step</font></font>'
or '<font face="Courier New,Courier"><font size=-1>next</font></font>'.
In particular, GDB cannot single-step all threads in lockstep. Since thread
scheduling is up to your debugging target's operating system (not controlled
by GDB), other threads may execute more than one statement while the current
thread completes a single step. In general other threads stop in the middle
of a statement, rather than at a clean statement boundary, when the program
stops.

<p CLASS="Body"><a NAME="pgfId-923025"></a>You might even find your program
stopped in another thread after continuing or even single stepping. This
happens whenever some other thread runs into a breakpoint, a signal, or
an exception before the first thread completes whatever you requested.
<br>&nbsp;
<h4 CLASS="Heading3">
<a NAME="pgfId-923026"></a>SET SCHEDULER-LOCKING
<hr WIDTH="100%"></h4>

<div CLASS="Body"><a NAME="pgfId-923027"></a>For targets that support it,
GDB has a new command that helps to debug multi-threaded programs.
<br>The '<font face="Courier New,Courier"><font size=-1>set scheduler-locking
[on off step]</font></font>' command allows the GDB user to exert some
control over how threads are scheduled while debugging.</div>

<div CLASS="Body"><a NAME="pgfId-923029"></a>Normally GDB does not attempt
to interfere with thread scheduling. This means that in the default mode
('<font face="Courier New,Courier"><font size=-1>scheduler-locking off</font></font>'),
the current thread may be scheduled out, and a different thread may begin
running, at any time (as determined by the native scheduler). For instance,
you may give a GDB command such as '<font face="Courier New,Courier"><font size=-1>step</font></font>'
or '<font face="Courier New,Courier"><font size=-1>finish</font></font>',
and when the command completes, you may be looking at a different thread.</div>

<div CLASS="Body"><a NAME="pgfId-923030"></a>If you set the scheduler-locking
mode to '<font face="Courier New,Courier"><font size=-1>step</font></font>',
then GDB will try to interfere with the native scheduler just enough to
prevent another thread from popping up while you debug. Other threads may
get to run sometimes, but whenever a command such as '<font face="Courier New,Courier"><font size=-1>step</font></font>'
or '<font face="Courier New,Courier"><font size=-1>finish</font></font>'
completes, you should be looking at the same thread that was running before
the command. Of course, if another thread gets to run and hits a breakpoint,
GDB will still switch you to that thread (so if you don't want that to
happen, then disable your breakpoints).</div>

<div CLASS="Body"><a NAME="pgfId-923031"></a>For even greater (and more
intrusive) control over the thread scheduler, GDB provides the mode '<font face="Courier New,Courier"><font size=-1>scheduler-locking
on</font></font>'. In this mode, the native scheduler is completely locked,
and no thread may run except the current one. Obviously this will radically
change the behavior of your program, and may lead to deadlock or other
unpleasant consequences, so use it with caution.</div>

<h4 CLASS="Label">
<a NAME="pgfId-923032"></a>Syntax:</h4>

<div CLASS="Note"><a NAME="pgfId-923033"></a><font face="Courier New,Courier"><font size=-1>set
scheduler-locking [off on step]</font></font></div>

<div CLASS="Note">
<blockquote><a NAME="pgfId-923395"></a>Set mode for locking scheduler during
target execution.</blockquote>
</div>

<div CLASS="Note">
<blockquote><a NAME="pgfId-923396"></a><font face="Courier New,Courier"><font size=-1>off</font></font></blockquote>
</div>

<div CLASS="BodyListFollow3">
<blockquote>
<blockquote><a NAME="pgfId-923397"></a>No locking (threads may preempt
at any time).</blockquote>
</blockquote>
</div>

<div CLASS="Note">
<blockquote><a NAME="pgfId-923037"></a><font face="Courier New,Courier"><font size=-1>on</font></font></blockquote>
</div>

<div CLASS="BodyListFollow3">
<blockquote>
<blockquote><a NAME="pgfId-923335"></a>Full locking (no thread except the
current thread may run).</blockquote>
</blockquote>
</div>

<blockquote>
<div CLASS="Note"><a NAME="pgfId-923039"></a><font face="Courier New,Courier"><font size=-1>step</font></font></div>
</blockquote>

<blockquote>
<blockquote>
<div CLASS="BodyListFollow3"><a NAME="pgfId-923336"></a>The scheduler is
locked during every single-step operation. In this mode, no other thread
may run during a step command. However, other threads may run while stepping
over a function call ('<font face="Courier New,Courier"><font size=-1>next</font></font>').</div>
</blockquote>
</blockquote>

<div CLASS="BodyListFollow3"><a NAME="pgfId-922981"></a></div>

<div CLASS="Body"><a NAME="pgfId-461520"></a><a NAME="_Toc414871787"></a><a NAME="_Toc418677753"></a><a NAME="_Toc442250458"></a></div>

</body>
</html>
