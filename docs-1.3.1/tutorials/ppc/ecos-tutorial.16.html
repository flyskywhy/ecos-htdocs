<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML EXPERIMENTAL 970324//EN">
<HTML>
<HEAD>
<META NAME="GENERATOR" CONTENT="Adobe FrameMaker 5.5/HTML Export Filter">
<LINK REL="STYLESHEET" HREF="../cygnus.css">
<TITLE> Appendix 1: Real-time characterization</TITLE></HEAD>
<BODY BGCOLOR="#ffffff">
<DIV>
<TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Appendix 1: Real-time characterization</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.2.html">To Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.15.html">To&nbsp;previous&nbsp;page</A></P></TD><TD ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.17.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE><P ALIGN="LEFT">&nbsp;</P><BR><BR><HR ALIGN="center"></DIV>
<H2 CLASS="ChapterTitle">
<A NAME="pgfId=1100125">
 </A>
Appendix 1: Real-time characterization<DIV>
<IMG SRC="../botclear.gif">
</DIV>
</H2>
<P CLASS="Body">
<A NAME="pgfId=1092403">
 </A>
For a discussion of real-time performance measurement for eCos, see the <EM CLASS="Emphasis">
eCos</EM>
 <EM CLASS="Emphasis">
Users' Guide</EM>
.</P>
<DIV>
<H3 CLASS="Heading1">
<A NAME="pgfId=1092405">
 </A>
<A NAME="marker=1092404">
 </A>
Sample numbers:</H3>
<P CLASS="Body">
<A NAME="pgfId=1098129">
 </A>
</P>
<P CLASS="Body">
<A NAME="pgfId=1098162">
 </A>
</P>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1100396"> </A>
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=1100397">
 </A>
Board: Cogent CMA MPC860 (PowerPC) Evaluation Board</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1100398"> </A>
CPU  : MPC860, revision A3 33MHz</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1100399"> </A>

eCOS Kernel Timings
Note: all times are in microseconds (.000001) unless otherwise stated

Reading the hardware clock takes 0 'ticks' overhead
... this value will be factored out of all other measurements
Clock interrupt took   14.46 microseconds (30 raw clock ticks)

Testing parameters:
   Clock samples:          32
   Threads:                24
   Thread switches:       128
   Mutexes:                32
   Mailboxes:              32
   Semaphores:             32
   Scheduler operations:  128
   Counters:               32
   Alarms:                 32





                                 Confidence
     Ave     Min     Max     Var  Ave  Min  Function
  ======  ======  ======  ====== ========== ========
   26.78   23.52   41.76    1.97   66%  37% Create thread
    4.00    3.84    4.80    0.23   70%  70% Yield thread [all suspended]
    3.78    3.36    7.68    0.38   50%  45% Suspend [suspended] thread
    3.56    3.36    7.68    0.37   95%  91% Resume thread
    5.28    4.32   12.96    0.76   83%  66% Set priority
    0.84    0.48    3.84    0.39   91%  54% Get priority
   11.76   10.08   32.16    1.70   95%  95% Kill [suspended] thread
    4.14    3.84    8.64    0.45   95%  75% Yield [no other] thread
    7.14    5.76   17.76    1.07   79%  70% Resume [suspended low prio] thread
    3.60    3.36    8.16    0.42   95%  87% Resume [runnable low prio] thread
    6.10    5.28   14.88    0.80   62%  70% Suspend [runnable] thread
    4.00    3.84    5.76    0.25   79%  79% Yield [only low prio] thread
    3.66    3.36    8.64    0.47   95%  79% Suspend [runnable-&gt;not runnable]
   11.66   10.08   30.24    1.58   79%  91% Kill [runnable] thread
   31.12   27.84   53.28    2.35   87%  50% Resume [high priority] thread
    7.52    7.20   15.84    0.30   50%  48% Thread switch

    1.00    0.48    2.88    0.21   63%  14% Scheduler lock
    2.57    2.40    3.84    0.23   65%  65% Scheduler unlock [0 threads]
    2.58    2.40    4.32    0.23   64%  64% Scheduler unlock [1 suspended]
    2.59    2.40    4.32    0.24   62%  62% Scheduler unlock [many suspended]
    2.59    2.40    4.32    0.24   61%  61% Scheduler unlock [many low prio]

    1.69    1.44    5.76    0.37   96%  71% Init mutex
    4.15    3.84   10.56    0.47   96%  75% Lock [unlocked] mutex
    5.82    5.28   10.56    0.38   62%  28% Unlock [locked] mutex
    3.70    3.36    8.64    0.41   96%  59% Trylock [unlocked] mutex
    3.42    2.88    6.72    0.26   75%  15% Trylock [locked] mutex
    0.36    0.00    1.92    0.25   62%  34% Destroy mutex
   43.41   42.72   45.12    0.34   81%   3% Unlock/Lock mutex

    3.27    2.88    8.16    0.39   96%  50% Create mbox
    0.57    0.00    2.40    0.34   50%  21% Peek [empty] mbox
    6.16    5.76   11.04    0.48   87%  87% Put [first] mbox
    0.48    0.00    1.92    0.27   50%  28% Peek [1 msg] mbox
    5.92    5.28   10.56    0.35   90%   6% Put [second] mbox
    0.60    0.00    2.40    0.30   62%  12% Peek [2 msgs] mbox
    4.69    4.32   12.00    0.54   93%  93% Get [first] mbox
    4.68    4.32   11.52    0.52   93%  93% Get [second] mbox
    5.86    5.28   11.04    0.47   62%  31% Tryput [first] mbox
    4.00    3.36    9.12    0.38   87%   9% Peek item [non-empty] mbox
    4.59    3.84   12.48    0.61   71%  75% Tryget [non-empty] mbox
    3.75    3.36    7.68    0.34   53%  43% Peek item [empty] mbox
    3.93    3.36    9.60    0.45   65%  31% Tryget [empty] mbox
    0.63    0.00    2.40    0.28   68%   6% Waiting to get mbox
    0.54    0.00    1.92    0.19   75%   9% Waiting to put mbox
    4.84    4.32   12.00    0.47   56%  40% Delete mbox
   24.18   23.52   29.76    0.66   81%  75% Put/Get mbox

    1.72    0.96    3.84    0.33   90%   6% Init semaphore
    3.15    2.88    6.24    0.34   96%  62% Post [0] semaphore
    3.85    3.36    8.64    0.30   68%  28% Wait [1] semaphore
    3.24    2.88    6.24    0.34   46%  46% Trywait [0] semaphore
    3.22    2.88    6.24    0.32   50%  46% Trywait [1] semaphore
    0.96    0.48    2.88    0.12   84%  12% Peek semaphore
    0.99    0.96    1.92    0.06   96%  96% Destroy semaphore
   24.71   24.00   28.80    0.40   87%   6% Post/Wait semaphore

    2.31    1.44    6.24    0.77   46%  56% Create counter
    0.45    0.00    0.96    0.08   87%   9% Get counter value
    0.42    0.00    0.96    0.16   75%  18% Set counter value
    4.14    3.84    4.80    0.26   50%  43% Tick counter
    0.91    0.48    2.40    0.19   71%  21% Delete counter

    5.23    4.32    7.68    0.61   65%  53% Create alarm
    5.58    4.80   12.96    0.72   68%  84% Initialize alarm
    0.75    0.48    1.92    0.30   90%  56% Disable alarm
    8.02    7.20   14.40    0.53   84%  68% Enable alarm
    1.32    0.96    3.84    0.29   56%  40% Delete alarm
    4.63    4.32    6.24    0.28   53%  43% Tick counter [1 alarm]
   23.67   23.52   25.44    0.23   78%  78% Tick counter [many alarms]
    7.24    6.72   10.56    0.21   84%  12% Tick &amp; fire counter [1 alarm]
  106.83  106.56  110.40    0.35   96%  65% Tick &amp; fire counters [&gt;1 together]
   26.18   25.44   29.76    0.46   81%   9% Tick &amp; fire counters [&gt;1 separately]
   10.79   10.08   29.28    0.66   53%  55% Alarm latency [0 threads]
   17.20   13.92   35.52    1.48   67%  21% Alarm latency [2 threads]
   29.69   22.56   47.04    3.58   57%  17% Alarm latency [many threads]

    7.66    3.84   19.20    0.00            Clock/interrupt latency

Timing complete - 23530 ms total

PASS:&lt;Basic timing OK&gt;
EXIT:&lt;done&gt;

</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1100402"> </A>
</PRE>
<H3 CLASS="Heading2">
<A NAME="pgfId=1100403">
 </A>
Board: Motorola MBX</H3>
<H3 CLASS="Heading2">
<A NAME="pgfId=1100404">
 </A>
CPU  : Motorola MPC860 66MHZ</H3>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1098585"> </A>

Startup, main stack             : stack used   643 size  5664
Startup              :  Interrupt stack used   427 size  4096
Startup              : Idlethread stack used   236 size  2048

eCos Kernel Timings
Notes: all times are in microseconds (.000001) unless otherwise stated

Reading the hardware clock takes 0 &#153ticks' overhead
... this value will be factored out of all other measurements
Clock interrupt took   25.36 microseconds (79 raw clock ticks)

Testing parameters:
   Clock samples:          32
   Threads:                16
   Thread switches:       128
   Mutexes:                32
   Mailboxes:              32
   Semaphores:             32
   Scheduler operations:  128
   Counters:               32
   Alarms:                 32


                                 Confidence
     Ave     Min     Max     Var  Ave  Min  Function
  ======  ======  ======  ====== ========== ========
   27.58   25.60   44.16    2.07   93%  93% Create thread
    5.94    5.76    7.04    0.22   93%  62% Yield thread [all suspended]
    6.06    5.44   10.56    0.57   75%  75% Suspend [suspended] thread
    5.42    4.80    9.60    0.53   87%  81% Resume thread
    7.10    6.40   14.08    0.90   93%  87% Set priority
    0.86    0.64    1.92    0.22   93%  50% Get priority
   16.74   15.04   36.48    2.47   93%  93% Kill [suspended] thread
    6.14    5.76   10.56    0.55   93%  93% Yield [no other] thread
    9.74    8.96   18.56    1.10   93%  93% Resume [suspended low prio] thread
    5.28    4.80    9.28    0.54   93%  81% Resume [runnable low prio] thread
    9.40    8.32   18.56    1.14   93%  93% Suspend [runnable] thread
    6.04    5.76    8.96    0.38   93%  93% Yield [only low prio] thread
    5.68    5.12    9.60    0.52   68%  75% Suspend [runnable-&gt;not runnable]
   16.10   14.40   35.20    2.39   93%  93% Kill [runnable] thread
    8.54    7.68   16.00    0.94   93%  87% Destroy [dead] thread
   20.20   18.56   40.64    2.55   93%  93% Destroy [runnable] thread
   39.02   36.48   57.28    3.28   87%  87% Resume [high priority] thread
   13.13   12.80   22.08    0.15   78%  20% Thread switch

    0.59    0.32    1.60    0.09   82%  16% Scheduler lock
    3.67    3.52    5.12    0.17   99%  54% Scheduler unlock [0 threads]
    3.67    3.52    4.80    0.17   99%  53% Scheduler unlock [1 suspended]
    3.67    3.52    4.80    0.17   54%  54% Scheduler unlock [many suspended]
    3.69    3.52    5.12    0.17   99%  50% Scheduler unlock [many low prio]

    2.41    2.24    5.44    0.25   96%  75% Init mutex
    6.83    6.40   11.84    0.34   75%  90% Lock [unlocked] mutex
    6.74    6.40   13.12    0.40   96%  96% Unlock [locked] mutex
    5.53    5.12    9.60    0.25   84%  12% Trylock [unlocked] mutex
    4.84    4.48    7.36    0.17   78%  15% Trylock [locked] mutex
    0.34    0.00    0.96    0.06   90%   3% Destroy mutex
   56.10   55.68   59.52    0.21   93%   3% Unlock/Lock mutex

    4.72    4.48   10.24    0.37   96%  96% Create mbox
    0.75    0.64    1.92    0.16   75%  75% Peek [empty] mbox
    6.79    6.40   12.80    0.41   96%  90% Put [first] mbox
    0.46    0.32    1.60    0.19   93%  68% Peek [1 msg] mbox
    6.68    6.40   12.16    0.37   96%  96% Put [second] mbox
    0.50    0.32    1.60    0.20   93%  56% Peek [2 msgs] mbox
    7.13    6.40   14.08    0.49   90%  46% Get [first] mbox
    6.97    6.40   13.44    0.47   84%  78% Get [second] mbox
    6.24    5.76   11.52    0.38   78%  81% Tryput [first] mbox
    5.98    5.44   11.20    0.39   78%  62% Peek item [non-empty] mbox
    6.52    6.08   13.12    0.49   93%  81% Tryget [non-empty] mbox
    5.50    5.12   10.24    0.30   68%  28% Peek item [empty] mbox
    5.76    5.44   10.88    0.32   96%  96% Tryget [empty] mbox
    0.50    0.32    1.60    0.19   96%  53% Waiting to get mbox
    0.50    0.32    1.60    0.19   96%  53% Waiting to put mbox
    7.45    7.04   15.04    0.49   96%  93% Delete mbox
   37.47   36.80   48.64    0.70   96%  96% Put/Get mbox

    2.49    2.24    6.08    0.28   96%  56% Init semaphore
    5.09    4.80    8.64    0.27   46%  46% Post [0] semaphore
    6.25    5.76   10.88    0.32   93%   3% Wait [1] semaphore
    4.84    4.48    8.32    0.23   68%  25% Trywait [0] semaphore
    4.98    4.80    8.00    0.26   96%  71% Trywait [1] semaphore
    1.66    1.28    3.84    0.20   68%  15% Peek semaphore
    1.24    0.96    3.20    0.17   65%  31% Destroy semaphore
   40.74   40.32   49.28    0.53   96%  96% Post/Wait semaphore

    2.65    2.24    6.08    0.23   84%   9% Create counter
    0.85    0.64    2.24    0.22   90%  53% Get counter value
    0.68    0.64    1.92    0.08   96%  96% Set counter value
    7.13    6.72    8.64    0.24   78%  18% Tick counter
    1.30    0.96    3.20    0.12   84%  12% Delete counter

    3.69    3.52    7.68    0.29   96%  84% Create alarm
    8.98    8.32   17.60    0.61   68%  62% Initialize alarm
    0.96    0.64    2.88    0.14   71%  21% Disable alarm
    8.76    8.32   17.60    0.59   96%  87% Enable alarm
    1.99    1.60    5.12    0.21   81%  12% Delete alarm
    7.44    7.36    9.92    0.15   96%  96% Tick counter [1 alarm]
   21.68   21.44   24.64    0.25   96%  53% Tick counter [many alarms]
   10.95   10.56   15.04    0.26   78%  18% Tick &amp; fire counter [1 alarm]
  132.79  132.48  136.32    0.23   59%  37% Tick &amp; fire counters [&gt;1 together]
   25.18   24.96   28.80    0.29   96%  65% Tick &amp; fire counters [&gt;1 separately]
   23.06   22.72   47.36    0.40   98%  98% Alarm latency [0 threads]
   31.53   27.20   56.00    0.63   96%   0% Alarm latency [2 threads]
   36.86   30.40   58.88    4.15   50%  28% Alarm latency [many threads]

   11.41    8.96   16.32    0.00            Clock/interrupt latency

  609     603     651  (main stack:  1059)  Thread stack used (1704 total)
All done, main stack            : stack used  1059 size  5664
All done             :  Interrupt stack used   251 size  4096
All done             : Idlethread stack used   587 size  2048

Timing complete - 23690 ms total

PASS:&lt;Basic timing OK&gt;
EXIT:&lt;done&gt;

</PRE>
<PRE CLASS="CodeExampleWide"><A NAME="pgfId=1092400"> </A>
</PRE>
</DIV>
<HR ALIGN="center"><TABLE STYLE="ECOS" WIDTH="98%" BORDER="0" ALIGN="LEFT" CELLPADDING="1"><TR><TH COLSPAN="3" ALIGN="center"><P CLASS="Gotos">Appendix 1: Real-time characterization</P></TH></TR><TR><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.2.html">To Contents</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.15.html">To&nbsp;previous&nbsp;page</A></P></TD><TD  ALIGN="center"><P CLASS="Gotos"><A HREF="ecos-tutorial.17.html">To&nbsp;next&nbsp;page</A></P></TD></TR></TABLE></BODY>
</HTML>
