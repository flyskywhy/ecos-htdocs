<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Reference for <B
CLASS="COMMAND"
>pkgconf.tcl</B
></TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.13"><LINK
REL="HOME"
TITLE="eCos User Guides"
HREF="user-guides.html"><LINK
REL="UP"
TITLE="Configuration and the Package Repository"
HREF="part-ii.html"><LINK
REL="PREVIOUS"
TITLE="Using pkgconf.tcl"
HREF="using-pkgconf-tcl.html"><LINK
REL="NEXT"
TITLE="Managing the package repository"
HREF="managing-the-package-repository.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>eCos User Guides</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="using-pkgconf-tcl.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="managing-the-package-repository.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="REFERENCE-FOR-PKGCONF-TCL"
>Chapter 5. Reference for <B
CLASS="COMMAND"
>pkgconf.tcl</B
></A
></H1
><P
>	<B
CLASS="COMMAND"
>pkgconf.tcl</B
> is the script that should be
	used to create a build-tree. Given this build-tree it is then
	possible to build the system and its testcases, and to change
	fine-grained configuration options.
	<B
CLASS="COMMAND"
>pkgconf.tcl</B
> itself deals with a number of
	coarse-grained configuration options such as the target
	platform and the packages that should be used.
      </P
><P
>	<B
CLASS="COMMAND"
>pkgconf.tcl</B
> is implemented in the scripting
	language Tcl/Tk, and therefore it must be run from inside a
	suitable Tcl interpreter. Such an interpreter is supplied with
	this release as part of the GNUPro software. The command used
	to invoke <B
CLASS="COMMAND"
>pkgconf.tcl</B
> is as follows:
      </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl <TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
></B
></TT
></P
><P
>	Usually the <B
CLASS="COMMAND"
>pkgconf.tcl</B
> script will be run
	inside the build tree itself. If you are creating a new
	build-tree then typically you will create a new empty
	directory using the mkdir command, cd into that directory, and
	then invoke <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. Once a build-tree exists it is
	possible to run <B
CLASS="COMMAND"
>pkgconf.tcl</B
> again inside the same build-tree
	and change some of the coarse grained configuration options,
	for example it is possible to switch between a simulator and
	an evaluation board.
      </P
><P
>	The available command line arguments are as follows:
      </P
><P
></P
><DL
><DT
><SPAN
CLASS="OPTION"
>--help</SPAN
></DT
><DD
><P
>	      Provide basic online help for the available options</P
></DD
><DT
><SPAN
CLASS="OPTION"
>--target=&#60;arch&#62;</SPAN
></DT
><DD
><P
>	      Select a specific architecture. The architectures
	      available will depend on the exact release of <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> that
	      you are using, and is defined in the file
	      /Cygnus eCos/packages/targets. If your release only
	      supports a single architecture then this argument is
	      optional since <B
CLASS="COMMAND"
>pkgconf.tcl</B
> will default to that
	      architecture.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--targets</SPAN
></DT
><DD
><P
>	      This can be used to get a list of the supported
	      architectures and the platforms available for each
	      platform.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--platform=&#60;platform&#62;</SPAN
></DT
><DD
><P
>	      Select a specific platform for the current architecture,
	      for example "sim". The default platform for a given
	      architecture is the first one listed in the targets
	      file. The option --targets can be used to list the
	      available architectures and platforms.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--startup=&#60;value&#62;</SPAN
></DT
><DD
><P
>	      For some platforms it is possible to start up <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> in a
	      number of ways. For a ROM startup the application linked
	      with <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> will typically be blown into EPROM's and <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>
	      will start up when the board is powered up. For a ram
	      startup the application linked with <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> will be
	      downloaded into a board that is already powered up and
	      running a ROM monitor program of some sort. The default
	      setting for all platforms is a ram startup.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--disable-&#60;package&#62;</SPAN
></DT
><DD
><P
>	      In the current release all packages are enabled by
	      default. To disable a given package it is necessary to
	      pass the appropriate command line argument to
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. For example to configure a system without
	      the µITRON package the following command could be
	      used:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl --disable-uitron &#60;other options&#62;</B
></TT
></P
><P
>	      It should be noted that not all packages are completely
	      self-contained. For example there are routines in the C
	      library such as strtod() which perform floating point
	      operations and hence require the Math library to be
	      present. Therefore it is not sufficient to simply
	      disable the Math library using command line arguments to
	      pkgconf, it is also necessary to change a number of
	      fine-grained configuration options for the C library
	      after running <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. Future versions of the <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>
	      configuration tools will automate the handling of such
	      dependencies.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--enable-&#60;package&#62;</SPAN
></DT
><DD
><P
>	      If a given package has been disabled in an existing
	      build-tree and must now be reenabled, this can be
	      achieved by running <B
CLASS="COMMAND"
>pkgconf.tcl</B
> again using a --enable
	      argument. For example to reenable the µITRON
	      package the following command could be used:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl --enable-uitron &#60;other options&#62;</B
></TT
></P
></DD
><DT
><SPAN
CLASS="OPTION"
>--&#60;package&#62;-version=v0_4</SPAN
></DT
><DD
><P
>	      As additional releases of the <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> system are made there
	      may be multiple versions of a given package available.
	      By default <B
CLASS="COMMAND"
>pkgconf.tcl</B
> will always use the most recent
	      version of a given package, but if it is desired to use
	      an older version of a package this can be achieved by an
	      appropriate argument to <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. For example, to
	      select a specific version of µITRON the following
	      command can be used:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
> cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl --uitron-version=v0_4 &#60;other options&#62;</B
></TT
></P
></DD
><DT
><SPAN
CLASS="OPTION"
>--packages</SPAN
></DT
><DD
><P
>	      This option can be used to get a list of the available
	      packages and the available versions for each package.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--defaults</SPAN
></DT
><DD
><P
>	      When <B
CLASS="COMMAND"
>pkgconf.tcl</B
> is first used to create a build-tree it
	      will save the various coarse grained configuration
	      settings in a file pkgconf.sav. If <B
CLASS="COMMAND"
>pkgconf.tcl</B
> is run
	      again inside the same build-tree to change one of these
	      settings then the script will read in the save file. The
	      command line option --defaults causes the script to
	      ignore the settings in the save file and apply the
	      default settings instead.
	    </P
></DD
><DT
><SPAN
CLASS="OPTION"
>--srcdir=&#60;dir&#62;</SPAN
></DT
><DD
><P
>	      Typically the <B
CLASS="COMMAND"
>pkgconf.tcl</B
> script resides at the top
	      level of the <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> component repository, and hence the
	      script can identify the location of the component
	      repository by examining its own pathname. If for some
	      reason it is necessary to use an alternative <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> source
	      tree then this can be achieved with the --srcdir command
	      line argument, for example:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl --srcdir=c:/tmp/new_ecossrc &#60;other options&#62;</B
></TT
></P
></DD
><DT
><SPAN
CLASS="OPTION"
>--builddir=&#60;dir&#62;</SPAN
></DT
><DD
><P
>	      By default <B
CLASS="COMMAND"
>pkgconf.tcl</B
> assumes that the current
	      directory is the build-tree, and it will create various
	      files and subdirectories there. If it is necessary to
	      specify an alternative build-tree then this can be
	      achieved using the --builddir option, for
	      example:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
> cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl --builddir=c:/tmp/ecosobj &#60;other options&#62;        </B
></TT
></P
></DD
><DT
><SPAN
CLASS="OPTION"
>--prefix=&#60;dir&#62;</SPAN
></DT
><DD
><P
>	      In addition to the build-tree
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
> will generate an install
	      tree. The various header files, the library libtarget.a,
	      and any other files needed to develop applications, will
	      end up in this install tree. By default the install tree
	      resides inside a directory "install" in the build-tree,
	      but it is possible to specify an alternative directory
	      if necessary. In some environments this would make it
	      easier to share the built
	      <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> system between
	      developers.
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cygtclsh80 /Cygnus eCos/packages/pkgconf.tcl --prefix=//share/ecosobj &#60;other options&#62;</B
></TT
></P
></DD
></DL
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="using-pkgconf-tcl.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user-guides.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="managing-the-package-repository.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Using <B
CLASS="COMMAND"
>pkgconf.tcl</B
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="part-ii.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Managing the package repository</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>