<HTML>
<HEAD>
<TITLE>Installing eCos under Windows</TITLE>
</HEAD>

<!--#include virtual="include/header.html"-->

<H2>Installing eCos under Windows</H2>
<HR SIZE=3>

<h3>Downloading</h3>

The eCos 1.2.1 distribution for Windows is provided as a self-extracting
executable file. Click on the following link to download:

<ul>
<li><A HREF="ftp://sourceware.cygnus.com/pub/ecos/eCos121.exe">eCos 1.2.1 for Windows</A> (eCos121.exe - 8MB)
</ul>

In order to build the eCos sources, you will require a cross-compiler
and related development tools. The necessary tools are designated
<i>ecosSWtools-arm-990321</i> for the ARM target and
<i>ecosSWtools-990319</i> for the MN10300, PowerPC, SPARClite and TX39 targets.
They are available in source form only. Note
that, although eCos may be configured and built under Windows 95 and
Windows 98, it is not possible to build the eCos development tools on
these platforms. If you wish to develop eCos applications using Windows
95 or Windows 98, you must build the development tools under Windows
NT. Click on one of the following links to download:

<ul>
<li><a href="ftp://sourceware.cygnus.com/pub/ecos/ecosSWtools-990319-src.tar.bz2">eCos development tools for MN10300, PowerPC, SPARClite and TX39</a> (ecosSWtools-990319-src.tar.bz2 - 23MB)
<li><a href="ftp://sourceware.cygnus.com/pub/ecos/ecosSWtools-arm-990321-src.tar.bz2">eCos development tools for ARM</a> (ecosSWtools-arm-990321-src.tar.bz2 - 17MB)
</ul>

eCos also requires the GNU native tools for the building of the development tools and the eCos packages. Windows users should obtain the <a
href="http://sourceware.cygnus.com/cygwin/">Cygwin</a> Beta 20.1 version of
these tools. The full binary release is required. Click on
the following link to download:

<ul>
<li><a href="ftp://sourceware.cygnus.com/pub/cygwin/cygwin-b20/full.exe">Cygwin Beta 20.1 development tools</a> (full.exe - 14MB)
</ul>

Note that the Cygwin tools also include the <i>bzip2</i> utility required to extract the eCos development tool sources.

<h3>Installation</h3>

<ol><li>Install the Cygwin native tools by running the downloaded
    distribution file and following the on-screen instructions. The
    remaining instructions assume that the Cygwin tools are installed
    to the default location. If you wish to install to a different
    location, you should avoid the use of spaces in the destination
    path. Once installed, select <i>Cygwin B20</i> from the start
    menu hierarchy to launch the <i>bash</i> command-line
    environment.<p>

    If you receive the warning "<tt>bash.exe: warning: could not find
    /tmp, please create!</tt>" then you should create <tt>/tmp</tt>
    before proceeding by entering the following command at the
    <i>bash</i> prompt:<p>

    <nobr><tt>mkdir /tmp</tt></nobr><p>

<li>Build the eCos development tools by following
these steps at the <i>bash</i> prompt:<p>

  <ul>
  <li>Mount the logical drive(s) you will use to build the eCos development tools:<p>
  <nobr><tt>mount C: /c</tt></nobr><p>

  Note that binary mode mounts cannot be used for this purpose. Warnings
  of the form "<tt>Warning: /c does not exist!</tt>" are normal and can be ignored.
  The use of an <i>NTFS</i> file system is strongly recommended due to the large number
  of small files involved in the build process.<p>

  <li>Mount the Cygwin tools as <nobr><tt>/bin</tt></nobr> such that <nobr><tt>/bin/sh</tt></nobr> exists:<p>
  <nobr><tt>mount C:/cygnus/cygwin-b20/H-i586-cygwin32/bin /bin</tt></nobr><p>

  <li>Mount the Cygwin libraries as <nobr><tt>/lib</tt></nobr>:<p>
  <nobr><tt>mount C:/cygnus/cygwin-b20/H-i586-cygwin32/i586-cygwin32/lib /lib</tt></nobr><p>

  <li>Set the necessary environment variables:<p>
  <nobr><tt>export MAKE_MODE=unix</tt></nobr><br>
  <nobr><tt>export BISON_HAIRY=/c/cygnus/cygwin-b20/share/bison.hairy</tt></nobr><br>
  <nobr><tt>export BISON_SIMPLE=/c/cygnus/cygwin-b20/share/bison.simple</tt></nobr><p>

  <li>Extract the eCos development tool sources from the
      downloaded distribution file:<p>
      <nobr><tt>
          cd /c/cygnus<br>
          bunzip2 -c ecosSWtools-arm-990321-src.tar.bz2 | tar xvf -</tt></nobr> &nbsp;&nbsp;&nbsp;&nbsp;(<i>for&nbsp;the&nbsp;ecosSWtools-arm-990321&nbsp;archive</i>)<br>
      <nobr><tt>bunzip2 -c ecosSWtools-990319-src.tar.bz2 | tar xvf -&nbsp;&nbsp;&nbsp;&nbsp;</tt></nobr> &nbsp;&nbsp;&nbsp;&nbsp;(<i>for&nbsp;the&nbsp;ecosSWtools-990319&nbsp;archive</i>)
      <p>

   The directory <nobr><tt>C:\cygnus\ecosSWtools-arm-990321\src</tt></nobr> or <nobr><tt>C:\cygnus\ecosSWtools-990319\src</tt></nobr> should be generated and populated during the extraction process.<p>


  <li>Create an object directory for your builds:<p>
  <nobr><tt>mkdir /c/build</nobr><br>
  <nobr>cd /c/build</tt></nobr><p>

   <li>Configure the tools, saving the output to <tt>configure.out</tt>:<p>

   <nobr><tt>/c/cygnus/ecosSWtools-arm-990321/src/configure -v \<br>
       &nbsp;&nbsp;--prefix=/c/cygnus/ecosSWtools-arm-990321 \<br>
       &nbsp;&nbsp;--exec-prefix=/c/cygnus/ecosSWtools-arm-990321/H-i586-cygwin32 \<br>
       &nbsp;&nbsp;--host=i586-cygwin32 --target=arm-elf &gt; configure.out 2&gt;&amp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></nobr> &nbsp;&nbsp;&nbsp;&nbsp;(<i>for&nbsp;ecosSWtools-arm-990321</i>)<p>

   <nobr><tt>/c/cygnus/ecosSWtools-990319/src/configure -v \<br>
       &nbsp;&nbsp;--prefix=/c/cygnus/ecosSWtools-990319 \<br>
       &nbsp;&nbsp;--exec-prefix=/c/cygnus/ecosSWtools-990319/H-i586-cygwin32 \<br>
       &nbsp;&nbsp;--host=i586-cygwin32 --target=<i>target-triplet</i> &gt; configure.out 2&gt;&amp;1</tt></nobr> &nbsp;&nbsp;&nbsp;&nbsp;(<i>for&nbsp;ecosSWtools-990319</i>)<p>

   You should replace <i><tt>target-triplet</tt></i> in the
   above command with one of the following target triplets:
   <nobr><tt>i686-pc-linux-gnu</tt></nobr>, <nobr><tt>mn10300-elf</tt></nobr>, <nobr><tt>powerpc-eabi</tt></nobr>,
   <nobr><tt>sparclite-elf</tt></nobr> or <nobr><tt>mips-tx39-elf</tt></nobr>.<p>

  <li>If you have configured for the <tt>i686-pc-linux-gnu</tt> target, a prebuilt version of <i>libgcc</i> is required.
  Locate the file <tt>libgcc.a</tt> on the target PC (typically in the <tt>/usr/lib</tt> hierarchy) and copy it to <tt>/c/build/gcc/libgcc1.a</tt> in the
  newly-created build tree. Note that the file is renamed during copying.<p>

  <li>Build and install the tools, saving the output to <tt>make.out</tt>:<p>
  <nobr><tt>make -w all install LIBGCC2_DEBUG_CFLAGS="-g1 -O1" \<br> &nbsp;&nbsp;LANGUAGES="c c++" &gt; make.out 2&gt;&amp;1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</tt></nobr> &nbsp;&nbsp;&nbsp;&nbsp;(<i>for&nbsp;ecosSWtools-arm-990321</i>)<p>
  <nobr><tt>make -w all install LANGUAGES="c c++" &gt; make.out 2&gt;&amp;1</tt></nobr> &nbsp;&nbsp;&nbsp;&nbsp;(<i>for&nbsp;ecosSWtools-990319</i>)
  </ul>

  <p>
  When the build is complete, the executable files of the eCos
  development tools may be found in the directory <nobr><tt>C:\cygnus\ecosSWtools-arm-990321\H-i586-cygwin32\bin</tt></nobr> or
  <nobr><tt>C:\cygnus\ecosSWtools-990319\H-i586-cygwin32\bin</tt></nobr>.<p>

<li>Install eCos by running the downloaded distribution file and
following the on-screen instructions. Note that it is not possible to upgrade an existing eCos installation.
Any previous installations should be uninstalled (using the <i>Add/Remove Programs</i> utility in the
Control Panel) before installing eCos 1.2.1.
</ol>

<!--#include virtual="include/footer.html"-->
