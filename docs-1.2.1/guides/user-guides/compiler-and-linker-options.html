<HTML
><HEAD
><TITLE
>Compiler
and linker options</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.33"><LINK
REL="HOME"
TITLE="eCos Users
Guide"
HREF="user-guides.html"><LINK
REL="UP"
TITLE="eCos Programming Concepts
and Techniques"
HREF="programming-concepts-and-techniques.html"><LINK
REL="PREVIOUS"
TITLE="Application
build tree"
HREF="application-build-tree.html"><LINK
REL="NEXT"
TITLE="Compiling a C application"
HREF="compiling-a-cxx-application.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
><SPAN
CLASS="TRADEMARK"
>eCos</SPAN
><SUP
><FONT
SIZE="-4"
>TM</FONT
></SUP
> User&#8217;s
Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="application-build-tree.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="compiling-a-cxx-application.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="CHAPTER"
><H1
><A
NAME="COMPILER-AND-LINKER-OPTIONS"
>Chapter 5. Compiler
and linker options</A
></H1
><DIV
CLASS="TOC"
><DL
><DT
><B
>Table of Contents</B
></DT
><DT
><A
HREF="compiler-and-linker-options.html#COMPILING-A-C-APPLICATION"
>Compiling a C application</A
></DT
><DT
><A
HREF="compiling-a-cxx-application.html"
>Compiling a C++ application</A
></DT
></DL
></DIV
><P
><SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> is built using the GNU C and
C++ compilers. The versions of the tools Cygnus has
prepared for this release have some enhancements, such as constructor
priority ordering and selective linking, which will eventually become
part of the standard distribution. </P
><P
>Some <SPAN
CLASS="APPLICATION"
>GCC</SPAN
> options are required for <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>,
and others can be useful. This chapter gives a brief description
of the required options as well as some recommended <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>-specific
options. All other <SPAN
CLASS="APPLICATION"
>GCC</SPAN
> options (described
in the <SPAN
CLASS="PRODUCTNAME"
>GNUPro</SPAN
> manuals) are available. </P
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="COMPILING-A-C-APPLICATION"
>Compiling a C application</A
></H1
><P
>The following command lines demonstrate the <I
CLASS="EMPHASIS"
>minimum</I
> set
of options required to compile and link an <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> program
written in C. </P
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>Remember that when this manual shows <B
CLASS="COMMAND"
>gcc</B
> you
should type the full name of the cross compiler: <B
CLASS="COMMAND"
>mn10300-elf-gcc</B
>, <B
CLASS="COMMAND"
>mips-tx39-elf-gcc</B
>, <B
CLASS="COMMAND"
>powerpc-eabi-gcc</B
>, <B
CLASS="COMMAND"
>sparclite-elf-gcc</B
>,
or <B
CLASS="COMMAND"
>arm-elf-gcc</B
>. When compiling for the synthetic
Linux target, use the native <B
CLASS="COMMAND"
>gcc</B
> which must have
the features required by <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>. </P
></BLOCKQUOTE
></DIV
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$ </TT
><B
CLASS="COMMAND"
>gcc -c  -I<TT
CLASS="REPLACEABLE"
><I
>INSTALL_DIR</I
></TT
>/include file.c</B
>
<TT
CLASS="PROMPT"
>$ </TT
><B
CLASS="COMMAND"
>gcc -o program file.o -L<TT
CLASS="REPLACEABLE"
><I
>INSTALL_DIR</I
></TT
>/lib -Ttarget.ld -nostdlib</B
>&#13;</PRE
></TD
></TR
></TABLE
><DIV
CLASS="NOTE"
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>Certain targets may require extra options, for example the
SPARClite architectures require the option <B
CLASS="COMMAND"
>-mcpu=sparclite</B
>.
Examine the <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/packages/targets</TT
> file
or <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/examples/Makefile</TT
> to
see if any extra options are required, and if so, what they are. </P
></BLOCKQUOTE
></DIV
><P
>The following command lines use some other options which are
recommended because they use the selective
linking feature:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
><TT
CLASS="PROMPT"
>$ </TT
><B
CLASS="COMMAND"
>gcc -c  -I<TT
CLASS="REPLACEABLE"
><I
>INSTALL_DIR</I
></TT
>/include -I. -ffunction-sections -fdata-sections -g -O2 file.c</B
>
<TT
CLASS="PROMPT"
>$ </TT
><B
CLASS="COMMAND"
>gcc -o program file.o -ffunction-sections -fdata-sections -Wl,--gc-sections -g -O2 -L<TT
CLASS="REPLACEABLE"
><I
>INSTALL_DIR</I
></TT
>/lib -Ttarget.ld -nostdlib</B
></PRE
></TD
></TR
></TABLE
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="application-build-tree.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user-guides.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="compiling-a-cxx-application.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Application
build tree</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="programming-concepts-and-techniques.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Compiling a C++ application</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>