<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Verification</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.19"><LINK
REL="HOME"
TITLE="Getting Started with eCosTM"
HREF="ecos-tutorial.html"><LINK
REL="UP"
TITLE="Hardware setup"
HREF="hardware-setup.html"><LINK
REL="PREVIOUS"
TITLE="PowerPC hardware setup"
HREF="powerpc-hardware-setup.html"><LINK
REL="NEXT"
TITLE="Programming Tutorial"
HREF="programming-tutorial.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>Getting Started with <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
><SUP
><FONT
SIZE="-1"
>TM</FONT
></SUP
></TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="powerpc-hardware-setup.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
>Chapter 12. Hardware setup</TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="programming-tutorial.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
CLASS="SECT1"
><A
NAME="VERIFICATION"
>Verification</A
></H1
><P
>To verify that your board has been set up correctly you
	  need to download and execute an application. The following
	  example demonstrates how to use
	  <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> to download an <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> kernel
	  test case, execute it, and display  its test output. You
	  will need to change directory to the pre-built tests that
	  are provided in the <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> installation.</P
><P
>	  On Windows you must have the <B
CLASS="COMMAND"
>bash</B
> command
	  line interpreter running with some environment variables
	  which are useful for <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> work.  If you have purchased the
	    <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> Developer's Kit, you can select this by clicking
	  the <SPAN
CLASS="GUIMENU"
>Start</SPAN
> button, selecting
	  <SPAN
CLASS="GUISUBMENU"
>Programs</SPAN
>, then <SPAN
CLASS="GUISUBMENU"
>Cygnus
	    eCos</SPAN
>, then <SPAN
CLASS="GUIMENUITEM"
>eCos Development
	    Environment</SPAN
>.  If you are using the
	  Sourceware release, you should set the environment variables
	  as shown in the <I
CLASS="CITETITLE"
>GNUPro Toolkit
	    Reference</I
> booklet.</P
><P
>	  Change directory as follows for the MN10300:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cd <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/prebuilt/v1_1/mn10300-stdeval1-ram/tests/kernel</B
></TT
></P
><P
>or on the TX39:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cd <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/prebuilt/v1_1/tx39-jmr3904-ram/tests/kernel</B
></TT
></P
><P
>or on the PowerPC:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>cd <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/prebuilt/v1_1/powerpc-cogent-ram/tests/kernel</B
></TT
></P
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	    The tests have been built in two versions; RAM startup for
	    use on the evaluation board, and ROM startup for use on
	    the simulator.
	  </P
></BLOCKQUOTE
><P
>To execute the thread_gdb test case on the target
	  hardware, run <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> in command line
	  mode using the following command:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>gdb -nw thread_gdb</B
></TT
></P
><P
><SPAN
CLASS="APPLICATION"
>GDB</SPAN
> will display a
	copyright banner and then display a prompt
	<TT
CLASS="PROMPT"
>(gdb)</TT
>. To run the test case 
	type the following commands at the prompt:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>(gdb) </TT
><TT
CLASS="USERINPUT"
><B
>set remotebaud 38400</B
></TT
></P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>(gdb) </TT
><TT
CLASS="USERINPUT"
><B
>target remote com1</B
></TT
></P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>(gdb) </TT
><TT
CLASS="USERINPUT"
><B
>load</B
></TT
></P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>(gdb) </TT
><TT
CLASS="USERINPUT"
><B
>continue</B
></TT
></P
><P
>The first two commands set up the serial connection: the
	target expects to communicate with the host at 38400 baud on
	the com1 serial port (this should be adjusted if a
	different port is used.) The third command will load the
	test case executable into the memory of the target board, and
	the last command will start the test case running. You should
	now see a number of text messages appear as below:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
> 

         PASS:&#60;GDB Thread test OK&#62;
         EXIT:&#60;done&#62;    </PRE
></TD
></TR
></TABLE
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
><SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> has no concept of the application exiting.
	    All <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> test cases complete and then run in a
	    continuous tight loop. To return control to
	    <SPAN
CLASS="APPLICATION"
>GDB</SPAN
>, you must type
	    <B
CLASS="KEYCAP"
>Control</B
>-<B
CLASS="KEYCAP"
>C</B
>. </P
></BLOCKQUOTE
><P
>	  The full functionality of <SPAN
CLASS="APPLICATION"
>GDB</SPAN
> is
	  now available to you, including breakpoints and watchpoints.
	  Please consult the <SPAN
CLASS="PRODUCTNAME"
>GNUPro</SPAN
> <SPAN
CLASS="APPLICATION"
>GDB</SPAN
>
	  documentation for further information.</P
><BLOCKQUOTE
CLASS="NOTE"
><P
><B
>Note: </B
>	  An idiosyncrasy in <SPAN
CLASS="APPLICATION"
>GDB</SPAN
>'s handling
	  of target boards as opposed to simulators means that we use
	  <B
CLASS="COMMAND"
>continue</B
> to start executing on hardware
	  and <B
CLASS="COMMAND"
>run</B
> to start executing in the
	  simulator.
	</P
></BLOCKQUOTE
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="powerpc-hardware-setup.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="ecos-tutorial.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="programming-tutorial.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>PowerPC hardware setup</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="hardware-setup.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Programming Tutorial</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>