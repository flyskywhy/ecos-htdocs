<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<HTML
><HEAD
><TITLE
>Reference for pkgconf.tcl</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet version 1.19"><LINK
REL="HOME"
TITLE="eCosTM User's Guide"
HREF="user-guides.html"><LINK
REL="UP"
TITLE="Configuration and the Package Repository"
HREF="configuration-and-the-package-repository.html"><LINK
REL="PREVIOUS"
TITLE="Editing the sources"
HREF="editing-the-sources.html"><LINK
REL="NEXT"
TITLE="Managing the package repository"
HREF="managing-the-package-repository.html"></HEAD
><BODY
><DIV
CLASS="NAVHEADER"
><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
><SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
><SUP
><FONT
SIZE="-1"
>TM</FONT
></SUP
> User's Guide</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="editing-the-sources.html"
>Prev</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="managing-the-package-repository.html"
>Next</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><H1
><A
NAME="REFERENCE-FOR-PKGCONF-TCL"
>Chapter 9. Reference for <B
CLASS="COMMAND"
>pkgconf.tcl</B
></A
></H1
><P
>	<B
CLASS="COMMAND"
>pkgconf.tcl</B
> is the script that should be
	used to create a build tree. Given this build tree it is then
	possible to build the system and its testcases, and to change
	fine-grained configuration options.
	<B
CLASS="COMMAND"
>pkgconf.tcl</B
> itself deals with a number of
	coarse-grained configuration options such as the target
	platform and the packages that should be used.
      </P
><P
>	<B
CLASS="COMMAND"
>pkgconf.tcl</B
> is implemented in the scripting
	language Tcl/Tk, and therefore it must be run from inside a
	suitable Tcl interpreter. Such an interpreter is supplied with
	this release as part of the GNUPro software. The command used
	to invoke <B
CLASS="COMMAND"
>pkgconf.tcl</B
> is:
      </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl <TT
CLASS="REPLACEABLE"
><I
>options</I
></TT
></B
></TT
></P
><P
>	Usually the <B
CLASS="COMMAND"
>pkgconf.tcl</B
> script will be run
	inside the build tree itself. If you are creating a new build
	tree then typically you will create a new empty directory
	using the mkdir command, cd into that directory, and then
	invoke <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. Once a build tree
	exists it is possible to run <B
CLASS="COMMAND"
>pkgconf.tcl</B
>
	again inside the same build tree and change some of the
	coarse-grained configuration options, for example it is
	possible to switch between a simulator and an evaluation
	board.
      </P
><P
>	The available command line arguments are as follows:
      </P
><P
></P
><DL
><DT
><TT
CLASS="OPTION"
>--help</TT
></DT
><DD
><P
>	      Provide basic online help for the available options</P
></DD
><DT
><TT
CLASS="OPTION"
>--target=&#60;arch&#62;</TT
></DT
><DD
><P
>	      Select a specific architecture. The architectures
	      available will depend on the exact release of <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>
	      that you are using, and is defined in the file
	      <TT
CLASS="FILENAME"
><TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/targets</TT
>.
	      If your release only supports a single architecture then
	      this argument is optional since
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
> will default to that
	      architecture. 
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--targets</TT
></DT
><DD
><P
>	      Use this to list of the supported
	      architectures and the platforms available for each
	      platform.
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--platform=&#60;platform&#62;</TT
></DT
><DD
><P
>	      Select a specific platform for the current architecture,
	      for example "sim". The default platform for a given
	      architecture is the first one listed in the targets
	      file. Use the option --targets to list the
	      available architectures and platforms.
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--startup=&#60;value&#62;</TT
></DT
><DD
><P
>	      For some platforms it is possible to start up <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> in a
	      number of ways. For a ROM startup the application linked
	      with <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> will typically be burned into EPROM's and <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
>
	      will start up when the board is powered up. For a RAM
	      startup the application linked with <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> will be
	      downloaded into a board that is already powered up and
	      running a ROM monitor program of some sort. The default
	      setting for all platforms is a RAM startup.
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--disable-&#60;package&#62;</TT
></DT
><DD
><P
>	      In the current release all packages relevant to the
	      architecture and platform are enabled by default. To
	      disable a given package it is necessary to pass the
	      appropriate command line argument to
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. For example to configure
	      a system without the µITRON package the following command
	      could be used:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl --disable-uitron &#60;other options&#62;</B
></TT
></P
><P
>	      It should be noted that not all packages are completely
	      self-contained. For example there are routines in the C
	      library such as <TT
CLASS="FUNCTION"
><B
>strtod()</B
></TT
> which
	      perform floating point operations and hence require the
	      math library to be present. Therefore it is not
	      sufficient to simply disable the math library using
	      command line arguments to pkgconf, it is also necessary
	      to change a number of fine-grained configuration options
	      for the C library after running
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. Future versions of the
	      <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> <SPAN
CLASS="APPLICATION"
>Configuration Tool</SPAN
>s
	      will automate the handling of such dependencies.
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--enable-&#60;package&#62;</TT
></DT
><DD
><P
>	      If a given package has been disabled in an existing
	    build tree and must now be reenabled, run 
	    <B
CLASS="COMMAND"
>pkgconf.tcl</B
> again using a
	    --enable argument. For example, to reenable the µITRON
	    package use the following command:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl --enable-uitron &#60;other options&#62;</B
></TT
></P
></DD
><DT
><TT
CLASS="OPTION"
>--&#60;package&#62;-version=v0_4</TT
></DT
><DD
><P
>	      As additional releases of the <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> system are made
	      there may be multiple versions of a given package
	      available. By default <B
CLASS="COMMAND"
>pkgconf.tcl</B
>
	      will always use the most recent version of a given
	      package, but if you want to use an older version of
	      a package you can pass an appropriate
	      argument to <B
CLASS="COMMAND"
>pkgconf.tcl</B
>. For example,
	      to select a specific version of the µITRON package, use the
	      following command:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
> tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl --uitron-version=v0_4 &#60;other options&#62;</B
></TT
></P
></DD
><DT
><TT
CLASS="OPTION"
>--packages</TT
></DT
><DD
><P
>	      Use this option to list the available
	      packages and the available versions for each package.
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--defaults</TT
></DT
><DD
><P
>	      When <B
CLASS="COMMAND"
>pkgconf.tcl</B
> is first used to
	      create a build tree it will save the various coarse
	      grained configuration settings in a file
	      <TT
CLASS="FILENAME"
>pkgconf.sav</TT
>. If
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
> is run again inside the
	      same build tree to change one of these settings then the
	      script will read in the save file. The command line
	      option --defaults causes the script to ignore the
	      settings in the save file and apply the default settings
	      instead.
	    </P
></DD
><DT
><TT
CLASS="OPTION"
>--srcdir=&#60;dir&#62;</TT
></DT
><DD
><P
>	      Typically the <B
CLASS="COMMAND"
>pkgconf.tcl</B
> script
	      resides at the top level of the <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> component
	      repository, and hence the script can identify the
	      location of the component repository by examining its
	      own pathname. If it is necessary to use
	      an alternative <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> source tree, use the --srcdir 
	      command line argument, for example:
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl --srcdir=/tmp/new-ecossrc &#60;other options&#62;</B
></TT
></P
></DD
><DT
><TT
CLASS="OPTION"
>--builddir=&#60;dir&#62;</TT
></DT
><DD
><P
>	      By default <B
CLASS="COMMAND"
>pkgconf.tcl</B
> assumes that
	      the current directory is the build tree, and it will
	      create various files and subdirectories there. If it is
	      necessary to specify an alternative build tree, use
	      the --builddir option, for example:</P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
> tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl --builddir=/tmp/ecosobj &#60;other options&#62;        </B
></TT
></P
></DD
><DT
><TT
CLASS="OPTION"
>--prefix=&#60;dir&#62;</TT
></DT
><DD
><P
>	      In addition to the build tree
	      <B
CLASS="COMMAND"
>pkgconf.tcl</B
> will generate an install
	      tree. The various header files, the library libtarget.a,
	      and any other files needed to develop applications, will
	      end up in this install tree. By default the install tree
	      resides inside a directory "install" in the build tree,
	      but it is possible to specify an alternative directory
	      if necessary. In some environments this would make it
	      easier to share the built
	      <SPAN
CLASS="PRODUCTNAME"
>eCos</SPAN
> system between
	      developers.
	    </P
><P
CLASS="LITERALLAYOUT"
><TT
CLASS="PROMPT"
>$ </TT
><TT
CLASS="USERINPUT"
><B
>tclsh <TT
CLASS="REPLACEABLE"
><I
>BASE_DIR</I
></TT
>/pkgconf.tcl --prefix=//share/ecosobj &#60;other options&#62;</B
></TT
></P
></DD
></DL
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="editing-the-sources.html"
>Prev</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="user-guides.html"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="managing-the-package-repository.html"
>Next</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>Editing the sources</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="configuration-and-the-package-repository.html"
>Up</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>Managing the package repository</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>